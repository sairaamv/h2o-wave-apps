{"version":3,"sources":["login.tsx","tracking.ts","qd.ts","theme.ts","card_menu.tsx","intl.ts","layout.tsx","markdown.tsx","tooltip.tsx","button.tsx","checkbox.tsx","checklist.tsx","choice_group.tsx","color_picker.tsx","combobox.tsx","date_picker.tsx","dropdown.tsx","expander.tsx","file_upload.tsx","frame.tsx","label.tsx","link.tsx","markup.tsx","message_bar.tsx","plot.tsx","picker.tsx","progress.tsx","range_slider.tsx","separator.tsx","slider.tsx","spinbox.tsx","stats.tsx","stepper.tsx","icon_table_cell_type.tsx","parts/progress_arc.tsx","progress_table_cell_type.tsx","table.tsx","tabs.tsx","template.tsx","text.tsx","textbox.tsx","toggle.tsx","vega.tsx","form.tsx","dialog.tsx","notification.ts","meta.tsx","page.tsx","app.tsx","router.tsx","breadcrumbs.tsx","flex.tsx","footer.tsx","graphics.tsx","grid.tsx","nav.tsx","header.tsx","image.tsx","parts/progress_bar.tsx","large_bar_stat.tsx","large_stat.tsx","list.tsx","list_item1.tsx","none.tsx","pixel_art.tsx","repeat.tsx","section.tsx","parts/microarea.tsx","parts/microbars.tsx","small_series_stat.tsx","small_stat.tsx","stat_list.tsx","stat_table.tsx","tab.tsx","tall_gauge_stat.tsx","tall_series_stat.tsx","toolbar.tsx","wide_bar_stat.tsx","wide_gauge_stat.tsx","wide_series_stat.tsx","serviceWorker.ts","index.tsx"],"names":["css","stylesheet","login","width","minHeight","display","alignItems","justifyContent","flexDirection","Login","queryString","window","location","search","action","className","method","CompoundButton","type","secondaryText","tracker","track","args","setTimeout","w","gtag","r","k","v","sanitize","sendEvent","different","_a","_b","box","x","length","undefined","equal","arrows","on","f","a","dispose","remove","push","broadcast","t","touch","y","__boxed__","boxed","react","slice","immediate","boxen","xs","emit","map","forEach","i","indexOf","splice","bond","ctor","props","model","self","Object","keys","_","setState","state","this","init","update","render","React","SockEventType","SockMessageType","guid","xid","parseI","s","test","parseInt","NaN","parseU","isNaN","unpack","data","decodeString","isData","list","debounce","timeout","e","clearTimeout","d","substring","decodeType","JSON","parse","console","error","fields","rows","Array","isArray","recs","rec","j","columns","n","isMap","isBuf","__buf__","isCur","__cur__","newType","m","reverseIndex","match","make","tup","newCur","get","set","newFixBuf","tups","seti","geti","put","newCycBuf","b","_k","newTups","loadCycBuf","loadFixBuf","loadMapBuf","ts","keysOf","sort","newMapBuf","loadBuf","c","loadCard","key","changedB","ks","p","gget","gset","buf","substr","id","name","changed","newPage","dirty","dirties","cards","add","card","split","valuesOf","drop","sync","load","page","exec","ops","op","keyseq","join","clearRec","qd","path","pathname","events","refreshRateB","busyB","socket","dialogB","theme","changes","ref","value","del","sock","opsd","send","stringify","jump","startsWith","hash","close","backoff","currentPage","connect","handle","reconnect","address","retry","WebSocket","onopen","Message","Info","message","charAt","onclose","Warn","onmessage","line","msg","Data","Err","Reset","err","onerror","l","protocol","host","toSocketAddress","px","pc","rem","clas","names","padding","margin","displayMixin","visible","cssVar","color","cssVarValue","prop","getComputedStyle","document","documentElement","getPropertyValue","trim","fluentPalettes","light","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","black","white","neon","dark","palettes","text","changeTheme","palette","fluentPalette","body","style","setProperty","hex","rgb","g","alpha","Fluent","menu","position","top","right","$nest","height","icon","userSelect","target","boxSizing","cursor","opacity","toContextMenuItem","label","iconProps","iconName","title","caption","subMenuProps","items","onClick","CardMenu","commands","hiddenB","show","hide","hidden","data-test","Icon","ContextualMenu","onItemClick","onDismiss","intlCache","createIntlCache","intl","createIntl","locale","navigator","language","messages","onError","isBareExpr","Handlebars","registerHelper","opts","replace","toUpperCase","kvToOpts","formatDate","formatTime","formatNumber","CardEffect","isFormatExpr","parseFormat","invocation","compile","bare","format","thickness","register","effect","Normal","lookup","newCardRegistry","substitute","formatString","defaultValue","Format","CardView","Tag","view","Repeat","badPlacement","left","grid","uw","uh","cols","gap","scale","innerWidth","innerHeight","unitWidth","unitHeight","unitInnerWidth","unitInnerHeight","place","normalize","h","slot","bottom","placeOnGrid","rescale","clientWidth","clientHeight","Math","min","inset","overflow","newGrid","transition","flexGrow","normal","backgroundColor","boxShadow","raised","flat","getCardEffectClass","getCardEffect","Raised","Flat","GridLayout","children","placement","zIndex","markdown","textDecoration","table","borderCollapse","tr","borderBottom","th","textAlign","td","img","maxWidth","maxHeight","markdownit","html","linkify","typographer","Markdown","source","dangerouslySetInnerHTML","__html","View","content","container","alignContent","element","fontWeight","fontSize","marginLeft","XToolTip","showIcon","expand","tooltipProps","onRenderContent","buttons","justifications","start","end","center","between","around","XButton","link","disabled","primary","XButtons","button","filter","Boolean","tooltip","horizontal","horizontalAlign","justify","tokens","childrenGap","XStandAloneButton","XCheckbox","onChange","_e","checked","trigger","inputProps","defaultIndeterminate","indeterminate","defaultChecked","toolbar","XChecklistItem","selectedB","styles","root","marginBottom","XChecklist","values","_pause","defaultSelection","Set","choices","choice","has","capture","vs","select","selectAll","deselectAll","variant","XChoiceGroup","options","option","required","defaultSelectedKey","XColorPicker","onColorChanged","_id","str","cs","columnCount","selectedId","colorCells","XCombobox","textB","_index","placeholder","autoComplete","allowFreeform","errorMessage","pad2","parseDate","ss","ymd","Date","XDatePicker","onSelectDate","getFullYear","getMonth","getDate","XDropdown","isMultivalued","selection","selectedOptionsB","from","selected","delete","selectedOpts","clear","o","selectionArr","multiSelect","selectedKeys","expanderOpen","expanderClosed","XExpander","isOpenB","expanded","isOpen","actionTitle","expanderIcon","paddingLeft","uploadInput","upload","uploadDragging","border","dashed","uploadLabel","borderRadius","background","minWidth","uploadMessageBar","uploadRemove","convertMegabytesToBytes","bytes","XFileUpload","isDraggingB","filesB","percentCompleteB","errorB","successMsgB","maxFileSizeBytes","max_file_size","maxSizeBytes","max_size","fileExtensions","file_extensions","formData","FormData","append","makeRequest","Promise","resolve","reject","xhr","XMLHttpRequest","open","onprogress","loaded","total","onreadystatechange","readyState","DONE","status","responseText","files","validateFiles","fileArr","multiple","notAllowedFiles","fileName","allowedExtension","toLowerCase","endsWith","isFileTypeAllowed","maxSizePerFileExceededFiles","size","reduce","errMsg","onIsDragging","preventDefault","stopPropagation","onIsNotDragging","onDrop","dataTransfer","onDragOver","onDismissError","onDismissSuccess","uploadClasses","onDragStart","onDragEnter","onDragEnd","onDragLeave","messageBarType","isMultiline","success","pointerEvents","description","toFixed","percentComplete","verticalAlign","overflowX","index","nowrap","accept","htmlFor","marginTop","frame","fixrefs","inline","URL","createObjectURL","Blob","InlineFrame","src","frameBorder","XFrame","XLabel","XLink","href","download","XMarkup","MarkupCard","SpaceT","toMessageBarType","warning","severeWarning","blocked","info","XMessageBar","pickerSuggestionsProps","suggestionsHeaderText","noResultsFoundText","XPicker","tags","selectedTagsB","includes","filterSuggestedTags","filterText","selectedTags","isAlreadySelected","onEmptyResolveSuggestions","removeButtonAriaLabel","onResolveSuggestions","itemLimit","max_choices","selectedItems","cat10","registerInteraction","processing","throttle","wait","leading","trailing","isF","isS","parseInts","convertToDates","ds","convertToPairs","f0","f1","xyVariants","xyExtra","makeXYProps","makeXYExtraProps","makeFormattables","xProps","yProps","xExtraProps","yExtraProps","otherProps","formattables","scaleTypeOf","marks","attr","field","spaceTypes","cc","CC","dd","DD","tt","TT","dc","DC","cd","CD","tc","TC","ct","CT","TD","dt","DT","dummyDatum","makeFormatFunc","datum","transposeMark","mark","tmp","refactorMark","plainAttr","fieldAttr","formatAttr","expr","fmts","fmt","refactorData","x_scale","x_field","x0_field","x0","y_scale","y_field","y0_field","y0","x1_field","x2_field","y1_field","y2_field","makeNote","fill_color","fill_opacity","stroke_color","stroke_opacity","stroke_size","stroke_dash","ref_stroke_color","ref_stroke_opacity","ref_stroke_dash","ref_stroke_size","label_fill_color","label_fill_opacity","label_stroke_color","label_stroke_opacity","label_stroke_size","label_font_size","label_font_weight","label_line_height","label_align","labelStyle","makeTextStyle","shapeStyle","makeShapeStyle","lineStyle","point","makeGeom","color_field","color_range","color_domain","shape_field","shape_range","shape","size_field","size_range","stack","dodge","dodge_field","curve","label_field","label_format","label_offset","label_offset_x","label_offset_y","label_rotation","label_position","label_overlap","adjust","marginRatio","dodgeBy","colors","domain_colors","acc","callback","layout","offset","offsetX","offsetY","i_label_rotation","autoRotate","rotate","PI","cfg","fill","fillOpacity","stroke","strokeOpacity","lineWidth","lineDash","font_size","font_weight","line_height","align","u_font_weight","lineHeight","makeScale","typ","max","nice","axis","autoHide","fixScaleType","formatter","alias","makeCoord","space","coord","getCoordType","transpose","actions","makeChart","el","coordinate","scales","axes","x_format","x_title","x_min","x_max","x_nice","x_axis","y_format","y_title","y_min","y_max","y_nice","y_axis","makeScales","geometries","annotations","makeMarks","autoFit","animate","interactions","showCrosshairs","crosshairs","XVisualization","currentChart","currentPlot","createRef","current","raw_data","plot","spaceTypeOf","chart","Chart","interaction","ev","gEvent","originalEvent","stateStatus","select_marks","changeData","XProgress","borderWidth","borderColor","transform","fontFamily","XRangeSlider","step","min_value","max_value","valueB","val","maxValue","minValue","allowSameValues","separator","XSeparator","XSlider","onChanged","_event","_value","buttonProps","showValue","originFromZero","XSpinbox","parseValue","parseFloat","isFinite","onBlur","onIncrement","newValue","String","onDecrement","stats","stat","lhs","marginRight","statCaption","XStats","statStyle","justification","icon_color","FontIcon","stepNumber","iconStyles","XStepper","steps","createStep","Fragment","grow","done","stepIdx","paddingRight","block","XIconTableCellType","ProgressArc","useRef","useState","setContent","renderViz","getBoundingClientRect","diameter","outerRadius","innerRadius","d3","startAngle","endAngle","bar","viewBox","onResize","useEffect","addEventListener","removeEventListener","useLayoutEffect","percentContainer","percent","XProgressTableCellType","progress","round","sortableHeader","sortingIcon","hideCellGroupCollapse","sortingF","column","sortAsc","rowA","rowB","dataType","formatNum","num","toString","XTable","item","cells","isMultiple","filteredItemsB","searchableKeys","searchable","searchStrB","selectedFiltersB","colContextMenuListB","groupsB","groupByKeyB","groupByOptions","groupable","col","onSearchChange","searchStr","initGroups","some","selectedFilters","filteredItems","every","filterKey","filterVal","reset","row","toCSV","createElement","blob","url","click","revokeObjectURL","onRenderMenuList","paddingTop","paddingBottom","filters","onDismissContextMenu","onColumnContextMenu","fieldName","directionalHint","bottomLeftEdge","gapSpace","isBeakVisible","arr","prevSum","groupedBy","rv","groupedByKeys","groups","prevKey","startIndex","count","isCollapsed","makeGroups","flatMap","onGroupByChange","onRenderDetailsHeader","stickyPosition","Header","isScrollSynced","onRenderDetailsFooter","searchOrFilter","filterable","downloadable","resettable","footerItems","Footer","onRenderRow","cell","alignSelf","onColumnClick","getAttribute","isSortable","group","columnsB","min_width","max_width","headerClassName","sortable","iconClassName","columnActionsMode","hasDropdown","clickable","cellType","cell_type","data_type","isResizable","primaryColumnKey","find","onSelectionChanged","getSelection","onItemInvoked","onRenderItemColumn","toLocaleString","computeHeight","topToolbarHeight","rowHeight","footerHeight","DataTable","constrainMode","unconstrained","layoutMode","fixedColumns","selectionMode","none","selectionPreservedOnEmptyClick","setKeySelected","selectedKey","scrollbarVisibility","auto","pivot","XTabs","onLinkClick","itemKey","tabs","itemIcon","headerText","linkFormat","links","XTemplate","template","textVariants","xl","XText","visibility","menuName","XTextbox","mask","readOnly","readonly","multiline","fieldGroup","prefix","suffix","password","XToggle","onText","offText","inlineLabel","XVegaVisualization","spec","specification","vegaEmbed","mode","defaultStyle","renderer","config","autosize","resize","discreteWidth","discreteHeight","continuousWidth","continuousHeight","catch","XComponentAlignment","defaults","vertical","horizontalLeft","horizontalRight","XComponents","alignment","components","Left","Right","XInline","XComponent","text_xl","text_l","text_m","text_s","text_xs","message_bar","textbox","checkbox","toggle","choice_group","dropdown","checklist","combobox","slider","spinbox","date_picker","color_picker","file_upload","expander","markup","picker","range_slider","stepper","visualization","vega_visualization","closable","blocking","dialogContentProps","largeHeader","lastComponent","pop","modalProps","isBlocking","showNotification","notificationText","Notification","permission","requestPermission","layoutsB","preload","refresh","notification","redirect","layouts","dialog","iconLink","querySelector","touchIconLink","async","appendChild","dataLayer","arguments","setupTracker","presetBreakpoints","breakpointsB","layoutB","resizedB","parseBreakpoint","badSlot","order","parseBoxes","specs","zone","parseBox","bps","nextLayout","breakpoint","mq","matchMedia","listener","matches","bp","addListener","removeListener","flex","alignments","baseline","stretch","wrappings","toSectionStyle","direction","wrap","flexWrap","toSlotStyle","findSection","section","sections","FlexSection","cardslots","cardslot","FlexLayout","layoutIndex","toSection","zones","min_height","max_height","sortCardsInSection","PageLayout","metaCard","onMetaCardChanged","segregate","metas","app","centerFullHeight","freeOverlay","busyOverlay","BusyOverlay","spinTimeout","spinB","busy","Spinner","SpinnerSize","large","App","contentB","onSocket","reload","onHashChanged","applyTheme","Router","routes","exact","Transparent","directions","toFlexStyle","item_view","item_props","extract","extra","nums","zip","zip3","curves","basis","cardinal","smooth","linear","natural","ret0","get0","get1","get2","renderEl","toAttributes","r1","r2","a1","a2","radial","angle","radius","y1","x1","view_box","stage","scene","stageEls","sceneEls","ths","trs","tds","XNav","collapseByDefault","collapsed","Nav","iconSize","burger","rhs","subtitle","Navigation","hideNav","Panel","isLightDismiss","PanelType","smallFixedNear","hasCloseButton","navB","showNav","nav","objectFit","alt","image","rail","ProgressBar","aux_value","captions","plot_color","value_caption","aux_value_caption","canvas","pixelSize","swatches","borderTop","pixel","brush","pixels","odd","floor","defaultColorAt","paint","form","MicroArea","zeroValue","useMemo","minY","maxY","scaleX","domain","range","scaleY","fcurve","ln","defined","ar","strokeLinejoin","strokeLinecap","strokeWidth","MicroBars","category","paddingInner","rects","plot_type","plot_data","plot_category","plot_value","plot_zero_value","plot_curve","auxValue","listName","itemName","value_color","borderSpacing","tbody","thead","whiteSpace","header","tableName","rowName","PivotLinkFormat","PivotItem","Pivot","value_overlay","overflowProps","ariaLabel","toCommands","toCommand","iconOnly","overflow_items","secondary_items","overflowCommands","farCommands","CommandBar","overflowItems","overflowButtonProps","farItems","hostname","loadTheme","defaultFontStyle","initializeIcons","ReactDOM","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.60c87179.chunk.js","sourcesContent":["// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CompoundButton } from '@fluentui/react'\n\nconst\n  css = stylesheet({\n    login: {\n      width: '100%',\n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column',\n    },\n  })\n\nconst\n  Login = () => {\n    const\n      queryString = window.location.search,\n      action = `/_auth/init${queryString}`\n    return (\n      <div className={css.login}>\n        <form action={action} method=\"POST\">\n          <CompoundButton type=\"default\" secondaryText=\"using OpenID Connect.\">\n            Log In\n          </CompoundButton>\n        </form>\n      </div>\n    )\n  }\n\nexport default Login\n","import { Rec, S } from './qd'\n\n/**\n * Configure user interaction tracking (analytics) for a page.\n */\nexport interface Tracker {\n  /** The tracking provider. Supported providers are `ga` (Google Analytics) and `gtag` (Google Global Site Tags or gtag.js) */\n  type: 'ga' | 'gtag'\n  /** The tracking ID or measurement ID. */\n  id: S\n}\n\nlet\n  tracker: Tracker | null = null\n\nconst\n  sanitize = (args: Rec): Rec => {\n    const r: Rec = {}\n\n    for (const k in args) {\n      const v = args[k]\n      // Don't send actual values; only that certain elements were possibly interacted with.\n      if (v) r[k] = k === '#' ? v : true\n    }\n\n    return r\n  },\n  sendEvent = (args: Rec) => {\n    if (!tracker) return\n    switch (tracker.type) {\n      case 'ga':\n      case 'gtag':\n        {\n          const w = window as any\n          if (w.gtag) w.gtag('event', 'sync', sanitize(args))\n        }\n    }\n  }\n\nexport const\n  setupTracker = (t: Tracker) => {\n    if (tracker) return  // Setup only once for the lifetime of the page\n\n    switch (t.type) {\n      case 'ga':\n      case 'gtag':\n        {\n          const s = document.createElement('script')\n          s.type = 'text/javascript'\n          s.async = true\n          s.src = `https://www.googletagmanager.com/gtag/js?id=${t.id}`\n          document.body.appendChild(s)\n          s.addEventListener('load', () => {\n            const w = window as any\n            w.dataLayer = w.dataLayer || []\n            // eslint-disable-next-line prefer-rest-params\n            function gtag() { w.dataLayer.push(arguments) }\n            w.gtag = gtag\n            w.gtag('js', new Date())\n            w.gtag('config', t.id)\n          })\n        }\n        tracker = t\n    }\n  },\n  track = (args: Rec) => window.setTimeout((() => sendEvent(args)), 0)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/ban-types */\nimport * as React from 'react'\nimport { Dialog } from './dialog'\nimport { track } from './tracking'\n\n//\n// Dataflow\n// Mostly a port of H2O Flow's dataflow.coffee\n//\n\nexport type Act = () => void\nexport type Eff<T> = (t: T) => void\nexport type Eff2<A, B> = (a: A, b: B) => void\nexport type Eff3<A, B, C> = (a: A, b: B, c: C) => void\nexport type Eff4<A, B, C, D> = (a: A, b: B, c: C, d: D) => void\nexport type Func<A, B> = (a: A) => B\nexport type Func2<A, B, C> = (a: A, b: B) => C\nexport type Func3<A, B, C, D> = (a: A, b: B, c: C) => D\n\nexport interface Disposable { dispose(): void }\ninterface Arrow<T> extends Disposable { f: Eff<T> }\n\nexport interface Box<T> extends Disposable {\n  (): T\n  (value: T): T\n}\ninterface Boxed<T> extends Box<T> {\n  __boxed__: boolean // marker\n  on(f: Eff<T>, o?: any): Arrow<T>\n  touch(): void\n}\n\ntype Equal<T> = (a: T, b: T) => boolean\nfunction different<T>(_a: T, _b: T) { return false }\nexport function box<T>(value?: T, equal?: Equal<T>): Box<T>;\nexport function box<T>(...args: any[]): Box<T> {\n  let\n    x: T = (args.length > 0 ? args[0] : undefined) as T\n  const\n    equal = args.length > 0 ? (args.length > 1 ? args[1] : null) : different,\n    arrows: Arrow<T>[] = [],\n    on = (f: Eff<T>): Arrow<T> => {\n      const a: Arrow<T> = { f, dispose: () => remove(arrows, a) }\n      arrows.push(a)\n      return a\n    },\n    dispose = (): void => { arrows.length = 0 },\n    broadcast = (t: T): void => { for (const a of arrows) a.f(t) },\n    touch = (): void => broadcast(x),\n    f = (...ys: T[]): T => {\n      if (ys.length) { // f(x) invoked\n        const y = ys[0]\n        if (!(equal ? equal(x, y) : (x === y))) broadcast(x = y) // store and broadcast new value if changed\n      } // else f() invoked\n      return x\n    }\n\n  f.on = on\n  f.touch = touch\n  f.dispose = dispose\n  f.__boxed__ = true\n\n  return f as Box<T>\n}\n\nexport function boxed<T>(x: any): x is Box<T> { return x && x.__boxed__ === true }\nexport function unbox<T>(x: T | Box<T>): T { return boxed(x) ? x() : x }\nexport function rebox<T>(b: Box<T>, f: Eff<T>) { const x = b(); f(x); (b as Boxed<T>).touch() }\n\nexport function on<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function on<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function on<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function on<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function on(...args: any[]): Disposable { return react(false, args.slice(0, args.length - 1), args[args.length - 1]) }\n\nexport function to<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function to<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function to<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function to<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function to(...args: any[]): Disposable { return react(true, args.slice(0, args.length - 1), args[args.length - 1]) }\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function react(immediate: boolean, boxen: Box<any>[], f: Function): Disposable {\n  const\n    xs = boxen as Boxed<any>[],\n    emit = () => f(...xs.map(x => x())),\n    arrows = xs.map(x => x.on(emit)),\n    dispose = () => arrows.forEach(a => a.dispose())\n\n  if (immediate) emit()\n  return { dispose }\n}\n\nexport function by<A, B>(a: Box<A>, map: Func<A, B>): Box<B>\nexport function by<A, B, C>(a: Box<A>, b: Box<B>, zip: Func2<A, B, C>): Box<B>\nexport function by<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, zip: Func3<A, B, C, D>): Box<B>\nexport function by(...args: any[]): any {\n  if (args.length < 2) throw new Error(`invalid number of args: want 2 or more, got ${args.length}`)\n  const\n    m = args.length - 1,\n    xs = args.slice(0, m) as Boxed<any>[],\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    f = args[m] as Function,\n    yB = box(f(...xs.map(x => x())))\n\n  xs.forEach(x => x.on(_ => yB(f(...xs.map(x => x())))))\n  return yB\n}\n\nexport function watch<T>(x: Box<T>, label?: string): Disposable {\n  // eslint-disable-next-line no-console\n  return on(x, label ? ((x: T) => console.log(label, x)) : ((x: T) => console.log(x)))\n}\n\nfunction remove<T>(xs: T[], x: T): void { const i = xs.indexOf(x); if (i > -1) xs.splice(i, 1) }\n\n//\n// React Component + Dataflow\n//\n\ninterface Renderable {\n  render(): JSX.Element\n  init?(): void\n  update?(): void\n  dispose?(): void\n}\n\nexport function bond<TProps, TState extends Renderable>(ctor: (props: TProps) => TState) {\n  return class extends React.Component<TProps> {\n    private readonly model: TState\n    private readonly arrows: Disposable[]\n    constructor(props: TProps) {\n      super(props)\n\n      const\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        self = this,\n        model = ctor(props),\n        arrows: Disposable[] = []\n\n      Object.keys(model).forEach(k => {\n        if (k === 'render' || k === 'dispose' || k === 'init' || k === 'update') return\n        const v = (model as any)[k]\n        if (boxed(v)) arrows.push(on(v, _ => self.setState({})))\n      })\n\n      this.model = model\n      this.arrows = arrows\n      this.state = {}\n    }\n    componentDidMount() {\n      if (this.model.init) this.model.init()\n    }\n    componentDidUpdate() {\n      if (this.model.update) this.model.update()\n    }\n    componentWillUnmount() {\n      if (this.model.dispose) this.model.dispose()\n      for (const a of this.arrows) a.dispose()\n    }\n    render() {\n      return this.model.render()\n    }\n  }\n}\n\n//\n// Sync\n//\n\nexport type B = boolean\nexport type U = number\nexport type I = number\nexport type F = number\nexport type S = string\nexport type D = Date\nexport type V = F | S | D\nexport type Prim = S | F | B | null // primitive\nexport interface Size { width: U, height: U }\nexport interface Rect extends Size { left: U, top: U }\n\nexport interface Dict<T> { [key: string]: T } // generic object\n\nexport type Id = S // Identifier or non-empty string (marker type)\nexport type Rec = Dict<Prim | Prim[]> // Record; named \"Rec\" to distinguish from Typescript's Record<K,T> utility type.\nexport type Recs = Rec[]\nexport type Packed<T> = T | S\n\nexport interface Data {\n  list(): (Rec | null)[]\n}\n\ninterface OpsD {\n  p?: PageD // init\n  d?: OpD[] // deltas\n  e?: S // error\n  r?: U // reset\n}\ninterface OpD {\n  k?: S\n  v?: any\n  c?: CycBufD\n  f?: FixBufD\n  m?: MapBufD\n  d?: Dict<Datum>\n  b?: BufD[]\n}\ntype Tup = any[]\ninterface PageD {\n  c: Dict<CardD>\n}\ntype Datum = S | F | B | Dict<any> | any[] | BufD\ninterface CardD {\n  d: Dict<Datum>\n  b?: BufD[]\n}\ninterface BufD {\n  c: CycBufD\n  f: FixBufD\n  m: MapBufD\n}\ninterface MapBufD {\n  f: S[]\n  d: Dict<Tup>\n}\ninterface FixBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n}\ninterface CycBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n  i: U\n}\n\nexport interface Page {\n  key: S\n  changed: Box<B>\n  add(k: S, c: C): void\n  get(k: S): C | undefined\n  set(k: S, v: any): void\n  list(): C[]\n  drop(k: S): void\n  sync(): void\n}\n\ninterface Cur {\n  __cur__: true\n  get(f: S): any\n  set(f: S, v: any): void\n}\ninterface Buf {\n  put(xs: any): void\n  set(k: S, v: any): void\n  get(k: S): Cur | null\n}\nexport interface Card<T> {\n  name: S\n  state: T\n  changed: Box<B>\n}\nexport interface C extends Card<Dict<any>> {\n  id: S\n  set(ks: S[], v: any): void\n}\ninterface Typ {\n  readonly f: S[] // fields\n  readonly m: Dict<U> // offsets\n  match(x: any): Tup | null\n  make(t: Tup): Rec\n}\n\ninterface DataBuf extends Data, Buf {\n  __buf__: true\n}\ninterface FixBuf extends DataBuf {\n  n: U\n  seti(i: U, v: any): void\n  geti(i: U): Cur | null\n}\ntype CycBuf = DataBuf\ntype MapBuf = DataBuf\n\nlet guid = 0\nexport const\n  xid = () => `x${++guid}`,\n  parseI = (s: S): I => {\n    if (!/^-{0,1}\\d+$/.test(s)) return NaN\n    return parseInt(s, 10)\n  },\n  parseU = (s: S): U => {\n    const i = parseI(s)\n    return isNaN(i) || i < 0 ? NaN : i\n  },\n  dict = <T extends {}>(kvs: [S, T][]): Dict<T> => {\n    const d: Dict<T> = {}\n    for (const [k, v] of kvs) d[k] = v\n    return d\n  },\n  unpack = <T extends {}>(data: any): T =>\n    (typeof data === 'string')\n      ? decodeString(data)\n      : (isData(data))\n        ? data.list()\n        : data,\n  iff = (x: S) => x && x.length ? x : undefined,\n  debounce = (timeout: U, f: (e: any) => void) => {\n    let t: number | null = null\n    return (e: any) => {\n      if (t) window.clearTimeout(t)\n      t = window.setTimeout(() => (f(e), t = null), timeout)\n    }\n  }\n\nconst\n  decodeType = (d: S): [S, S] => {\n    const i = d.indexOf(':')\n    return (i > 0) ? [d.substring(0, i), d.substring(i + 1)] : ['', d]\n  },\n  decodeString = (data: S): any => {\n    if (data === '') return data\n    const [t, d] = decodeType(data)\n    switch (t) {\n      case 'data':\n        try {\n          return JSON.parse(d)\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'rows':\n        try {\n          const [fields, rows] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(rows)) return data\n          const w = fields.length // width\n          const recs: Rec[] = []\n          for (const r of rows) {\n            if (!Array.isArray(r)) continue\n            if (r.length !== w) continue\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = r[j]\n              rec[f] = v\n            }\n            recs.push(rec)\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'cols':\n        try {\n          const [fields, columns] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(columns)) return data\n          const w = fields.length // width\n          if (columns.length !== w) return data\n          if (columns.length === 0) return data\n          const n = columns[0].length\n          const recs = new Array<Rec>(n)\n          for (let i = 0; i < n; i++) {\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = columns[j][i]\n              rec[f] = v\n            }\n            recs[i] = rec\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n    }\n    return data\n  }\n\nconst\n  keysOf = <T extends {}>(d: Dict<T>): S[] => {\n    const a: S[] = []\n    for (const k in d) a.push(k)\n    return a\n  },\n  valuesOf = <T extends {}>(d: Dict<T>): T[] => {\n    const a: T[] = []\n    for (const k in d) a.push(d[k])\n    return a\n\n  },\n  isMap = (x: any): B => {\n    // for JSON data only: anything not null, string, number, bool, array\n    if (x === null || x === undefined) return false\n    switch (typeof x) {\n      case 'number':\n      case 'string':\n      case 'boolean':\n        return false\n      default:\n        if (Array.isArray(x)) return false\n    }\n    return true\n  },\n  isBuf = (x: any): x is Buf => x != null && x.__buf__ === true,\n  isData = (x: any): x is Data => isBuf(x),\n  isCur = (x: any): x is Cur => x != null && x.__cur__ === true,\n  reverseIndex = (xs: S[]): Dict<U> => {\n    const m: Dict<U> = {}\n    for (let i = 0, n = xs.length; i < n; i++) m[xs[i]] = i\n    return m\n  },\n  newType = (fields: S[]): Typ => {\n    const\n      n = fields.length,\n      m = reverseIndex(fields),\n      match = (x: any): Tup | null => {\n        if (Array.isArray(x) && x.length === n) return x\n        return null\n      },\n      make = (tup: Tup): Rec => {\n        const r: Rec = {}\n        for (let i = 0; i < n; i++) r[fields[i]] = tup[i]\n        return r\n      }\n    return { f: fields, m, match, make }\n  },\n  newCur = (t: Typ, tup: Tup): Cur => {\n    const\n      get = (f: S): any => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) return tup[i]\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) return tup[i]\n        }\n        return null\n      },\n      set = (f: S, v: any) => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) tup[i] = v\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) tup[i] = v\n        }\n      }\n    return { __cur__: true, get, set }\n  },\n  newFixBuf = (t: Typ, tups: (Tup | null)[]): FixBuf => {\n    const\n      n = tups.length,\n      put = (xs: any) => {\n        if (Array.isArray(xs) && xs.length === n) for (let i = 0; i < n; i++) seti(i, xs[i])\n      },\n      set = (k: S, v: any) => {\n        const i = parseI(k)\n        if (!isNaN(i)) seti(i, v)\n      },\n      seti = (i: U, v: any) => {\n        if (i >= 0 && i < n) {\n          if (v === null) {\n            tups[i] = null\n          } else {\n            const tup = t.match(v)\n            if (tup) tups[i] = tup\n          }\n        }\n      },\n      get = (k: S): Cur | null => {\n        const i = parseI(k)\n        if (!isNaN(i)) return geti(i)\n        return null\n      },\n      geti = (i: U): Cur | null => {\n        if (i >= 0 && i < n) {\n          const tup = tups[i]\n          if (tup) return newCur(t, tup)\n        }\n        return null\n      },\n      list = (): (Rec | null)[] => {\n        const xs: (Rec | null)[] = []\n        for (const tup of tups) xs.push(tup ? t.make(tup) : null)\n        return xs\n      }\n    return { __buf__: true, n, put, set, seti, get, geti, list }\n  },\n  newCycBuf = (t: Typ, tups: (Tup | null)[], i: U): CycBuf => {\n    const\n      n = tups.length,\n      b = newFixBuf(t, tups),\n      cur = \"\",\n      put = (xs: any) => {\n        if (Array.isArray(xs)) for (const x of xs) set(cur, x)\n      },\n      set = (_k: S, v: any) => {\n        b.seti(i, v)\n        i++\n        if (i >= n) i = 0\n      },\n      get = (_k: S): Cur | null => {\n        return b.geti(i)\n      },\n      list = (): Rec[] => {\n        const xs: Rec[] = []\n        for (let j = i, k = 0; k < n; j++, k++) {\n          if (j >= n) j = 0\n          const tup = tups[j]\n          if (tup) xs.push(t.make(tup))\n        }\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newMapBuf = (t: Typ, tups: Dict<Tup>): MapBuf => {\n    const\n      put = (xs: any) => {\n        const ts: Dict<Tup> = {}\n        for (const k in xs) {\n          const x = xs[k], tup = t.match(x)\n          if (tup) ts[k] = tup\n        }\n        tups = ts\n      },\n      set = (k: S, v: any) => {\n        if (v === null) {\n          delete tups[k]\n        } else {\n          const tup = t.match(v)\n          if (tup) tups[k] = tup\n        }\n      },\n      get = (k: S): Cur | null => {\n        const tup = tups[k]\n        return tup ? newCur(t, tup) : null\n      },\n      list = (): Rec[] => {\n        const keys = keysOf(tups)\n        keys.sort()\n        const xs: Rec[] = []\n        for (const k of keys) xs.push(t.make(tups[k]))\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newTups = (n: U) => {\n    const xs = new Array<Tup | null>(n)\n    for (let i = 0; i < n; i++) xs[i] = null\n    return xs\n  },\n  loadCycBuf = (b: CycBufD): CycBuf => {\n    const t = newType(b.f)\n    return b.d && b.d.length\n      ? newCycBuf(t, b.d, b.i)\n      : newCycBuf(t, newTups(b.n <= 0 ? 10 : b.n), 0)\n  },\n  loadFixBuf = (b: FixBufD): FixBuf => {\n    const t = newType(b.f)\n    return newFixBuf(t, b.d && b.d.length ? b.d : newTups(b.n <= 0 ? 10 : b.n))\n  },\n  loadMapBuf = (b: MapBufD): MapBuf => {\n    const t = newType(b.f)\n    return newMapBuf(t, b.d || {})\n  },\n  loadBuf = (b: BufD): DataBuf | null => {\n    if (b.c) return loadCycBuf(b.c)\n    if (b.f) return loadFixBuf(b.f)\n    if (b.m) return loadMapBuf(b.m)\n    return null\n  },\n  loadCard = (key: S, c: CardD): C => {\n    const\n      data: Dict<any> = {},\n      changedB = box<B>(),\n      ctor = (c: CardD) => {\n        const { d, b } = c\n        for (let k in d) {\n          let v = d[k]\n          if (b && k.length > 0 && k[0] === '~') {\n            const buf = loadBuf(b[v as U])\n            if (buf) {\n              k = k.substr(1)\n              v = buf\n            }\n          }\n          set([k], v)\n        }\n      },\n      set = (ks: S[], v: any) => {\n        switch (ks.length) {\n          case 0:\n            return\n          case 1:\n            {\n              const p = ks[0], b = data[p]\n              if (b && isBuf(b)) {\n                b.put(v)\n                return\n              }\n              if (v == null) delete data[p]; else data[p] = v\n              return\n            }\n          default:\n            {\n              let x: any = data\n              const p = ks[ks.length - 1]\n              for (const k of ks.slice(0, ks.length - 1)) x = gget(x, k)\n              gset(x, p, v)\n              return\n            }\n        }\n      }\n    ctor(c)\n    return { id: xid(), name: key, state: data, changed: changedB, set }\n  },\n  gset = (x: any, k: S, v: any) => {\n    if (x == null) return\n    if (isBuf(x)) x.set(k, v)\n    else if (isCur(x)) x.set(k, v)\n    else if (isMap(x)) {\n      if (v == null) delete x[k]; else x[k] = v\n    } else if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) x[i] = v\n    }\n  },\n  gget = (x: any, k: S): any => {\n    if (x == null) return null\n    if (isBuf(x)) return x.get(k)\n    if (isCur(x)) return x.get(k)\n    if (isMap(x)) return x[k]\n    if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) return x[i]\n    }\n    return null\n  },\n  newPage = (): Page => {\n    let dirty = false, dirties: Dict<B> = {}\n\n    const\n      key = xid(),\n      cards: Dict<C> = {},\n      changedB = box<B>(),\n      add = (k: S, card: C) => {\n        cards[k] = card\n        dirty = true\n      },\n      get = (k: S): C | undefined => cards[k],\n      list = (): C[] => valuesOf(cards),\n      drop = (k: S) => delete cards[k],\n      set = (k: S, v: any) => {\n        const ks = k.split(/\\s+/g)\n        if (ks.length === 1) {\n          delete cards[k]\n          dirty = true\n          return\n        }\n        const c = cards[ks[0]]\n        if (c) {\n          c.set(ks.slice(1), v)\n          dirties[ks[0]] = true\n        }\n      },\n      sync = () => {\n        if (dirty) {\n          changedB(true)\n        } else {\n          for (const k in dirties) {\n            const c = cards[k]\n            if (c) c.changed(true)\n          }\n        }\n        dirty = false // reset\n        dirties = {} // reset\n      }\n\n    return { key, changed: changedB, add, get, set, list, drop, sync }\n  },\n  load = ({ c }: PageD): Page => {\n    const page = newPage()\n    for (const k in c) page.add(k, loadCard(k, c[k]))\n    return page\n  },\n  exec = (page: Page, ops: OpD[]): Page | null => {\n    for (const op of ops) {\n      if (op.k && op.k.length > 0) {\n        if (op.c) {\n          page.set(op.k, loadCycBuf(op.c))\n        } else if (op.f) {\n          page.set(op.k, loadFixBuf(op.f))\n        } else if (op.m) {\n          page.set(op.k, loadMapBuf(op.m))\n        } else if (op.d) {\n          page.add(op.k, loadCard(op.k, { d: op.d, b: op.b || [] }))\n        } else {\n          page.set(op.k, op.v)\n        }\n      } else { // drop page\n        page = newPage()\n      }\n    }\n    if (page) page.sync()\n    return page\n  }\n\n//\n// In-browser API\n//\n\nexport interface PageRef {\n  get(key: S): Ref\n  set(key: S, value: any): void\n  del(key: S): void\n  drop(): void\n  sync(): void\n}\n\nexport interface Ref {\n  get(key: S): Ref\n  set(key: S, value: any): void\n}\n\nexport interface Qd {\n  readonly path: S\n  readonly args: Rec\n  readonly events: Dict<any>\n  readonly refreshRateB: Box<U>\n  readonly busyB: Box<B>\n  theme: Box<S>\n  socket: WebSocket | null\n  dialogB: Box<Dialog | null>\n  page(): PageRef\n  sync(): void\n  jump(key: any, value: any): void\n}\n\nconst\n  keyseq = (...keys: S[]): S => keys.join(' '),\n  clearRec = (a: Rec) => {\n    for (const k in a) delete a[k]\n  }\n\nexport const qd: Qd = {\n  path: window.location.pathname,\n  args: {},\n  events: {},\n  refreshRateB: box(-1),\n  busyB: box(false),\n  socket: null,\n  dialogB: box(null),\n  theme: box('light'),\n  page: (path?: S): PageRef => {\n    path = path || qd.path\n    const\n      changes: OpD[] = [],\n      ref = (k: S): Ref => {\n        const\n          get = (key: S): Ref => ref(`${k}.${key}`),\n          set = (key: S, value: any) => changes.push({ k: keyseq(k, key), v: value })\n        return { get, set }\n      },\n      get = (key: S) => ref(key),\n      set = (key: S, value: any) => changes.push({ k: keyseq(key), v: value }),\n      del = (key: S) => changes.push({ k: key }),\n      drop = () => changes.push({}),\n      sync = () => {\n        const sock = qd.socket\n        if (!sock) return\n        const opsd: OpsD = { d: changes }\n        sock.send(`* ${path} ${JSON.stringify(opsd)}`)\n      }\n    return { get, set, del, drop, sync }\n  },\n  sync: () => {\n    const sock = qd.socket\n    if (!sock) return\n    const args: Dict<any> = { ...qd.args }\n    clearRec(qd.args)\n    if (Object.keys(qd.events).length) {\n      args[''] = { ...qd.events }\n      clearRec(qd.events)\n    }\n    sock.send(`@ ${qd.path} ${JSON.stringify(args)}`)\n    track(args)\n    qd.busyB(true)\n  },\n  jump: (key: any, value: any) => {\n    if (value.startsWith('#')) {\n      window.location.hash = value.substr(1)\n      return\n    }\n    if (key) {\n      qd.args[key] = value\n    } else {\n      qd.args[value] = true\n    }\n    qd.sync()\n  },\n}\n\non(qd.refreshRateB, r => {\n  // If we receive a change in refresh rate once the page has been loaded, close the socket.\n  // The socket onclose handler will reconnect using the refresh rate if necessary.\n  if (r < 0) return\n  const sock = qd.socket\n  if (sock) sock.close()\n})\n\nexport enum SockEventType { Message, Data, Reset }\nexport type SockEvent = SockMessage | SockData | SockReload\nexport interface SockData { t: SockEventType.Data, page: Page }\nexport enum SockMessageType { Info, Warn, Err }\nexport interface SockMessage { t: SockEventType.Message, type: SockMessageType, message: S }\nexport interface SockReload { t: SockEventType.Reset }\ntype SockHandler = (e: SockEvent) => void\n\nlet backoff = 1, currentPage: Page | null = null\nconst\n  toSocketAddress = (path: S): S => {\n    const\n      l = window.location,\n      p = l.protocol === 'https:' ? 'wss' : 'ws'\n    return p + \"://\" + l.host + path\n  },\n  reconnect = (address: S, handle: SockHandler) => {\n    const retry = () => reconnect(address, handle)\n    const sock = new WebSocket(address)\n    sock.onopen = function () {\n      qd.socket = sock\n      handle({ t: SockEventType.Message, type: SockMessageType.Info, message: 'Connected' })\n      backoff = 1\n      const hash = window.location.hash\n      sock.send(`+ ${qd.path} ${hash.charAt(0) === '#' ? hash.substr(1) : hash}`) // protocol: t<sep>addr<sep>data\n    }\n    sock.onclose = function () {\n      const refreshRate = qd.refreshRateB()\n      if (refreshRate === 0) return\n\n      // TODO handle refreshRate > 0 case\n\n      qd.socket = null\n      backoff *= 2\n      if (backoff > 16) backoff = 16\n      handle({ t: SockEventType.Message, type: SockMessageType.Warn, message: `Disconneced. Reconnecting in ${backoff} seconds...` })\n      window.setTimeout(retry, backoff * 1000)\n    }\n    sock.onmessage = function (e) {\n      if (!e.data) return\n      if (!e.data.length) return\n      qd.busyB(false)\n      for (const line of e.data.split('\\n')) {\n        try {\n          const msg = JSON.parse(line) as OpsD\n          if (msg.d) {\n            const page = exec(currentPage || newPage(), msg.d)\n            if (currentPage !== page) {\n              currentPage = page\n              if (page) handle({ t: SockEventType.Data, page: page })\n            }\n          } else if (msg.p) {\n            currentPage = load(msg.p)\n            handle({ t: SockEventType.Data, page: currentPage })\n          } else if (msg.e) {\n            handle({ t: SockEventType.Message, type: SockMessageType.Err, message: msg.e })\n          } else if (msg.r) {\n            handle({ t: SockEventType.Reset })\n          }\n        } catch (err) {\n          console.error(err)\n          handle({ t: SockEventType.Message, type: SockMessageType.Err, message: `Error: ${err}` })\n        }\n      }\n    }\n    sock.onerror = function (e: Event) {\n      qd.busyB(false)\n      console.error('A websocket error was encountered.', e) // XXX\n    }\n  }\n\nexport const connect = (path: S, handle: SockHandler) => reconnect(toSocketAddress(path), handle)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from \"@fluentui/react\"\nimport { F, I, S, U, qd } from \"./qd\"\n\ninterface Palette {\n  text: S\n  card: S\n  page: S\n}\n\nexport const\n  px = (x: I) => `${x}px`,\n  pc = (x: F) => `${x}%`,\n  rem = (x: F) => `${x}rem`,\n  clas = (...names: S[]) => names.join(' '),\n  border = (thickness: U, color: S) => `${thickness}px solid ${color}`,\n  dashed = (thickness: U, color: S) => `${thickness}px dashed ${color}`,\n  padding = (...t: I[]) => t.map(px).join(' '),\n  margin = padding,\n  centerMixin = () => ({ display: 'flex', alignItems: 'center', justifyContent: 'center' }),\n  displayMixin = (visible = true): React.CSSProperties => visible ? {} : { display: 'none' },\n  // if color starts with $, treat  it like a css var, otherwise treat it like a regular color.\n  cssVar = (color = '$gray') => color.startsWith('$') ? `var(--${color.substr(1)}, var(--gray))` : color,\n  cssVarValue = (prop: S) => {\n    if (!prop.startsWith('$')) return prop\n    prop = prop.substring(1)\n    return getComputedStyle(document.documentElement).getPropertyValue(`--${prop}`).trim()\n  },\n  fluentPalettes: { [id: string]: Partial<Fluent.IPalette> } = {\n    light: {\n      themePrimary: '#000000',\n      themeLighterAlt: '#898989',\n      themeLighter: '#737373',\n      themeLight: '#595959',\n      themeTertiary: '#373737',\n      themeSecondary: '#2f2f2f',\n      themeDarkAlt: '#252525',\n      themeDark: '#151515',\n      themeDarker: '#0b0b0b',\n      neutralLighterAlt: '#faf9f8',\n      neutralLighter: '#f3f2f1',\n      neutralLight: '#edebe9',\n      neutralQuaternaryAlt: '#e1dfdd',\n      neutralQuaternary: '#d0d0d0',\n      neutralTertiaryAlt: '#c8c6c4',\n      neutralTertiary: '#a19f9d',\n      neutralSecondary: '#605e5c',\n      neutralPrimaryAlt: '#3b3a39',\n      neutralPrimary: '#323130',\n      neutralDark: '#201f1e',\n      black: '#000000',\n      white: '#ffffff',\n    },\n    neon: {\n      themePrimary: '#cddc39',\n      themeLighterAlt: '#080902',\n      themeLighter: '#202309',\n      themeLight: '#3d4211',\n      themeTertiary: '#7a8422',\n      themeSecondary: '#b3c132',\n      themeDarkAlt: '#d0df4a',\n      themeDark: '#d7e464',\n      themeDarker: '#e1eb8a',\n      neutralLighterAlt: '#1a1c1e',\n      neutralLighter: '#191b1d',\n      neutralLight: '#181a1c',\n      neutralQuaternaryAlt: '#17181a',\n      neutralQuaternary: '#161719',\n      neutralTertiaryAlt: '#151618',\n      neutralTertiary: '#c8c8c8',\n      neutralSecondary: '#d0d0d0',\n      neutralPrimaryAlt: '#dadada',\n      neutralPrimary: '#ffffff',\n      neutralDark: '#f4f4f4',\n      black: '#f8f8f8',\n      white: '#1b1d1f',\n    },\n    dark: {\n      // TODO: Generate dark fluent color palette.\n    }\n  }\n\nconst\n  palettes: { [id: string]: Palette } = {\n    light: {\n      text: '#323130',\n      card: '#ffffff',\n      page: '#f5f5f5',\n    },\n    dark: {\n      text: '#ffffff',\n      card: '#21252b',\n      page: '#282c34',\n    },\n    neon: {\n      text: '#ffffff',\n      card: '#0d0e0f',\n      page: '#1b1d1f',\n    },\n  },\n  rgb = (hex: S): [U, U, U] => {\n    const x = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return x ? [parseInt(x[1], 16), parseInt(x[2], 16), parseInt(x[3], 16)] : [0, 0, 0]\n  }\n\nexport const\n  changeTheme = (name: S) => {\n    const palette = palettes[name]\n    const fluentPalette = fluentPalettes[name]\n    // TODO: Resolve the any.\n    Object.keys(palette).forEach(k => document.body.style.setProperty(`--${k}`, (palette as any)[k]))\n    Object.keys(fluentPalette).forEach(k => document.body.style.setProperty(`--${k}`, (fluentPalette as any)[k]))\n\n    // Update text tones.\n    if (palette.text) {\n      const [r, g, b] = rgb(palette.text)\n      let alpha = 0.05\n      for (let i = 0; i < 10; i++) {\n        document.body.style.setProperty(`--text${i}`, `rgba(${r},${g},${b},${alpha})`)\n        alpha += i === 0 ? 0.05 : 0.1\n      }\n    }\n\n    // Change global Fluent theme.\n    Fluent.loadTheme({ palette: fluentPalettes[name] })\n    qd.theme(name)\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ContextualMenu, Icon, IContextualMenuItem } from '@fluentui/react'\nimport * as React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Command } from './toolbar'\nimport { bond, box, qd, Box, B, S } from './qd'\n\nconst\n  css = stylesheet({\n    menu: {\n      position: 'absolute',\n      top: 0, right: 0,\n      $nest: {\n        '>div:first-child': {\n          width: 32, height: 32,\n          padding: 8,\n        },\n      },\n    },\n    icon: {\n      userSelect: 'none',\n    },\n    target: {\n      boxSizing: 'border-box',\n      cursor: 'pointer',\n      opacity: 0.5,\n      $nest: {\n        '&:hover': {\n          opacity: 1,\n        },\n      },\n    }\n  })\n\nconst\n  toContextMenuItem = (c: Command): IContextualMenuItem => {\n    const\n      onClick = () => {\n        if (c.name.startsWith('#')) {\n          window.location.hash = c.name.substr(1)\n          return\n        }\n        qd.args[c.name] = c.value ?? c.data ?? true\n        qd.sync()\n      }\n    return {\n      key: c.name,\n      text: c.label || c.name || 'Untitled',\n      iconProps: c.icon ? { iconName: c.icon } : undefined,\n      title: c.caption || undefined,\n      subMenuProps: c.items ? { items: c.items.map(toContextMenuItem) } : undefined,\n      onClick,\n    }\n  }\n\nexport const\n  CardMenu = bond(({ commands, name, changedB }: { commands: Command[], name?: S, changedB?: Box<B> }) => {\n    const\n      target = React.createRef<HTMLDivElement>(),\n      hiddenB = box(true),\n      show = () => hiddenB(false),\n      hide = () => hiddenB(true),\n      render = () => {\n        const\n          hidden = hiddenB(),\n          items = commands.map(toContextMenuItem)\n        return (\n          <div className={css.menu} data-test={name}>\n            <div className={css.target} ref={target} onClick={show}>\n              <Icon className={css.icon} iconName='MoreVertical' />\n            </div>\n            <ContextualMenu target={target} items={items} hidden={hidden} onItemClick={hide} onDismiss={hide} />\n          </div>\n        )\n      }\n    return { render, changedB, hiddenB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport Handlebars from 'handlebars'\nimport { createIntl, createIntlCache } from 'react-intl'\nimport { B, S } from './qd'\n\nconst intlCache = createIntlCache() // prevents memory leaks per docs\nexport const intl = createIntl({\n  locale: navigator.language,\n  messages: {},\n  // Since we generate format messages on the fly, ignore all errors.\n  // The intl lib requires messages to be initialized in advance,\n  // Otherwise, it throws console.errors for each missing id, each time format() is called.\n  // As of this implementation, there's no formal way to disable that behavior.\n  onError: () => { /* noop */ },\n}, intlCache)\n\nconst\n  snakeToCamel = (s: S): S => s.replace(/(_\\w)/g, m => m[1].toUpperCase()),\n  kvToOpts = (a: any): any => {\n    const b: any = {}\n    for (const k in a) {\n      const v = a[k]\n      b[snakeToCamel(k)] =\n        (v === 'true')\n          ? true\n          : v === 'false'\n            ? false\n            : /^\\d+$/.test(v)\n              ? parseInt(v, 10)\n              : v\n    }\n    return b\n  },\n  isBareExpr = (s: S): B => /^\\w+$/.test(s)\n\nHandlebars.registerHelper('intl', (v: any, { hash: opts }: any) => {\n  opts = kvToOpts(opts)\n  const t = opts.type\n  return t === 'date'\n    ? intl.formatDate(v, opts)\n    : t === 'time'\n      ? intl.formatTime(v, opts)\n      : t === 'number' || typeof v === 'number'\n        ? intl.formatNumber(v, opts)\n        : v\n})\n\nexport type Fmt = (datum: any, value?: any) => S\n\nexport const\n  isFormatExpr = (f: any): B => typeof f === 'string' && f.length > 1 && f.charAt(0) === '=' && f.charAt(1) !== '=',\n  parseFormat = (s: S): [S, HandlebarsTemplateDelegate<any> | undefined] | null => {\n    if (!isFormatExpr(s)) return null\n\n    // \"=foo\"\n    s = s.substr(1) // lop off leading '='\n\n    // \"foo\"\n    if (isBareExpr(s)) return [s, undefined]\n\n    // \"{{func foo-bar ...\"\n    const invocation = s.match(/\\{\\{\\s*(\\w+)\\s+(\\S+)/)\n    if (invocation) return [invocation[2], compile(s)]\n\n    // \"{{foo-bar ...\"\n    const bare = s.match(/\\{\\{\\s*(\\S+)/)\n    if (bare) return [bare[1], undefined]\n\n    return null\n  },\n  compile = (s: S): any => Handlebars.compile(s),\n  format = (s: S, data: any): S => {\n    if (isBareExpr(s)) s = '{{' + s + '}}'\n    const t = compile(s)\n    return t ? t(data) : s\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { format, isFormatExpr } from './intl'\nimport { B, box, C, Card, Dict, F, parseI, Rec, S, U, unpack, xid } from './qd'\nimport { clas, cssVar, margin } from './theme'\n\ntype Slot = {\n  left: U\n  top: U\n  width?: U\n  height?: U\n  right?: U\n  bottom?: U\n}\n\n\nexport enum CardEffect { Transparent, Normal, Raised, Flat }\n\nconst\n  newCardRegistry = () => {\n    const\n      m: Dict<{ ctor: typeof React.Component, effect: CardEffect }> = {},\n      register = (name: S, ctor: typeof React.Component, effect: CardEffect = CardEffect.Normal) => m[name] = { ctor, effect },\n      lookup = (name: S) => m[name] || m['']\n    return { register, lookup }\n  }\n\nexport const\n  cards = newCardRegistry(),\n  substitute = (formatString?: S, data?: Rec, defaultValue: any = null) => {\n    return (formatString !== undefined && formatString !== null)\n      ? isFormatExpr(formatString)\n        ? format(formatString.substr(1), data)\n        : formatString\n      : (defaultValue !== undefined && defaultValue !== null)\n        ? defaultValue\n        : null\n  },\n  Format = ({ data, defaultValue: v, format: f, className }: { data?: Rec, defaultValue?: any, format?: S, className?: S }) => {\n    const x = substitute(f, data, v)\n    if (x == null) return null\n    if (className) return <div className={className}>{x}</div>\n    return <>{x}</>\n  },\n  CardView = ({ card }: { card: Card<any> }) => {\n    const Tag = cards.lookup(card.state.view).ctor\n    return <Tag {...card} />\n  },\n  Repeat = ({ view, props, data }: { view: S | any, props: any, data: any }) => {\n    const items = unpack<Rec[]>(data).map((r, i) => {\n      const card: Card<any> = {\n        name: xid(),\n        state: { ...unpack<Rec>(props), view, data: r },\n        changed: box<B>(),\n      }\n      return <CardView key={i} card={card} />\n    })\n    return <>{items}</>\n  }\n\ntype Size = [U, U]\n\nconst\n  badPlacement: Slot = { left: 0, top: 0, width: 0, height: 0 },\n  newGrid = (uw: U, uh: U, cols: U, rows: U, gap: U) => {\n    let scale = 1\n    const\n      iw = uw - 2 * gap, // unit inner width\n      ih = uh - 2 * gap, // unit inner height\n      width = uw * cols + gap * (cols + 1),\n      height = uh * rows + gap * (rows + 1),\n      giw = width - 2 * gap,\n      gih = height - 2 * gap,\n      placeOnGrid = (x: U, y: U, w: U, h: U): Slot => {\n        const\n          slot: Slot = {\n            left: x * (uw + gap),\n            top: y * (uh + gap),\n          }\n        if (w > 0) {\n          slot.width = w * uw + (w - 1) * gap\n        } else {\n          slot.right = -(w + 1) * (uw + gap)\n        }\n        if (h > 0) {\n          slot.height = h * uh + (h - 1) * gap\n        } else {\n          slot.bottom = -(h + 1) * (uh + gap)\n        }\n        return slot\n      },\n      normalize = (s: S): S[] => {\n        const x = s.trim().split(/\\s+/g)\n        switch (x.length) {\n          case 1: return ['1', '1', s, s]\n          case 2: return ['1', '1', ...x]\n          case 3: return [...x, x[2]]\n          case 4: return x\n          default: return x.slice(0, 4)\n        }\n      },\n      place = (s: S): Slot => {\n        if (!s) return badPlacement\n        const [x, y, w, h] = normalize(s).map(parseI)\n        if (isNaN(x) || isNaN(y) || isNaN(w) || isNaN(h)) return badPlacement\n        return placeOnGrid(x - 1, y - 1, w, h)\n      },\n      getWindowSize = (): Size => ([\n        window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n        window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n      ]),\n      rescale = (): F => {\n        const [w, h] = getWindowSize()\n        scale = Math.min(w / width, h / height)\n        return scale\n      },\n      inset: React.CSSProperties = ({ position: 'absolute', left: gap, top: gap, right: gap, bottom: gap, overflow: 'auto' })\n    return {\n      width, height,\n      innerWidth: giw, innerHeight: gih,\n      unitWidth: uw, unitHeight: uh,\n      unitInnerWidth: iw, unitInnerHeight: ih,\n      gap, place, scale, rescale, inset,\n    }\n  }\n\nexport const\n  grid = newGrid(134, 76, 12, 10, 15) // approx 1800x930\n\nconst\n  css = stylesheet({\n    grid: {\n      position: 'relative',\n      boxSizing: 'border-box',\n      width: grid.innerWidth,\n      margin: margin(grid.gap),\n    },\n    slot: {\n      boxSizing: 'border-box',\n      transition: 'box-shadow 0.3s cubic-bezier(.25,.8,.25,1)',\n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      $nest: {\n        '>*:first-child': {\n          boxSizing: 'border-box',\n          flexGrow: 1, // Expand vertically\n        }\n      }\n    },\n    normal: {\n      backgroundColor: cssVar('$card'),\n      boxShadow: `0px 3px 5px ${cssVar('$text0')}`,\n      $nest: {\n        '&:hover': {\n          boxShadow: `0px 12px 20px ${cssVar('$text2')}`,\n        }\n      },\n    },\n    raised: {\n      color: cssVar('$card'),\n      backgroundColor: cssVar('$themePrimary'),\n      boxShadow: `0px 3px 7px ${cssVar('$text3')}`,\n    },\n    flat: {\n      backgroundColor: cssVar('$card'),\n      boxShadow: `0px 3px 5px ${cssVar('$text0')}`,\n    },\n  }),\n  getCardEffectClass = (c: C) => {\n    const effect = getCardEffect(c)\n    return clas(css.slot, effect === CardEffect.Normal\n      ? css.normal\n      : effect === CardEffect.Raised\n        ? css.raised\n        : effect == CardEffect.Flat\n          ? css.flat : '')\n  }\n\nexport const\n  getCardEffect = (c: C): CardEffect => cards.lookup(c.state.view).effect,\n  GridLayout = ({ name, cards: cs }: { name: S, cards: C[] }) => {\n    const\n      children = cs.map(c => {\n        const\n          placement = grid.place(c.state.box),\n          { left, top, right, bottom, width, height } = placement,\n          display = placement === badPlacement ? 'none' : undefined,\n          zIndex = c.name === '__unhandled_error__' ? 1 : 'initial'\n        return (\n          <div key={c.id} className={getCardEffectClass(c)} style={{ display, position: 'absolute', left, top, right, bottom, width, height, zIndex }}>\n            <CardView card={c} />\n            {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n          </div>\n        )\n      })\n    return (\n      <div data-test={name} className={css.grid}>\n        {children}\n      </div>\n    )\n  }\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport markdownit from 'markdown-it'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid, substitute } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { border, padding, pc, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    body: {\n      flexGrow: 1,\n    },\n    markdown: {\n      $nest: {\n        a: {\n          color: cssVar('$themePrimary'),\n          $nest: {\n            '&:hover': {\n              textDecoration: 'none',\n            },\n          },\n        },\n        table: {\n          width: pc(100),\n          borderCollapse: 'collapse',\n        },\n        tr: {\n          borderBottom: border(1, cssVar('$text5')),\n        },\n        th: {\n          padding: padding(11, 6),\n          textAlign: 'left',\n        },\n        td: {\n          padding: padding(11, 6),\n        },\n        img: {\n          maxWidth: '100%',\n          maxHeight: '100%',\n        },\n      },\n    },\n  })\n\nexport const\n  markdown = markdownit({ html: true, linkify: true, typographer: true, }),\n  markdownSafe = markdownit({ typographer: true, linkify: true }),\n  Markdown = ({ source }: { source: S }) => (<div className={css.markdown} dangerouslySetInnerHTML={{ __html: markdown.render(source) }} />),\n  MarkdownSafe = ({ source }: { source: S }) => (<div className={css.markdown} dangerouslySetInnerHTML={{ __html: markdownSafe.render(source) }} />)\n\n\n/**\n * Create a card that renders Markdown content.\n *\n * Github-flavored markdown is supported.\n * HTML markup is allowed in markdown content.\n * URLs, if found, are displayed as hyperlinks.\n * Copyright, reserved, trademark, quotes, etc. are replaced with language-neutral symbols.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The markdown content. Supports Github Flavored Markdown (GFM): https://guides.github.com/features/mastering-markdown/ */\n  content: S\n  /** Additional data for the card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          data = unpack(state.data),\n          title = substitute(state.title, data)\n        return (\n          <div data-test={name} className={css.card}>\n            {title && <div className='s12 w6'>{title}</div>}\n            <div className={css.body}>\n              <Markdown source={substitute(state.content, data)} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('markdown', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Markdown } from './markdown'\nimport { B, S } from './qd'\n\nconst\n  css = stylesheet({\n    container: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      alignContent: 'flex-start'\n    },\n    element: {\n      flexGrow: 1\n    },\n    icon: {\n      color: '#323130',\n      fontWeight: 400,\n      fontSize: '14px',\n      userSelect: 'none',\n      textAlign: 'left',\n      marginLeft: '0.5em',\n      cursor: 'pointer'\n    }\n  })\n\nexport const\n  XToolTip = ({ children, content, showIcon, expand }: {\n    children: React.ReactChild,\n    content?: S,\n    showIcon?: B,\n    expand?: B\n  }) => {\n    if (!content) return <>{children}</>\n\n    const\n      tooltipProps: Fluent.ITooltipProps = {\n        onRenderContent: () => (<div><Markdown source={content} /></div>)\n      }\n    return (\n      <div className={css.container} data-test='tooltip'>\n        {\n          showIcon === undefined || showIcon\n            ? (\n              <>\n                <div className={expand === undefined || expand ? css.element : ''}>{children}</div>\n                <Fluent.TooltipHost tooltipProps={tooltipProps}>\n                  <Fluent.FontIcon className={css.icon} iconName='Info' />\n                </Fluent.TooltipHost>\n              </>\n            )\n            : <Fluent.TooltipHost tooltipProps={tooltipProps}>{children}</Fluent.TooltipHost>\n        }\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component } from './form'\nimport { B, bond, Dict, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\nimport { XToolTip } from './tooltip'\n\n/**\n * Create a button.\n *\n * Buttons are best used to enable a user to commit a change or complete steps in a task.\n * They are typically found inside forms, dialogs, panels or pages.\n * An example of their usage is confirming the deletion of a file in a confirmation dialog.\n *\n * When considering their place in a layout, contemplate the order in which a user will flow through the UI.\n * As an example, in a form, the individual will need to read and interact with the form fields before submitting\n * the form. Therefore, as a general rule, the button should be placed at the bottom of the UI container\n * which holds the related UI elements.\n *\n * Buttons may be placed within a \"buttons\" component which will lay out the buttons horizontally, or used\n * individually and they will be stacked vertically.\n *\n * While buttons can technically be used to navigate a user to another part of the experience, this is not\n * recommended unless that navigation is part of an action or their flow.\n */\nexport interface Button {\n  /** An identifying name for this component. If the name is prefixed with a '#', the button sets the location hash to the name when clicked. */\n  name: Id\n  /** The text displayed on the button. */\n  label?: S\n  /** The caption displayed below the label. Setting a caption renders a compound button. */\n  caption?: S\n  /** A value for this button. If a value is set, it is used for the button's submitted instead of a boolean True. */\n  value?: S\n  /** True if the button should be rendered as the primary button in the set. */\n  primary?: B\n  /** True if the button should be disabled. */\n  disabled?: B\n  /** True if the button should be rendered as link text and not a standard button. */\n  link?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n/** Create a set of buttons laid out horizontally. */\nexport interface Buttons {\n  /** The button in this set. */\n  items: Component[]\n  /** Specifies how to lay out buttons horizontally. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n\nconst\n  css = stylesheet({\n    buttons: {\n      boxSizing: 'border-box',\n    },\n  }),\n  justifications: Dict<Fluent.Alignment> = {\n    start: 'start',\n    end: 'end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  }\n\nconst\n  XButton = bond(({ model: m }: { model: Button }) => {\n    qd.args[m.name] = false\n    const\n      onClick = () => {\n        if (m.name.startsWith('#')) {\n          window.location.hash = m.name.substr(1)\n          return\n        }\n        qd.args[m.name] = m.value === undefined || m.value\n        qd.sync()\n      },\n      render = () => {\n        if (m.link) {\n          return <Fluent.Link data-test={m.name} disabled={m.disabled} onClick={onClick}>{m.label}</Fluent.Link>\n        }\n        return m.caption?.length\n          ? m.primary\n            ? <Fluent.CompoundButton data-test={m.name} primary text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.CompoundButton data-test={m.name} text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n          : m.primary\n            ? <Fluent.PrimaryButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.DefaultButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n      }\n    return { render }\n  })\nexport const\n  XButtons = ({ model: m }: { model: Buttons }) => {\n    const\n      children = (m.items.map(c => c.button).filter(Boolean) as Button[]).map(b => (\n        <XToolTip key={b.name} content={b.tooltip} showIcon={false} expand={false}>\n          <XButton model={b}>{b.label}</XButton>\n        </XToolTip>\n      ))\n    return (\n      <div data-test={m.name} className={css.buttons} style={displayMixin(m.visible)}>\n        <Fluent.Stack horizontal horizontalAlign={justifications[m.justify || '']} tokens={{ childrenGap: 10 }}>{children}</Fluent.Stack>\n      </div>\n    )\n  },\n  XStandAloneButton = ({ model: m }: { model: Button }) => (\n    <div className={css.buttons} style={displayMixin(m.visible)}>\n      <XButton key={m.name} model={m}>{m.label}</XButton>\n    </div>\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a checkbox.\n *\n * A checkbox allows users to switch between two mutually exclusive options (checked or unchecked, on or off) through\n * a single click or tap. It can also be used to indicate a subordinate setting or preference when paired with another\n * component.\n *\n * A checkbox is used to select or deselect action items. It can be used for a single item or for a list of multiple\n * items that a user can choose from. The component has two selection states: unselected and selected.\n *\n * For a binary choice, the main difference between a checkbox and a toggle switch is that the checkbox is for status\n * and the toggle switch is for action.\n *\n * Use multiple checkboxes for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checkbox {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the checkbox. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the selection is indeterminate (neither selected nor unselected). */\n  indeterminate?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the checkbox value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XCheckbox = bond(({ model: m }: { model: Checkbox }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = checked === null ? null : !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Checkbox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          defaultIndeterminate={m.indeterminate}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Choice } from './choice_group'\nimport { B, bond, box, Box, Id, on, qd, S } from './qd'\nimport { displayMixin, margin } from './theme'\n\n/**\n * Create a set of checkboxes.\n * Use this for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checklist {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if the form should be submitted when the checklist value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  css = stylesheet({\n    toolbar: {\n      margin: margin(5, 0)\n    },\n    items: {\n      $nest: {\n        '> *': {\n          margin: '10px 0',\n        }\n      },\n    },\n  }),\n  XChecklistItem = bond(({ name, label, disabled, selectedB }: { name: S, label: S, disabled: B, selectedB: Box<B> }) => {\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => selectedB(!!checked),\n      render = () => {\n        return (\n          <Fluent.Checkbox\n            data-test={name}\n            label={label}\n            checked={selectedB()}\n            onChange={onChange}\n            disabled={disabled}\n            styles={{ root: { marginBottom: 4 } }}\n          />\n        )\n      }\n    return { render, selectedB }\n  })\n\nexport const\n  XChecklist = bond(({ model: m }: { model: Checklist }) => {\n    qd.args[m.name] = m.values || []\n    let _pause = false\n    const\n      defaultSelection = new Set<S>(m.values),\n      choices = (m.choices || []).map(c => ({\n        choice: c,\n        selectedB: box(defaultSelection.has(c.name))\n      })),\n      capture = () => {\n        if (_pause) return\n        const vs: S[] = []\n        for (const c of choices) if (c.selectedB()) vs.push(c.choice.name)\n        qd.args[m.name] = vs\n        if (m.trigger) qd.sync()\n      },\n      select = (value: B) => {\n        _pause = true\n        for (const c of choices) if (!c.choice.disabled) c.selectedB(value)\n        _pause = false\n        capture()\n      },\n      selectAll = () => select(true),\n      deselectAll = () => select(false),\n      render = () => {\n        const\n          items = choices.map(({ choice, selectedB }, i) => (\n            <XChecklistItem name={`checkbox-${i + 1}`} key={i} label={choice.label || choice.name} disabled={!!choice.disabled} selectedB={selectedB} />\n          ))\n        return (\n          <div data-test={m.name} style={displayMixin(m.visible)}>\n            <Fluent.Label>{m.label}</Fluent.Label>\n            <div className={css.toolbar}>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n            <div className={css.items}>{items}</div>\n          </div>\n        )\n      }\n    choices.forEach(c => on(c.selectedB, capture))\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n *  Create a choice for a checklist, choice group or dropdown.\n */\nexport interface Choice {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the checkbox is disabled. */\n  disabled?: B\n}\n\n/**\n * Create a choice group.\n * The choice group component, also known as radio buttons, let users select one option from two or more choices.\n * Each option is represented by one choice group button; a user can select only one choice group in a button group.\n *\n * Choice groups emphasize all options equally, and that may draw more attention to the options than necessary.\n * Consider using other components, unless the options deserve extra attention from the user.\n * For example, if the default option is recommended for most users in most situations, use a dropdown instead.\n *\n * If there are only two mutually exclusive options, combine them into a single Checkbox or Toggle switch.\n * For example, use a checkbox for \"I agree\" instead of choice group buttons for \"I agree\" and \"I don't agree.\"\n*/\nexport interface ChoiceGroup {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this field is required. */\n  required?: B\n  /** True if the form should be submitted when the selection changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XChoiceGroup = bond(({ model: m }: { model: ChoiceGroup }) => {\n    qd.args[m.name] = m.value || null\n    const\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IChoiceGroupOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IChoiceGroupOption) => {\n        if (option) qd.args[m.name] = option.key\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.ChoiceGroup\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          required={m.required}\n          defaultSelectedKey={m.value}\n          options={options}\n          onChange={onChange}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a color picker.\n *\n * A date picker allows a user to pick a color value.\n * If the 'choices' parameter is set, a swatch picker is displayed instead of the standard color picker.\n */\nexport interface ColorPicker {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The selected color (CSS-compatible string). */\n  value?: S\n  /** A list of colors (CSS-compatible strings) to limit color choices to. */\n  choices?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the color picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  toColorCells = (cs: S[]) => cs.map((c): Fluent.IColorCellProps => ({ id: c, label: c, color: c }))\n\nexport const\n  XColorPicker = bond(({ model: m }: { model: ColorPicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onColorChanged = (_id?: string, color?: string) => {\n        qd.args[m.name] = color || value\n\n        if (m.trigger) qd.sync()\n      },\n      onChange = (_e: React.SyntheticEvent<HTMLElement>, color: Fluent.IColor) => {\n        qd.args[m.name] = color?.str || value\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <div data-test={m.name} style={displayMixin(m.visible)}>\n          <Fluent.Label>{m.label}</Fluent.Label>\n          {\n            m.choices?.length\n              ? <Fluent.SwatchColorPicker\n                columnCount={10}\n                selectedId={value || m.choices[0]}\n                colorCells={toColorCells(m.choices)}\n                onColorChanged={onColorChanged}\n              />\n              : <Fluent.ColorPicker\n                color={value || '#000'}\n                onChange={onChange}\n              />\n          }\n        </div>\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, box, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a combobox.\n *\n * A combobox is a list in which the selected item is always visible, and the others are visible on demand by\n * clicking a drop-down button or by typing in the input.\n * They are used to simplify the design and make a choice within the UI.\n *\n * When closed, only the selected item is visible.\n * When users click the drop-down button, all the options become visible.\n * To change the value, users open the list and click another value or use the arrow keys (up and down)\n * to select a new value.\n * When collapsed the user can select a new value by typing.\n */\nexport interface Combobox {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: S[]\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n\nexport const\n  XCombobox = bond(({ model: m }: { model: Combobox }) => {\n    qd.args[m.name] = m.value || null\n    const\n      textB = box(m.value),\n      options = (m.choices || []).map((text, i): Fluent.IComboBoxOption => ({ key: `${i}`, text })),\n      onChange = (_e: React.FormEvent<Fluent.IComboBox>, option?: Fluent.IComboBoxOption, _index?: number, value?: string) => {\n        const v = option?.text || value || ''\n        qd.args[m.name] = v\n        textB(v)\n      },\n      render = () => (\n        <Fluent.ComboBox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          placeholder={m.placeholder}\n          options={options}\n          disabled={m.disabled}\n          autoComplete=\"on\"\n          allowFreeform={true}\n          errorMessage={m.error}\n          text={textB()}\n          onChange={onChange}\n        />\n      )\n    return { render, textB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, Id, qd, S, U } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a date picker.\n *\n * A date picker allows a user to pick a date value.\n */\nexport interface DatePicker {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The date value in YYYY-MM-DD format. */\n  value?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the datepicker value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  pad2 = (n: U) => { const s = `${n}`; return s.length === 1 ? `0${s}` : s },\n  formatDate = (d: Date): S => `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`,\n  parseDate = (s: S | null): Date | undefined => {\n    if (s && s.length) {\n      const ss = s.split('-')\n      if (ss.length !== 3) return undefined\n      const ymd = ss.map(s => parseInt(s, 10)).filter(n => !isNaN(n))\n      if (ymd.length !== 3) return undefined\n      return new Date(ymd[0], ymd[1] - 1, ymd[2])\n    }\n    return undefined\n  }\n\nexport const\n  XDatePicker = bond(({ model: m }: { model: DatePicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onSelectDate = (d: Date | null | undefined) => {\n        qd.args[m.name] = (d === null || d === undefined) ? value : formatDate(d)\n\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.DatePicker\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          value={parseDate(value)}\n          placeholder={m.placeholder}\n          disabled={m.disabled}\n          onSelectDate={onSelectDate}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, box, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a dropdown.\n *\n * A dropdown is a list in which the selected item is always visible, and the others are visible on demand by clicking\n * a drop-down button. They are used to simplify the design and make a choice within the UI. When closed, only the\n * selected item is visible. When users click the drop-down button, all the options become visible.\n *\n * To change the value, users open the list and click another value or use the arrow keys (up and down) to\n * select a new value.\n *\n * Note: Use either the 'value' parameter or the 'values' parameter. Setting the 'values' parameter renders a\n * multi-select dropdown.\n */\nexport interface Dropdown {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The names of the selected choices. If this parameter is set, multiple selections will be allowed. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this is a required field. */\n  required?: B\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the dropdown value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XDropdown = bond(({ model: m }: { model: Dropdown }) => {\n    const isMultivalued = !!m.values\n    qd.args[m.name] = isMultivalued\n      ? (m.values || [])\n      : (m.value || null)\n\n    const\n      selection = isMultivalued ? new Set<S>(m.values) : null,\n      selectedOptionsB = box(Array.from(selection || [])),\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IDropdownOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IDropdownOption) => {\n        if (option) {\n          const name = option.key as S\n          if (isMultivalued && selection !== null) {\n            if (option.selected) {\n              selection.add(name)\n            } else {\n              selection.delete(name)\n            }\n            const selectedOpts = Array.from(selection)\n            qd.args[m.name] = selectedOpts\n            selectedOptionsB(selectedOpts)\n          } else {\n            qd.args[m.name] = name\n          }\n        }\n        if (m.trigger) qd.sync()\n      },\n      selectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        options.forEach(o => { if (!o.disabled) selection.add(o.key as S) })\n\n        const selectionArr = Array.from(selection)\n        selectedOptionsB(selectionArr)\n        qd.args[m.name] = selectionArr\n\n        onChange()\n      },\n      deselectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        selectedOptionsB([])\n        qd.args[m.name] = []\n\n        onChange()\n      },\n      render = () =>\n        <div style={displayMixin(m.visible)}>\n          <Fluent.Dropdown\n            data-test={m.name}\n            label={m.label}\n            placeholder={m.placeholder}\n            options={options}\n            required={m.required}\n            disabled={m.disabled}\n            multiSelect={isMultivalued || undefined}\n            defaultSelectedKey={!isMultivalued ? m.value : undefined}\n            selectedKeys={isMultivalued ? selectedOptionsB() : undefined}\n            onChange={onChange}\n          />\n          {\n            isMultivalued &&\n            <div>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n          }\n        </div>\n\n    return { render, selectedOptionsB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component, XComponents } from './form'\nimport { B, bond, box, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Creates a new expander.\n *\n * Expanders can be used to show or hide a group of related components.\n */\nexport interface Expander {\n  /** An identifying name for this component. */\n  name: Id\n  /** The text displayed on the expander. */\n  label?: S\n  /** True if expanded, False if collapsed. */\n  expanded?: B\n  /** List of components to be hideable by the expander. */\n  items?: Component[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    expanderOpen: {\n      $nest: {\n        '>div:last-child': {\n          display: 'block',\n        },\n      },\n    },\n    expanderClosed: {\n      $nest: {\n        '>div:last-child': {\n          display: 'none',\n        },\n      },\n    },\n  })\n\nexport const\n  XExpander = bond(({ model: m }: { model: Expander }) => {\n    const\n      isOpenB = box(!!qd.args[m.name]),\n      onClick = () => {\n        qd.args[m.name] = m.expanded = !m.expanded\n        isOpenB(m.expanded)\n      },\n      render = () => {\n        const\n          isOpen = isOpenB(),\n          actionTitle = isOpen ? 'Shrink' : 'Expand',\n          expanderIcon = { iconName: isOpen ? 'ChevronDownMed' : 'ChevronRightMed' },\n          className = isOpenB() ? css.expanderOpen : css.expanderClosed\n\n        return (\n          <div data-test={m.name} className={className} style={displayMixin(m.visible)}>\n            <Fluent.Separator alignContent=\"start\" styles={{ content: { paddingLeft: 0 } }}>\n              <Fluent.ActionButton\n                title={actionTitle}\n                iconProps={expanderIcon}\n                onClick={onClick}\n                styles={{ root: { paddingLeft: 0 }, icon: { marginLeft: 0 } }}>{m.label}</Fluent.ActionButton>\n            </Fluent.Separator>\n            <XComponents items={m.items || []} />\n          </div>\n        )\n      }\n    return { isOpenB, render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, box, F, Id, qd, S, U, xid } from './qd'\nimport { centerMixin, clas, dashed, displayMixin, padding } from './theme'\n\n/**\n * Create a file upload component.\n * A file upload component allows a user to browse, select and upload one or more files.\n */\nexport interface FileUpload {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the component should allow multiple files to be uploaded. */\n  multiple?: B\n  /** List of allowed file extensions, e.g. `pdf`, `docx`, etc. */\n  file_extensions?: S[]\n  /** Maximum allowed size (Mb) per file. Defaults to no limit. */\n  max_file_size?: F\n  /** Maximum allowed size (Mb) for all files combined. Defaults to no limit. */\n  max_size?: F\n  /** The height of the file upload, e.g. '400px', '50%', etc. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  css = stylesheet({\n    uploadInput: {\n      opacity: 0\n    },\n    upload: {\n      ...centerMixin(),\n      flexDirection: 'column',\n      boxSizing: 'border-box',\n    },\n    uploadDragging: {\n      border: dashed(2, 'var(--text)'),\n    },\n    uploadLabel: {\n      ...centerMixin(),\n      padding: padding(7, 10),\n      fontSize: 14,\n      fontWeight: 600,\n      borderRadius: 2,\n      background: 'var(--text)',\n      color: 'var(--page)',\n      minWidth: 80,\n      $nest: {\n        '&:hover': {\n          cursor: 'pointer'\n        }\n      }\n    },\n    uploadMessageBar: {\n      margin: '20px 0'\n    },\n    uploadRemove: {\n      fontSize: 20,\n      position: 'absolute',\n      top: -15,\n      right: 0,\n      cursor: 'pointer'\n    },\n  })\nconst convertMegabytesToBytes = (bytes: F) => bytes * 1024 * 1024\nexport const\n  XFileUpload = bond(({ model }: { model: FileUpload }) => {\n    const\n      isDraggingB = box(false),\n      filesB = box<File[]>([]),\n      percentCompleteB = box(0.0),\n      errorB = box(''),\n      successMsgB = box(''),\n      maxFileSizeBytes = model.max_file_size ? convertMegabytesToBytes(model.max_file_size) : 0,\n      maxSizeBytes = model.max_size ? convertMegabytesToBytes(model.max_size) : 0,\n      fileExtensions = model.file_extensions\n        ? model.file_extensions.map(e => e.startsWith('.') ? e : `.${e}`)\n        : null,\n      upload = async () => {\n        const formData = new FormData()\n        filesB().forEach(f => formData.append('files', f))\n\n        try {\n          const makeRequest = new Promise<XMLHttpRequest>((resolve, reject) => {\n            const xhr = new XMLHttpRequest()\n            xhr.open(\"POST\", \"/_f\")\n            xhr.upload.onprogress = e => percentCompleteB(e.loaded / e.total)\n            xhr.send(formData)\n            xhr.onreadystatechange = () => {\n              if (xhr.readyState !== XMLHttpRequest.DONE) return\n              if (xhr.status >= 200 && xhr.status < 300) resolve(xhr)\n              else reject(xhr)\n            }\n          })\n          const { responseText } = await makeRequest\n          const { files } = JSON.parse(responseText)\n          qd.args[model.name] = files\n          qd.sync()\n          successMsgB(`Successfully uploaded files: ${filesB().map(({ name }) => name).join(',')}.`)\n        }\n        catch (e) { errorB('There was an error when uploading file.') }\n        finally { filesB([]) }\n      },\n      isFileTypeAllowed = (fileName: string) => {\n        if (!fileExtensions) return true\n        for (const allowedExtension of fileExtensions) {\n          if (fileName.toLowerCase().endsWith(allowedExtension.toLowerCase())) return true\n        }\n        return false\n      },\n      validateFiles = (fileArr: File[]) => {\n        if (!model.multiple && fileArr.length > 1) {\n          return 'Cannot upload multiple files. Input is not set to multiple mode.'\n        }\n\n        const notAllowedFiles = fileArr.filter(({ name }) => !isFileTypeAllowed(name))\n        if (notAllowedFiles.length) {\n          return `Not allowed extension for files: ${notAllowedFiles.map(({ name }) => name).join(', ')}.\n          Allowed file extensions: ${fileExtensions?.join(', ')}.`\n        }\n\n        if (maxFileSizeBytes) {\n          const maxSizePerFileExceededFiles = fileArr.filter(({ size }) => size > maxFileSizeBytes)\n          if (maxSizePerFileExceededFiles.length) {\n            return `Max file size exceeded for files: ${maxSizePerFileExceededFiles.map(({ name }) => name).join(', ')}.\n            Allowed size per file: ${model.max_file_size}Mb.`\n          }\n        }\n\n        if (maxSizeBytes) {\n          const totalSize = fileArr.reduce((total, { size }) => total + size, 0)\n          if (totalSize > maxSizeBytes) {\n            return `Total max file size exceeded. Allowed size: ${model.max_size}Mb.`\n          }\n        }\n      },\n      onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = e.target.files\n        if (!files?.length) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n        filesB(fileArr)\n      },\n      onIsDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(true)\n      },\n      onIsNotDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(false)\n      },\n      onDrop = (e: React.DragEvent<HTMLFormElement>) => {\n        onIsNotDragging(e)\n        const files = e.dataTransfer.files\n        if (!files.length || errorB() || successMsgB()) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n\n        filesB(fileArr)\n      },\n      // Workaround - This event prevents onDrop from firing.\n      // https://stackoverflow.com/questions/50230048/react-ondrop-is-not-firing/50230145.\n      onDragOver = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n      },\n      onDismissError = () => errorB(''),\n      onDismissSuccess = () => {\n        successMsgB('')\n        percentCompleteB(0)\n      },\n      removeFile = (index: U) => () => {\n        filesB().splice(index, 1)\n        filesB([...filesB()])\n      },\n      getUploadBodyComponent = () => {\n        if (errorB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>An error occured</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.error}\n              isMultiline={true}\n              onDismiss={onDismissError}>\n              {errorB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (successMsgB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>Upload successful</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.success}\n              isMultiline={true}\n              onDismiss={onDismissSuccess}>\n              {successMsgB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (isDraggingB()) return (\n          <Fluent.Text styles={{ root: { pointerEvents: 'none' } }}>Drop files anywhere within the box.</Fluent.Text>\n        )\n        else if (percentCompleteB()) return (\n          <Fluent.ProgressIndicator\n            styles={{ root: { width: '80%' } }}\n            data-test='progress' // TODO: Does not work.\n            description={`Uploading: ${(percentCompleteB() * 100).toFixed(2)}%`}\n            percentComplete={percentCompleteB()}\n          />\n        )\n        else if (filesB().length) return (\n          <>\n            <Fluent.Text variant='xLarge'>{model.multiple ? 'Chosen Files' : 'Chosen File'}</Fluent.Text>\n            <Fluent.Stack\n              horizontal={true}\n              verticalAlign='center'\n              styles={{ root: { maxWidth: '100%', overflowX: 'auto', padding: '30px 0' } }}\n              tokens={{ childrenGap: 15 }}>\n              {\n                filesB().map(({ name }, i) => (\n                  <Fluent.StackItem key={xid()} styles={{ root: { textAlign: 'center', position: 'relative' } }}>\n                    <Fluent.Icon className={css.uploadRemove} iconName='RemoveFilter' onClick={removeFile(i)} />\n                    <Fluent.Icon iconName='OpenFile' styles={{ root: { fontSize: 35 } }} />\n                    <br />\n                    <Fluent.Text nowrap={true} styles={{ root: { display: 'block', margin: '15px 0' } }}>{name}</Fluent.Text>\n                  </Fluent.StackItem>\n                ))\n              }\n            </Fluent.Stack>\n          </>\n        )\n        else return (\n          <>\n            <Fluent.Icon iconName='CloudUpload' styles={{ root: { fontSize: 50 } }} />\n            <input\n              id='file'\n              data-test={model.name}\n              className={css.uploadInput}\n              onChange={onChange}\n              type='file'\n              accept={fileExtensions?.join(',') || undefined}\n              multiple={model.multiple} />\n            <label htmlFor=\"file\" className={css.uploadLabel}>Browse...</label>\n            <Fluent.Text styles={{ root: { marginTop: 15 } }}>Or drag and drop {model.multiple ? 'files' : 'a file'} here.</Fluent.Text>\n          </>\n        )\n      },\n      render = () => {\n        const uploadClasses = isDraggingB() && !errorB() && !successMsgB() ? clas(css.upload, css.uploadDragging) : css.upload\n        return (\n          <div style={displayMixin(model.visible)}>\n            <form\n              className={uploadClasses}\n              style={{ height: model.height || 300 }}\n              onDragStart={onIsDragging}\n              onDragEnter={onIsDragging}\n              onDragEnd={onIsNotDragging}\n              onDragLeave={onIsNotDragging}\n              onDrop={onDrop}\n              onDragOver={onDragOver}\n            >\n              {getUploadBodyComponent()}\n            </form>\n            <Fluent.PrimaryButton\n              disabled={!!percentCompleteB() || !filesB().length}\n              text={model.label}\n              onClick={upload} />\n          </div>\n        )\n      }\n\n    return { render, percentCompleteB, isDraggingB, filesB, errorB, successMsgB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, S, xid, B } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    body: {\n      flexGrow: 1,\n      position: 'relative',\n    },\n    frame: {\n      // WORKAROUND: Iframe \"height:100%\" implementation differs from Chrome/FF despite container being\n      // correctly expanded via \"flex-grow:1\". Need to position it absolutely instead.\n      position: 'absolute',\n      top: 0, left: 0, right: 0, bottom: 0\n    }\n  })\n\n/**\n * Create a new inline frame (an `iframe`).\n */\nexport interface Frame {\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>`. */\n  content?: S\n  /** The width of the frame, e.g. `200px`, `50%`, etc. Defaults to `100%`. */\n  width?: S\n  /** The height of the frame, e.g. `200px`, `50%`, etc. Defaults to `150px`. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/**\n * Render a card containing a HTML page inside an inline frame (an `iframe`).\n *\n * Either a path or content can be provided as arguments.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>` */\n  content?: S\n}\n\nconst\n  // replace ' src=\"/' -> ' src=\"http://foo.bar.baz:8080/'\n  fixrefs = (s: S): S => s.replace(/(\\s+src\\s*=\\s*[\"'])\\//g, `$1${window.location.protocol}//${window.location.host}/`),\n  inline = (s: S): S => URL.createObjectURL(new Blob([fixrefs(s)], { type: 'text/html' })),\n  InlineFrame = ({ path, content }: { path?: S, content?: S }) => (\n    <iframe title={xid()} src={path ? path : content ? inline(content) : inline('Nothing to render.')} className={css.frame} frameBorder=\"0\" width=\"100%\" height=\"100%\" />\n  )\n\n// HACK: Applying width/height styles directly on iframe don't work in Chrome/FF; so wrap in div instead.\nexport const XFrame = ({ model: { name, path, content, width = '100%', height = '150px', visible } }: { model: Frame }) => (\n  <div data-test={name} style={{ width, height, ...displayMixin(visible) }}>\n    <InlineFrame path={path} content={content} />\n  </div>\n)\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <div className='s12 w6'>{state.title}</div>\n        <div className={css.body}>\n          <InlineFrame path={state.path} content={state.content} />\n        </div>\n      </div>\n    )\n    return { render, changed }\n  })\n\ncards.register('frame', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a label.\n *\n * Labels give a name or title to a component or group of components.\n * Labels should be in close proximity to the component or group they are paired with.\n * Some components, such as textboxes, dropdowns, or toggles, already have labels\n * incorporated, but other components may optionally add a Label if it helps inform\n * the user of the component’s purpose.\n*/\nexport interface Label {\n  /**  The text displayed on the label.*/\n  label: S\n  /** True if the field is required. */\n  required?: B\n  /** True if the label should be disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLabel = ({ model }: { model: Label }) => {\n    const { label, required = false, disabled = false, visible, name } = model\n    return (\n      <Fluent.Label\n        data-test={name}\n        style={displayMixin(visible)}\n        required={required}\n        disabled={disabled}\n      >{label}</Fluent.Label>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a hyperlink.\n *\n * Hyperlinks can be internal or external.\n * Internal hyperlinks have paths that begin with a `/` and point to URLs within the Wave UI.\n * All other kinds of paths are treated as external hyperlinks.\n */\nexport interface Link {\n  /** The text to be displayed. If blank, the `path` is used as the label. */\n  label?: S\n  /** The path or URL to link to. */\n  path?: S\n  /** True if the link should be disabled. */\n  disabled?: B\n  /** True if the link should be used for file download. */\n  download?: B\n  /** True if the link should be rendered as a button. */\n  button?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Where to display the link. Setting this to an empty string or `'_blank'` opens the link in a new tab or window. */\n  target?: S\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLink = bond(({ model: m }: { model: Link }) => {\n    const\n      label = m.label || m.path,\n      target = m.target === '' ? '_blank' : m.target,\n      onClick = () => target ? window.open(m.path, target) : window.open(m.path),\n      render = () => (\n        <div style={displayMixin(m.visible)}>\n          {\n            m.button\n              ? <Fluent.DefaultButton data-test={m.name} text={label} disabled={m.disabled} onClick={onClick} />\n              : <Fluent.Link\n                data-test={m.name}\n                href={m.path}\n                download={m.download}\n                disabled={m.disabled}\n                target={target}>\n                {label}\n              </Fluent.Link>\n          }\n        </div>\n      )\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, S, B } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    body: {\n      flexGrow: 1,\n    },\n  })\n\n/** Render HTML content. */\nexport interface Markup {\n  /** The HTML content. */\n  content: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render HTML content. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The HTML content. */\n  content: S\n}\n\nexport const\n  XMarkup = ({ model: { content, visible, name } }: { model: Markup }) => (\n    <div data-test={name} dangerouslySetInnerHTML={{ __html: content }} style={displayMixin(visible)} />\n  ),\n  MarkupCard = ({ name, title, content }: { name: S, title: S, content: S }) => (\n    <div data-test={name} className={css.card}>\n      {title && <div className='s12 w6'>{title}</div>}\n      <div className={css.body}>\n        <XMarkup model={{ content }} />\n      </div>\n    </div>\n  ),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <MarkupCard name={name} title={state.title} content={state.content} />\n    return { render, changed }\n  })\n\ncards.register('markup', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a message bar.\n *\n * A message bar is an area at the top of a primary view that displays relevant status information.\n * You can use a message bar to tell the user about a situation that does not require their immediate attention and\n * therefore does not need to block other activities.\n */\nexport interface MessageBar {\n  /** The icon and color of the message bar. */\n  type?: 'info' | 'error' | 'warning' | 'success' | 'danger' | 'blocked'\n  /** The text displayed on the message bar. */\n  text?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  toMessageBarType = (t?: S): Fluent.MessageBarType => {\n    switch (t) {\n      case 'error': return Fluent.MessageBarType.error\n      case 'warning': return Fluent.MessageBarType.warning\n      case 'success': return Fluent.MessageBarType.success\n      case 'danger': return Fluent.MessageBarType.severeWarning\n      case 'blocked': return Fluent.MessageBarType.blocked\n      default: return Fluent.MessageBarType.info\n    }\n  }\n\nexport const\n  XMessageBar = ({ model: m }: { model: MessageBar }) => (\n    m.text?.length\n      ? (\n        <Fluent.MessageBar\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          messageBarType={toMessageBarType(m.type)} >{m.text}</Fluent.MessageBar>\n      )\n      : <div />\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Chart, registerInteraction } from '@antv/g2'\nimport { AdjustOption, AnnotationPosition, ArcOption, AxisOption, ChartCfg, CoordinateActions, CoordinateOption, DataMarkerOption, DataRegionOption, GeometryOption, LineOption, RegionOption, ScaleOption, TextOption } from '@antv/g2/lib/interface'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Fmt, parseFormat } from './intl'\nimport { cards, grid } from './layout'\nimport { displayMixin, cssVarValue, } from './theme'\nimport { B, bond, Card, Dict, F, parseI, parseU, Rec, S, unpack, V, qd } from './qd'\n\nlet\n  cat10 = [\n    '$gray',\n    '$blue',\n    '$green',\n    '$amber',\n    '$tangerine',\n    '$purple',\n    '$cyan',\n    '$mint',\n    '$pink',\n    '$brown',\n  ]\n\n\ntype AnnotationOption = ArcOption | LineOption | TextOption | RegionOption | DataMarkerOption | DataRegionOption\n\nenum SpaceT { CC, DD, TT, CD, DC, TC, CT, TD, DT }\n\n/**\n * Create a specification for a layer of graphical marks such as bars, lines, points for a plot.\n * A plot can contain multiple such layers of marks.\n*/\ninterface Mark {\n  /** Coordinate system. `rect` is synonymous to `cartesian`. `theta` is transposed `polar`. */\n  coord?: 'rect' | 'cartesian' | 'polar' | 'theta' | 'helix';\n  /** Graphical geometry. */\n  type?: 'interval' | 'line' | 'path' | 'point' | 'area' | 'polygon' | 'schema' | 'edge' | 'heatmap';\n  /** X field or value. */\n  x?: V;\n  /** X base field or value. */\n  x0?: V;\n  /** X bin lower bound field or value. For histograms. */\n  x1?: V;\n  /** X bin upper bound field or value. For histograms. */\n  x2?: V;\n  /** X axis scale minimum. */\n  x_min?: F;\n  /** X axis scale maximum. */\n  x_max?: F;\n  /** Whether to nice X axis scale ticks. */\n  x_nice?: B;\n  /** X axis scale type. */\n  x_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** X axis title. */\n  x_title?: S;\n  /** Y field or value. */\n  y?: V;\n  /** Y base field or value. */\n  y0?: V;\n  /** Y bin lower bound field or value. For histograms. */\n  y1?: V;\n  /** Y bin upper bound field or value. For histograms. */\n  y2?: V;\n  /** Y axis scale minimum. */\n  y_min?: F;\n  /** Y axis scale maximum. */\n  y_max?: F;\n  /** Whether to nice Y axis scale ticks. */\n  y_nice?: B;\n  /** Y axis scale type. */\n  y_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** Y axis title. */\n  y_title?: S;\n  /** Mark color field or value. */\n  color?: S;\n  /** Mark color range for multi-series plots. A string containing space-separated colors, e.g. `'#fee8c8 #fdbb84 #e34a33'` */\n  color_range?: S;\n  /** The unique values in the data (labels or categories or classes) to map colors to, e.g. `['high', 'medium', 'low']`. If this is not provided, the unique values are automatically inferred from the `color` attribute. */\n  color_domain?: S[];\n  /** Mark shape field or value for `point` mark types. Possible values are 'circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down', 'cross', 'tick', 'plus', 'hyphen', 'line'. */\n  shape?: S;\n  /** Mark shape range for multi-series plots using `point` mark types. A string containing space-separated shapes, e.g. `'circle square diamond'` */\n  shape_range?: S;\n  /** Mark size field or value. */\n  size?: V;\n  /** Mark size range. A string containing space-separated integers, e.g. `'4 30'` */\n  size_range?: S;\n  /** Field to stack marks by, or 'auto' to infer. */\n  stack?: S;\n  /** Field to dodge marks by, or 'auto' to infer. */\n  dodge?: S;\n  /** Curve type for `line` and `area` mark types. */\n  curve?: 'none' | 'smooth' | 'step-before' | 'step' | 'step-after';\n  /** Mark fill color. */\n  fill_color?: S;\n  /** Mark fill opacity. */\n  fill_opacity?: F;\n  /** Mark stroke color. */\n  stroke_color?: S;\n  /** Mark stroke opacity. */\n  stroke_opacity?: F;\n  /** Mark stroke size. */\n  stroke_size?: F;\n  /** Mark stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  stroke_dash?: S;\n  /** Label field or value. */\n  label?: S;\n  /** Distance between label and mark. */\n  label_offset?: F;\n  /** Horizontal distance between label and mark. */\n  label_offset_x?: F;\n  /** Vertical distance between label and mark. */\n  label_offset_y?: F;\n  /** Label rotation angle, in degrees, or 'none' to disable automatic rotation. The default behavior is 'auto' for automatic rotation. */\n  label_rotation?: S;\n  /** Label position relative to the mark. */\n  label_position?: 'top' | 'bottom' | 'middle' | 'left' | 'right';\n  /** Strategy to use if labels overlap. */\n  label_overlap?: 'hide' | 'overlap' | 'constrain';\n  /** Label fill color. */\n  label_fill_color?: S;\n  /** Label fill opacity. */\n  label_fill_opacity?: F;\n  /** Label stroke color. */\n  label_stroke_color?: S;\n  /** Label stroke opacity. */\n  label_stroke_opacity?: F;\n  /** Label stroke size (line width or pen thickness). */\n  label_stroke_size?: F;\n  /** Label font size. */\n  label_font_size?: F;\n  /** Label font weight. */\n  label_font_weight?: S;\n  /** Label line height. */\n  label_line_height?: F;\n  /** Label text alignment. */\n  label_align?: 'left' | 'right' | 'center' | 'start' | 'end';\n  /** Reference line stroke color. */\n  ref_stroke_color?: S;\n  /** Reference line stroke opacity. */\n  ref_stroke_opacity?: F;\n  /** Reference line stroke size (line width or pen thickness). */\n  ref_stroke_size?: F;\n  /** Reference line stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  ref_stroke_dash?: S;\n}\n\n/** Extended mark attributes. Not exposed to API. */\ninterface MarkExt extends Mark {\n  /** Field. */\n  x_field?: S;\n  /** Format string. */\n  x_format?: Fmt;\n  /** Field. */\n  x0_field?: S;\n  /** Format string. */\n  x0_format?: Fmt;\n  /** Field. */\n  x1_field?: S;\n  /** Format string. */\n  x1_format?: Fmt;\n  /** Field. */\n  x2_field?: S;\n  /** Format string. */\n  x2_format?: Fmt;\n  /** Field. */\n  y_field?: S;\n  /** Format string. */\n  y_format?: Fmt;\n  /** Field. */\n  y0_field?: S;\n  /** Format string. */\n  y0_format?: Fmt;\n  /** Field. */\n  y1_field?: S;\n  /** Format string. */\n  y1_format?: Fmt;\n  /** Field. */\n  y2_field?: S;\n  /** Format string. */\n  y2_format?: Fmt;\n  /** Field. */\n  color_field?: S;\n  /** Format string. */\n  color_format?: Fmt;\n  /** Field. */\n  shape_field?: S;\n  /** Format string. */\n  shape_format?: Fmt;\n  /** Format string. */\n  size_format?: Fmt;\n  /** Field. */\n  size_field?: S;\n  /** Field. */\n  dodge_field?: S;\n  /** Field. */\n  label_field?: S;\n  /** Format string. */\n  label_format?: Fmt;\n}\n\n/** Create a plot. A plot is composed of one or more graphical mark layers. */\nexport interface Plot {\n  /** The graphical mark layers contained in this plot. */\n  marks: Mark[];\n}\n\nregisterInteraction('drag-move', {\n  start: [{ trigger: 'plot:mousedown', action: 'scale-translate:start' }],\n  processing: [{ trigger: 'plot:mousemove', action: 'scale-translate:translate', throttle: { wait: 100, leading: true, trailing: false } }],\n  end: [{ trigger: 'plot:mouseup', action: 'scale-translate:end' }],\n})\n\n// TODO not in use\nexport const\n  spaceTypeOf = (ds: any[], marks: Mark[]): SpaceT => spaceTypes[scaleTypeOf(ds, marks, 'x') + scaleTypeOf(ds, marks, 'y')],\n  crosshairFor = (t: SpaceT): 'x' | 'y' | 'xy' => {\n    switch (t) {\n      case SpaceT.CC:\n      case SpaceT.DD:\n      case SpaceT.TT:\n        return 'xy'\n      case SpaceT.DC:\n      case SpaceT.TC:\n      case SpaceT.TD:\n        return 'x'\n      case SpaceT.CD:\n      case SpaceT.CT:\n      case SpaceT.DT:\n        return 'y'\n    }\n  }\n\nconst\n  isF = (x: any): x is number => typeof x === 'number',\n  isB = (x: any): x is boolean => typeof x === 'boolean',\n  isS = (x: any): x is string => typeof x === 'string',\n  split = (s: S) => s.trim().split(/\\s+/g),\n  parseInts = (s: S) => split(s).map(s => parseInt(s, 10)),\n  convertToDates = (ds: any[], f: S) => {\n    for (const d of ds) {\n      if (d) {\n        const s = d[f]\n        if (s && isS(s)) d[f] = new Date(s) // must be ISO string\n      }\n    }\n  },\n  convertToPairs = (ds: any[], f0: S, f1: S, f: S) => {\n    for (const d of ds) if (d) d[f] = [d[f0], d[f1]]\n  },\n  xyVariants = ' 0 1 2'.split(' '),\n  xyExtra = split('min max nice scale title'),\n  makeXYProps = (p: S) => xyVariants.map(s => p + s),\n  makeXYExtraProps = (p: S) => xyExtra.map(s => `${p}_${s}`),\n  makeFormattables = (xs: S[]) => xs.map(f => ([f, f + '_field', f + '_format'])),\n  xProps = makeFormattables(makeXYProps('x')),\n  yProps = makeFormattables(makeXYProps('y')),\n  xExtraProps = makeXYExtraProps('x'),\n  yExtraProps = makeXYExtraProps('y'),\n  otherProps = makeFormattables(split('color shape size dodge label')),\n  formattables = [...xProps, ...yProps, ...otherProps],\n  scaleTypeOf = (ds: any[], marks: Mark[], attr: S): 'c' | 'd' | 't' => {\n    const f = attr + '_field', s = attr + '_scale'\n    for (const mark of marks) {\n      const m = mark as any, field = m[f], scale = m[s]\n      if (scale === 'time') return 't'\n      if (isS(field)) {\n        for (const d of ds) {\n          const v = d[field]\n          if (isF(v)) return 'c'\n          if (isS(v)) return 'd'\n        }\n      }\n    }\n    return 'c'\n  },\n  spaceTypes: Dict<SpaceT> = {\n    cc: SpaceT.CC, dd: SpaceT.DD, tt: SpaceT.TT,\n    dc: SpaceT.DC, cd: SpaceT.CD,\n    tc: SpaceT.TC, ct: SpaceT.CT,\n    td: SpaceT.TD, dt: SpaceT.DT,\n  },\n  dummyDatum: any = {},\n  makeFormatFunc = (field: S, render: HandlebarsTemplateDelegate<any>) => (datum: any, value?: any) => {\n    const x = datum ? datum[field] : value\n    if (x != null) {\n      dummyDatum[field] = x\n      return render(dummyDatum)\n    }\n    return ''\n  },\n  transposeMark = (mark: Mark) => { // WARNING: Can modify marks in-place!\n    const m: any = mark\n    for (let k = 0; k < xProps.length; k++) {\n      const x = xProps[k], y = yProps[k]\n      for (let i = 0; i < x.length; i++) {\n        const tmp = m[x[i]]\n        m[x[i]] = m[y[i]]\n        m[y[i]] = tmp\n      }\n    }\n    for (let i = 0; i < xExtraProps.length; i++) {\n      const x = xExtraProps[i], y = yExtraProps[i]\n      const tmp = m[x]\n      m[x] = m[y]\n      m[y] = tmp\n    }\n  },\n  refactorMark = (mark: Mark): MarkExt => {\n    // if any fields are passed in as format expressions, separate them out into _field and _format\n    const m = mark as any\n    for (const [plainAttr, fieldAttr, formatAttr] of formattables) {\n      const expr = m[plainAttr]\n      if (isS(expr)) {\n        const fmts = parseFormat(expr)\n        if (fmts) {\n          const [field, fmt] = fmts\n          m[plainAttr] = undefined\n          m[fieldAttr] = field\n          if (fmt) m[formatAttr] = makeFormatFunc(field, fmt)\n        }\n      }\n    }\n    return mark\n  },\n  refactorData = (ds: any[], marks: MarkExt[]): any[] => {\n    for (const m of marks) {\n      if (m.x_scale === 'time') {\n        for (const { x_field, x0_field } of marks) {\n          if (isS(x_field)) convertToDates(ds, x_field)\n          if (isS(x0_field)) convertToDates(ds, x0_field)\n        }\n        if (isS(m.x)) m.x = new Date(m.x)\n        if (isS(m.x0)) m.x0 = new Date(m.x0)\n        break\n      }\n    }\n    for (const m of marks) {\n      if (m.y_scale === 'time') {\n        for (const { y_field, y0_field } of marks) {\n          if (isS(y_field)) convertToDates(ds, y_field)\n          if (isS(y0_field)) convertToDates(ds, y0_field)\n        }\n        if (isS(m.y)) m.y = new Date(m.y)\n        if (isS(m.y0)) m.y0 = new Date(m.y0)\n        break\n      }\n    }\n    for (const { x_field, x0_field } of marks) {\n      if (isS(x_field) && isS(x0_field)) {\n        convertToPairs(ds, x0_field, x_field, x_field)\n      }\n    }\n    for (const { y_field, y0_field } of marks) {\n      if (isS(y_field) && isS(y0_field)) {\n        convertToPairs(ds, y0_field, y_field, y_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, x1_field, x2_field, y_field } = mark\n      if (type === 'interval' && isS(x1_field) && isS(x2_field) && isS(y_field)) { // histogram on x\n        mark.x_field = x1_field + ' - ' + x2_field\n        convertToPairs(ds, x1_field, x2_field, mark.x_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, y1_field, y2_field, x_field } = mark\n      if (type === 'interval' && isS(y1_field) && isS(y2_field) && isS(x_field)) { // histogram on y\n        mark.y_field = y1_field + ' - ' + y2_field\n        convertToPairs(ds, y1_field, y2_field, mark.y_field)\n      }\n    }\n    return ds\n  },\n  makeNote = ({\n    x, x0, y, y0, label,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash,\n    ref_stroke_color, ref_stroke_opacity, ref_stroke_dash, ref_stroke_size,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: Mark): AnnotationOption[] => {\n\n    // XXX pass 'start'/'end' if axis is categorical\n\n    const\n      labelStyle = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      ),\n      shapeStyle = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash),\n      lineStyle = makeShapeStyle(undefined, undefined, ref_stroke_color, ref_stroke_opacity, ref_stroke_size, ref_stroke_dash)\n\n    if (x != null && y != null) {\n      if (x0 != null && y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, y0] as AnnotationPosition,\n          end: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : undefined,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const marker: DataMarkerOption = {\n          type: 'dataMarker',\n          position: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          point: { style: shapeStyle },\n          line: { style: lineStyle }\n        }\n        return [marker]\n      }\n    } else if (x != null) {\n      if (x0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: [x, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    } else { // y != null\n      if (y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: ['min', y0] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: ['min', y] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    }\n  },\n  makeGeom = ({\n    type, x_field, y_field,\n    color_field, color_range, color_domain, color,\n    shape_field, shape_range, shape,\n    size_field, size_range, size,\n    stack,\n    dodge, dodge_field,\n    curve,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_dash, stroke_size,\n    label_field, label_format, label_offset, label_offset_x, label_offset_y, label_rotation, label_position, label_overlap,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: MarkExt): GeometryOption => {\n    const o: GeometryOption = {}\n    if (isS(type)) o.type = type\n\n    const adjust: AdjustOption[] = []\n    // TODO set marginRatio=1 polar coords\n    if (isS(dodge_field)) {\n      adjust.push({ type: 'dodge', marginRatio: 0, dodgeBy: dodge_field })\n    } else if (dodge === 'auto') {\n      adjust.push({ type: 'dodge', marginRatio: 0 })\n    }\n    if (stack === 'auto') adjust.push({ type: 'stack' })\n    if (adjust.length) o.adjust = adjust\n    if (isS(x_field) && isS(y_field)) o.position = { fields: [x_field, y_field] }\n    if (isS(color_field)) {\n      const colors = isS(color_range) ? split(color_range).map(cssVarValue) : cat10\n      o.color = { fields: [color_field], values: colors }\n      if (color_domain && color_domain.length == colors.length) {\n        const domain_colors = color_domain.reduce((acc, value, i) => {\n          acc[value] = colors[i]\n          return acc\n        }, {} as Dict<S>)\n        o.color.callback = (x: S) => domain_colors[x]\n      }\n    } else {\n      o.color = isS(color) ? cssVarValue(color) : getComputedStyle(document.documentElement).getPropertyValue('--gray').trim()\n    }\n    if (isS(shape_field)) {\n      if (isS(shape_range)) {\n        o.shape = { fields: [shape_field], values: split(shape_range) }\n      } else {\n        o.shape = { fields: [shape_field] }\n      }\n    } else if (isS(shape)) {\n      o.shape = shape\n    }\n    if (isS(size_field)) {\n      if (isS(size_range)) {\n        o.size = { fields: [size_field], values: parseInts(size_range) }\n      } else {\n        o.size = { fields: [size_field] }\n      }\n    } else if (isF(size)) {\n      o.size = size\n    }\n    if (isS(label_field)) {\n      const styles = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      )\n      const c: Dict<any> = {}\n      if (styles) c.style = styles\n      switch (label_overlap) {\n        case 'hide': c.layout = { type: 'overlap' }; break\n        case 'overlap': c.layout = { type: 'fixedOverlap' }; break\n        case 'constrain': c.layout = { type: 'limitInShape' }; break\n      }\n      if (isF(label_offset)) c.offset = label_offset\n      if (isF(label_offset_x)) c.offsetX = label_offset_x\n      if (isF(label_offset_y)) c.offsetY = label_offset_y\n      if (isS(label_rotation)) {\n        const i_label_rotation = parseI(label_rotation)\n        if (isNaN(i_label_rotation)) {\n          c.autoRotate = label_rotation === 'none' ? false : true\n        } else {\n          c.rotate = i_label_rotation * Math.PI / 180\n        }\n      }\n      switch (label_position) {\n        case 'top': case 'bottom': case 'middle': case 'left': case 'right': c.position = label_position as any\n      }\n\n      if (label_format) {\n        o.label = {\n          fields: [label_field],\n          callback: (label) => ({ content: label_format(null, label) })\n        }\n      } else {\n        o.label = { fields: [label_field] }\n      }\n\n      if (Object.keys(c).length) o.label.cfg = c\n    }\n    if (isS(curve)) {\n      switch (curve) {\n        case 'smooth': o.shape = 'smooth'; break\n        case 'step-before': o.shape = 'vh'; break\n        case 'step': o.shape = 'hvh'; break\n        case 'step-after': o.shape = 'hv'; break\n      }\n    }\n    const style = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash)\n    if (style) o.style = style\n\n    return o\n  },\n  makeShapeStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, stroke_dash?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = cssVarValue(fill_color)\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = cssVarValue(stroke_color)\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isS(stroke_dash)) s.lineDash = parseInts(stroke_dash)\n    return Object.keys(s).length ? s : undefined\n  },\n  makeTextStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, font_size?: F, font_weight?: S, line_height?: F, align?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = cssVarValue(fill_color)\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = cssVarValue(stroke_color)\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isF(font_size)) s.fontSize = font_size\n    if (isS(font_weight)) {\n      const u_font_weight = parseU(font_weight)\n      s.fontWeight = isNaN(u_font_weight) ? font_weight : u_font_weight\n    }\n    if (isF(line_height)) s.lineHeight = line_height\n    if (isS(align)) s.textAlign = align\n    return Object.keys(s).length ? s : undefined\n  },\n  makeScales = (marks: MarkExt[]): [Record<S, ScaleOption>, Record<S, AxisOption>] => {\n    const\n      scales: Record<S, ScaleOption> = {},\n      axes: Record<S, AxisOption> = {}\n\n    for (const m of marks) {\n      if (m.x_field) {\n        const [x_scale, x_axis] = makeScale(m.x_scale, m.x_format, m.x_title, m.x_min, m.x_max, m.x_nice)\n        scales[m.x_field] = x_scale\n        if (x_axis) axes[m.x_field] = x_axis\n        break\n      }\n    }\n\n    for (const m of marks) {\n      if (m.y_field) {\n        const [y_scale, y_axis] = makeScale(m.y_scale, m.y_format, m.y_title, m.y_min, m.y_max, m.y_nice)\n        scales[m.y_field] = y_scale\n        if (y_axis) axes[m.y_field] = y_axis\n        break\n      }\n    }\n\n    return [scales, axes]\n  },\n  fixScaleType = (t: S): S => {\n    switch (t) {\n      case 'time-category': return 'timeCat'\n      case 'power': return 'pow'\n    }\n    return t\n  },\n  makeScale = (typ: S | undefined, format: Fmt | undefined, title: S | undefined, min: S | F | undefined, max: S | F | undefined, nice: B | undefined): [ScaleOption, AxisOption | null] => {\n    const\n      scale: ScaleOption = {},\n      axis: AxisOption = { label: { autoHide: false } } // Bug in G2? `autoHide` should be set to false by default (it is not).\n    if (isS(typ)) scale.type = fixScaleType(typ) as any\n    if (format) scale.formatter = (v: any) => format(undefined, v)\n    if (isS(title)) {\n      scale.alias = title\n      // HACK ALERT!\n      // The scale alias is not rendered by G2 unless the axis title is non-empty.\n      axis.title = {}\n    }\n    if (isF(min)) scale.min = min\n    if (isF(max)) scale.max = max\n    scale.nice = isB(nice) ? nice : true\n    return [scale, axis]\n  },\n  getCoordType = (marks: Mark[]): S | undefined => {\n    for (const { coord } of marks) if (isS(coord)) return coord\n    return undefined\n  },\n  makeCoord = (space: SpaceT, marks: Mark[]): CoordinateOption | undefined => {\n\n    // HACK ALERT!\n    // Flip all x* and y* properties if the x-variable is continuous.\n    // This is because the underlying lib expects x-variables to be always discrete.\n    // So if the coord space is continuous-discrete, flip x/y and set a transpose transform on the coords.\n\n    const\n      type = getCoordType(marks) as any,\n      transpose = space === SpaceT.CD,\n      actions: CoordinateActions[] | undefined = transpose ? [['transpose']] : undefined\n\n    if (transpose) for (const mark of marks) transposeMark(mark)\n\n    return (\n      type\n        ? actions ? { type, actions } : { type }\n        : actions ? { actions } : undefined\n    )\n  },\n  makeMarks = (marks: Mark[]): [GeometryOption[], AnnotationOption[]] => {\n    const\n      geometries: GeometryOption[] = [],\n      annotations: AnnotationOption[] = []\n\n    for (const m of marks) {\n      const { x, y } = m\n      if (x != null || y != null) {\n        annotations.push(...makeNote(m))\n      } else {\n        geometries.push(makeGeom(m))\n      }\n    }\n\n    return [geometries, annotations]\n  },\n  makeChart = (el: HTMLElement, space: SpaceT, marks: Mark[]): ChartCfg => {\n    // WARNING: makeCoord() must be called before other functions.\n    const\n      coordinate = makeCoord(space, marks), // WARNING: this call may transpose x/y in-place.\n      [scales, axes] = makeScales(marks),\n      [geometries, annotations] = makeMarks(marks)\n\n    return {\n      container: el,\n      autoFit: true,\n      options: {\n        animate: false,\n        coordinate,\n        scales,\n        axes,\n        geometries,\n        annotations,\n        interactions: [\n          { type: 'view-zoom' },\n          { type: 'drag-move' }, // custom\n        ],\n        tooltip: {\n          showCrosshairs: true,\n          crosshairs: { type: 'xy' }\n          // XXX pass container element\n        }\n      }\n    }\n  }\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    body: {\n      flexGrow: 1,\n      display: 'flex',\n      $nest: {\n        'canvas': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }\n      }\n    },\n  })\n\n/** Create a visualization for display inside a form. */\nexport interface Visualization {\n  /** The plot to be rendered in this visualization. */\n  plot: Plot\n  /** Data for this visualization. */\n  data: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The hight of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** The events to capture on this visualization. */\n  events?: S[]\n}\n\nexport const\n  XVisualization = bond(({ model }: { model: Visualization }) => {\n    let\n      currentChart: Chart | null = null,\n      currentPlot: Plot | null = null\n    const\n      container = React.createRef<HTMLDivElement>(),\n      init = () => {\n        // Map CSS var colors to their hex values.\n        cat10 = cat10.map(cssVarValue)\n        const el = container.current\n        if (!el) return\n        // If card does not have specified height, it uses content. Since the wrapper is empty, it takes very little space - set to 300px by default.\n        if (el.clientHeight < 30) el.style.height = '300px'\n        const\n          raw_data = unpack<any[]>(model.data),\n          raw_plot = unpack<Plot>(model.plot),\n          marks = raw_plot.marks.map(refactorMark),\n          plot: Plot = { marks: marks },\n          space = spaceTypeOf(raw_data, marks),\n          data = refactorData(raw_data, plot.marks),\n          chart = plot.marks ? new Chart(makeChart(el, space, plot.marks)) : null\n        currentPlot = plot\n        if (chart) {\n          currentChart = chart\n          chart.data(data)\n          if (model.events) {\n            for (const event of model.events) {\n              switch (event) {\n                case 'select_marks': {\n                  chart.interaction('element-single-selected')\n                  chart.on('element:statechange', (ev: any) => {\n                    const e = ev.gEvent.originalEvent\n                    if (e.stateStatus) {\n                      if (model.name) {\n                        qd.events[model.name] = { select_marks: [e.element?.data] }\n                        qd.sync()\n                      }\n                    }\n                  })\n                }\n              }\n            }\n          }\n          chart.render()\n        }\n      },\n      update = () => {\n        const el = container.current\n        if (!el || !currentChart || !currentPlot) return\n        const\n          raw_data = unpack(model.data) as any[],\n          data = refactorData(raw_data, currentPlot.marks)\n        currentChart.changeData(data)\n      },\n      render = () => {\n        const\n          { width = 'auto', height = 'auto', visible, name } = model,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { flexGrow: 1 }\n            : { width, height }\n        return <div data-test={name} style={{ ...style, ...displayMixin(visible) }} ref={container} />\n      }\n    return { init, update, render }\n  })\n\n/** Create a card displaying a plot. */\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** Data for this card. */\n  data: Rec\n  /** The plot to be displayed in this card. */\n  plot: Plot\n  /** The events to capture on this card. */\n  events?: S[]\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const { title = 'Untitled', plot, data, events } = state\n        return (\n          <div className={css.card}>\n            <div className='s12 w6'>{title}</div>\n            <div className={css.body}>\n              <XVisualization model={{ name, plot, data, events }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('plot', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, box, Id, qd, S, U } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a picker.\n * Pickers are used to select one or more choices, such as tags or files, from a list.\n * Use a picker to allow the user to quickly search for or manage a few tags or files.\n*/\nexport interface Picker {\n  /** An identifying name for this component. */\n  name: Id\n  /** The choices to be presented. */\n  choices: Choice[]\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** Maximum number of selectable choices. Defaults to no limit. */\n  max_choices?: U\n  /** Controls whether the picker should be disabled or not. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst pickerSuggestionsProps: Fluent.IBasePickerSuggestionsProps = {\n  suggestionsHeaderText: 'Suggestions',\n  noResultsFoundText: 'No results found',\n}\n\nexport const XPicker = bond(({ model: m }: { model: Picker }) => {\n  const\n    tags: Fluent.ITag[] = m.choices.map(({ name, label }) => ({ key: name, name: label || name })),\n    selectedTagsB = box<Fluent.ITag[]>(tags.filter(({ key }) => m.values?.includes(key as S))),\n    filterSuggestedTags = (filterText: S, selectedTags?: Fluent.ITag[]) => {\n      if (!filterText) return []\n      const isAlreadySelected = (t: Fluent.ITag) => selectedTags && selectedTags.includes(t)\n      const isStringMatch = (name: S) => name.toLowerCase().includes(filterText.toLowerCase())\n      return tags.filter(t => isStringMatch(t.name) && !isAlreadySelected(t))\n    },\n    onChange = (items?: Fluent.ITag[]) => {\n      selectedTagsB(items || [])\n      qd.args[m.name] = items ? items.map(({ key }) => key) : null\n      if (m.trigger) qd.sync()\n    },\n    onEmptyResolveSuggestions = () => tags,\n    init = () => qd.args[m.name] = m.values || null,\n    render = () => (\n      <div style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Text>{m.label}</Fluent.Text>}\n        <Fluent.TagPicker\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          removeButtonAriaLabel=\"Remove\"\n          onResolveSuggestions={filterSuggestedTags}\n          onChange={onChange}\n          pickerSuggestionsProps={pickerSuggestionsProps}\n          itemLimit={m.max_choices}\n          selectedItems={selectedTagsB()}\n          disabled={m.disabled}\n          onEmptyResolveSuggestions={onEmptyResolveSuggestions}\n        />\n      </div>\n    )\n\n  return { init, render, selectedTagsB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { F, S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a progress bar.\n *\n * Progress bars are used to show the completion status of an operation lasting more than 2 seconds.\n * If the state of progress cannot be determined, do not set a value.\n * Progress bars feature a bar showing total units to completion, and total units finished.\n * The label appears above the bar, and the caption appears below.\n * The label should tell someone exactly what the operation is doing.\n *\n * Examples of formatting include:\n * [Object] is being [operation name], or\n * [Object] is being [operation name] to [destination name] or\n * [Object] is being [operation name] from [source name] to [destination name]\n *\n * Status text is generally in units elapsed and total units.\n * Real-world examples include copying files to a storage location, saving edits to a file, and more.\n * Use units that are informative and relevant to give the best idea to users of how long the operation will take to complete.\n * Avoid time units as they are rarely accurate enough to be trustworthy.\n * Also, combine steps of a complex operation into one total bar to avoid “rewinding” the bar.\n * Instead change the label to reflect the change if necessary. Bars moving backwards reduce confidence in the service.\n*/\nexport interface Progress {\n  /** The text displayed above the bar. */\n  label: S\n  /** The text displayed below the bar. */\n  caption?: S\n  /** The progress, between 0.0 and 1.0, or -1 (default) if indeterminate. */\n  value?: F\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XProgress = ({ model }: { model: Progress }) => {\n    const\n      { label, caption = 'Please wait...', value, visible, name } = model\n    return (\n      <div data-test={name} style={displayMixin(visible)}>\n        <Fluent.ProgressIndicator\n          label={label}\n          description={caption}\n          percentComplete={value}\n        />\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport InputRange, { Range } from 'react-input-range'\nimport 'react-input-range/lib/css/index.css'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, box, F, Id, qd, S, U } from './qd'\nimport { displayMixin, padding } from './theme'\n\nconst\n  css = stylesheet({\n    container: {\n      padding: padding(0, 8),\n      $nest: {\n        '.input-range': {\n          marginTop: 15,\n          marginBottom: 35,\n          $nest: {\n            '&__slider': {\n              borderWidth: 2,\n              borderRadius: 10,\n              borderColor: 'var(--neutralPrimary)',\n              background: 'var(--white)',\n              width: 16,\n              height: 16,\n              boxSizing: 'border-box',\n              cursor: 'initial',\n              $nest: {\n                '&:active': {\n                  transform: 'none'\n                }\n              }\n            },\n            '&__label': {\n              fontFamily: 'inherit',\n              fontSize: 14,\n              fontWeight: 600\n            },\n            '&__label-container': {\n              color: 'var(--neutralPrimary)'\n            },\n            '&__track': {\n              height: 4,\n              borderRadius: 4,\n              background: 'var(--neutralTertiaryAlt)',\n              cursor: 'initial',\n              $nest: {\n                '&--active': {\n                  background: 'var(--neutralSecondary)',\n                },\n              }\n            },\n          }\n        },\n        '&:active .input-range': {\n          $nest: {\n            '&__slider': {\n              borderColor: 'var(--themeDark)',\n            },\n            '&__track': {\n              background: 'var(--themeLighter)',\n            },\n            '&__track--active': {\n              background: 'var(--themeDark)',\n            },\n          }\n        },\n        '&:hover .input-range': {\n          $nest: {\n            '&__slider': {\n              borderColor: 'var(--themePrimary)',\n            },\n            '&__track': {\n              background: 'var(--themeLighter)',\n            },\n            '&__track--active': {\n              background: 'var(--themePrimary)',\n            },\n          }\n        },\n      }\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  })\n\n/**\n * Create a range slider.\n *\n * A range slider is an element used to select a value range. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * Knobs or levers are dragged to one end or the other to make the choice, indicating the current max and min value.\n *\n*/\nexport interface RangeSlider {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. Defaults to 0. */\n  min?: F\n  /** The maximum value of the slider. Defaults to 100. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The lower bound of the selected range. */\n  min_value?: F\n  /** The upper bound of the selected range. */\n  max_value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const XRangeSlider = bond(({ model: m }: { model: RangeSlider }) => {\n  const\n    { min = 0, max = 100, step = 1 } = m,\n    value = {\n      min: (m.min_value && m.min_value > min && m.min_value <= max) ? m.min_value : min,\n      max: (m.max_value && m.max_value > min && m.max_value <= max) ? m.max_value : max\n    }\n\n  qd.args[m.name] = Object.values(value as Range)\n\n  const\n    valueB = box<Range>(value),\n    onChange = (val: Range | U) => {\n      valueB(val as Range)\n      qd.args[m.name] = Object.values(val as Range)\n      if (m.trigger) qd.sync()\n    },\n    render = () => (\n      <div data-test={m.name} style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Label disabled={m.disabled}>{m.label}</Fluent.Label>}\n        <div className={`${css.container} ${m.disabled ? css.disabled : ''}`}>\n          <InputRange maxValue={max} minValue={min} step={step} disabled={m.disabled} allowSameValues value={valueB()} onChange={onChange} />\n        </div>\n      </div>\n    )\n  return { render, valueB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    separator: {\n      boxSizing: 'border-box',\n    },\n  })\n\n/**\n * Create a separator.\n *\n * A separator visually separates content into groups.\n */\nexport interface Separator {\n  /** The text displayed on the separator. */\n  label?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XSeparator = ({ model: m }: { model: Separator }) => (\n    <div data-test={m.name} className={css.separator} style={displayMixin(m.visible)}>\n      <Fluent.Separator>{m.label}</Fluent.Separator>\n    </div>\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a slider.\n *\n * A slider is an element used to set a value. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * A knob or lever is dragged to one end or the other to make the choice, indicating the current value.\n * Marks on the slider bar can show values and users can choose where they want to drag the knob or lever to\n * set the value.\n *\n * A slider is a good choice when you know that users think of the value as a relative quantity, not a numeric value.\n * For example, users think about setting their audio volume to low or medium — not about setting the\n * value to two or five.\n *\n * The default value of the slider will be zero or be constrained to the min and max values. The min will be returned\n * if the value is set under the min and the max will be returned if set higher than the max value.\n*/\nexport interface Slider {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. */\n  min?: F\n  /** The maximum value of the slider. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The current value of the slider. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSlider = bond(({ model: m }: { model: Slider }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n    qd.args[m.name] = defaultValue\n    const\n      onChange = (v: number) => qd.args[m.name] = v,\n      onChanged = (_event: MouseEvent | KeyboardEvent | TouchEvent, _value: number) => { if (m.trigger) qd.sync() },\n      render = () => (\n        <Fluent.Slider\n          data-test={m.name}\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          buttonProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={defaultValue}\n          showValue={true}\n          originFromZero={min < 0 && max >= 0}\n          onChange={onChange}\n          onChanged={onChanged}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a spinbox.\n *\n * A spinbox allows the user to incrementally adjust a value in small steps.\n * It is mainly used for numeric values, but other values are supported too.\n */\nexport interface Spinbox {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the spinbox. */\n  min?: F\n  /** The maximum value of the spinbox. */\n  max?: F\n  /** The difference between two adjacent values of the spinbox. */\n  step?: F\n  /** The current value of the spinbox. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSpinbox = bond(({ model: m }: { model: Spinbox }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n\n    qd.args[m.name] = defaultValue\n\n    const\n      parseValue = (v: string) => {\n        const x = parseFloat(v)\n        return (!isNaN(x) && isFinite(x)) ? x : value\n      },\n      onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n        qd.args[m.name] = parseValue(e.target.value)\n      },\n      onIncrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value + step > max) ? max : value + step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      onDecrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value - step < min) ? min : value - step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      render = () => (\n        <Fluent.SpinButton\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={`${value}`}\n          onBlur={onBlur}\n          onIncrement={onIncrement}\n          onDecrement={onDecrement}\n          disabled={m.disabled}\n        />\n      )\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, Dict, S } from './qd'\nimport { clas, padding, cssVar } from './theme'\n\n/** Create a set of stats laid out horizontally. */\nexport interface Stats {\n  /** The individual stats to be displayed. */\n  items: Stat[]\n  /** Specifies how to lay out the individual stats. Defaults to 'start'. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Whether to display the stats with a contrasting background. */\n  inset?: B\n}\n\n/** Create a stat (a label-value pair) for displaying a metric. */\nexport interface Stat {\n  /** The label for the metric. */\n  label: S\n  /** The value of the metric. */\n  value?: S\n  /** The caption displayed below the primary value. */\n  caption?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  css = stylesheet({\n    stats: {\n      display: 'flex',\n      alignItems: 'flex-start'\n    },\n    inset: {\n      background: cssVar('$page'),\n      padding: padding(10, 15),\n    },\n    stat: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    lhs: {\n      width: 45,\n      marginRight: '0.5em',\n    },\n    icon: {\n      fontSize: 45,\n    },\n    statCaption: {\n      color: cssVar('$text5')\n    }\n  }),\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  statMargin = '2em'\n\n\nexport const\n  XStats = ({ model: m }: { model: Stats }) => {\n    const\n      statStyle: React.CSSProperties = m.justify\n        ? m.justify === 'start'\n          ? { marginRight: statMargin }\n          : m.justify === 'end'\n            ? { marginLeft: statMargin }\n            : {}\n        : { marginRight: statMargin },\n      justification = justifications[m.justify ?? ''],\n      stats = m.items.map(({ label, value, caption, icon, icon_color }, i) => (\n        <div key={`${i}:${label}`} className={css.stat} style={statStyle}>\n          {icon && (\n            <div className={css.lhs} style={icon_color ? { color: cssVar(icon_color) } : undefined}>\n              <FontIcon className={css.icon} iconName={icon} />\n            </div>\n          )}\n          <div>\n            <div className='s12 w5'>{label}</div>\n            {value && <div className='s24 w3'>{value}</div>}\n            {caption && <div className={clas(css.statCaption, 's13')}>{caption}</div>}\n          </div>\n        </div>\n      ))\n\n    return (\n      <div className={clas(css.stats, m.inset ? css.inset : '')} style={{ justifyContent: justification }}>{stats}</div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, Id, S, U } from './qd'\nimport { displayMixin, rem } from './theme'\n\n/**\n * Create a step for a stepper.\n */\ninterface Step {\n  /** Text displayed below icon. */\n  label: S\n  /** Icon to be displayed. */\n  icon?: S\n  /** Indicates whether this step has already been completed. */\n  done?: B\n}\n\n/**\n  Create a component that displays a sequence of steps in a process.\n  The steps keep users informed about where they are in the process and how much is left to complete.\n*/\nexport interface Stepper {\n  /** An identifying name for this component. */\n  name: Id\n  /** The sequence of steps to be displayed. */\n  items: Step[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  css = stylesheet({\n    stepNumber: {\n      background: 'var(--text)',\n      color: 'var(--card)',\n      alignItems: 'center',\n      borderRadius: '50%',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      fontSize: rem(0.8),\n      height: 24,\n      minWidth: 24,\n      width: 24,\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  }),\n  iconStyles: Fluent.IIconStyles = { root: { fontSize: 24 } }\n\nexport const\n  XStepper = bond(({ model: m }: { model: Stepper }) => {\n    const\n      steps = m.items,\n      disabledStyles = (stepIdx: U) => stepIdx > 0 && !steps[stepIdx - 1].done ? css.disabled : '',\n      createStep = (step: Step, i: U) => (\n        <React.Fragment key={i}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' verticalAlign='center' grow={1}>\n            <Fluent.Stack\n              className={!step.done ? disabledStyles(i) : ''}\n              horizontalAlign='center'\n              styles={{ root: { paddingRight: 10, paddingLeft: 10 } }}\n            >\n              {\n                step.done\n                  ? <Fluent.Icon styles={iconStyles} iconName='CompletedSolid' />\n                  : step.icon\n                    ? <Fluent.Icon styles={iconStyles} iconName={step.icon} />\n                    : <span className={css.stepNumber}>{i + 1}</span>\n              }\n              <Fluent.Text block nowrap styles={{ root: { padding: 10 } }}>{step.label}</Fluent.Text>\n            </Fluent.Stack>\n          </Fluent.Stack>\n          {(steps.length - 1) !== i && <Fluent.Separator styles={{ root: { width: '100%' } }} />}\n        </React.Fragment>\n      ),\n      render = () => (\n        <Fluent.Stack\n          style={displayMixin(m.visible)}\n          data-test={m.name}\n          horizontal\n          horizontalAlign='space-between'\n          verticalAlign='center'\n        >\n          {steps.map(createStep)}\n        </Fluent.Stack>\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S } from './qd'\n\n/**\n * Create a cell type that renders a column's cells as icons instead of plain text.\n * If set on a column, the cell value is interpreted as the name of the icon to be displayed.\n*/\nexport interface IconTableCellType {\n  /** Icon color. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XIconTableCellType = ({ model: m, icon }: { model: IconTableCellType, icon: S }) => (\n  <Fluent.Icon data-test={m.name} iconName={icon} styles={{ root: { fontSize: '1.2rem', color: m.color || 'inherit' } }} />\n)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S, U } from '../qd'\n\n\ninterface Props {\n  thickness: U\n  color: S\n  value: F\n}\n\nconst css = stylesheet({\n  container: {\n    // Height 100% is not working in Safari. Without this, container has 0 height and d3 cannot compute properly.\n    position: 'absolute',\n    top: 0, left: 0, right: 0, bottom: 0\n  }\n})\n\nexport const ProgressArc = ({ thickness, color, value }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement>(null),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        diameter = Math.min(width, height),\n        outerRadius = diameter / 2,\n        innerRadius = diameter / 2 - thickness,\n        slot = d3.arc()({\n          outerRadius,\n          innerRadius,\n          startAngle: 0,\n          endAngle: 2 * Math.PI,\n        }),\n        bar = d3.arc()({\n          outerRadius,\n          innerRadius,\n          startAngle: 0,\n          endAngle: 2 * Math.PI * value,\n        })\n\n      setContent(\n        <svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>\n          <g transform={diameter === height ? `translate(${(width - (2 * outerRadius)) / 2}, 0)` : `translate(0, ${(height - (2 * outerRadius)) / 2})`}>\n            <path d={slot as S} fill={color} fillOpacity={0.15} transform={`translate(${outerRadius},${outerRadius})`} />\n            <path d={bar as S} fill={color} transform={`translate(${outerRadius},${outerRadius})`} />\n          </g>\n        </svg>\n      )\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [thickness, color, value])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { ProgressArc } from './parts/progress_arc'\nimport { F, S } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    container: {\n      position: 'relative',\n      width: 50,\n      height: 50\n    },\n    percentContainer: {\n      position: 'absolute',\n      top: 0, left: 0, bottom: 0, right: 0\n    },\n    percent: {\n      opacity: 0.5,\n    },\n  })\n\n/**\n * Create a cell type that renders a column's cells as progress bars instead of plain text.\n * If set on a column, the cell value must be between 0.0 and 1.0.\n*/\nexport interface ProgressTableCellType {\n  /** Color of the progress arc. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XProgressTableCellType = ({ model: m, progress }: { model: ProgressTableCellType, progress: F }) => (\n  <div data-test={m.name} className={css.container}>\n    <ProgressArc thickness={2} color={cssVar(m.color || '$red')} value={progress} />\n    <Fluent.Stack horizontalAlign='center' verticalAlign='center' className={clas(css.percentContainer, 's12')}>\n      <div className={css.percent}>{`${Math.round(progress * 100)}%`}</div>\n    </Fluent.Stack>\n  </div >\n)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { IconTableCellType, XIconTableCellType } from \"./icon_table_cell_type\"\nimport { ProgressTableCellType, XProgressTableCellType } from \"./progress_table_cell_type\"\nimport { B, bond, box, Dict, Id, qd, S, U } from './qd'\nimport { displayMixin, rem } from './theme'\n\n/** Defines cell content to be rendered instead of a simple text. */\ninterface TableCellType {\n  progress?: ProgressTableCellType\n  icon?: IconTableCellType\n}\n\n/** Create a table column. */\ninterface TableColumn {\n  /** An identifying name for this column. */\n  name: Id\n  /** The text displayed on the column header. */\n  label: S\n  /** The minimum width of this column, e.g. '50px'. Only `px` units are supported at this time. */\n  min_width?: S\n  /** The maximum width of this column, e.g. '100px'. Only `px` units are supported at this time. */\n  max_width?: S\n  /** Indicates whether the column is sortable. */\n  sortable?: B\n  /** Indicates whether the contents of this column can be searched through. Enables a search box for the table if true. */\n  searchable?: B\n  /** Indicates whether the contents of this column are displayed as filters in a dropdown. */\n  filterable?: B\n  /** Indicates whether each cell in this column should be displayed as a clickable link. */\n  link?: B\n  /** Defines the data type of this column. Defaults to `string`. */\n  data_type?: 'string' | 'number' | 'time'\n  /** Defines how to render each cell in this column. Defaults to plain text. */\n  cell_type?: TableCellType\n}\n\n/** Create a table row. */\ninterface TableRow {\n  /** An identifying name for this row. */\n  name: Id\n  /** The cells in this row (displayed left to right). */\n  cells: S[]\n}\n\n\n/**\n * Create an interactive table.\n *\n * This table differs from a markdown table in that it supports clicking or selecting rows. If you simply want to\n * display a non-interactive table of information, use a markdown table.\n *\n * If `multiple` is set to False (default), each row in the table is clickable. When a row is clicked, the form is\n * submitted automatically, and `q.args.table_name` is set to `[row_name]`, where `table_name` is the `name` of\n * the table, and `row_name` is the `name` of the row that was clicked on.\n *\n * If `multiple` is set to True, each row in the table is selectable. A row can be selected by clicking on it.\n * Multiple rows can be selected either by shift+clicking or using marquee selection. When the form is submitted,\n * `q.args.table_name` is set to `[row1_name, row2_name, ...]` where `table_name` is the `name` of the table,\n * and `row1_name`, `row2_name` are the `name` of the rows that were selected. Note that if `multiple` is\n * set to True, the form is not submitted automatically, and one or more buttons are required in the form to trigger\n * submission.\n */\nexport interface Table {\n  /** An identifying name for this component. */\n  name: Id\n  /** The columns in this table. */\n  columns: TableColumn[]\n  /** The rows in this table. */\n  rows: TableRow[]\n  /** True to allow multiple rows to be selected. */\n  multiple?: B\n  /** True to allow group by feature. */\n  groupable?: B\n  /** Indicates whether the contents of this table can be downloaded and saved as a CSV file. Defaults to False. */\n  downloadable?: B\n  /** Indicates whether a Reset button should be displayed to reset search / filter / group-by values to their defaults. Defaults to False. */\n  resettable?: B\n  /** The height of the table, e.g. '400px', '50%', etc. */\n  height?: S\n  /** The names of the selected rows. If this parameter is set, multiple selections will be allowed (`multiple` is assumed to be `True`). */\n  values?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\ntype QColumn = Fluent.IColumn & {\n  dataType?: S\n  cellType?: TableCellType\n  isSortable?: B\n}\n\nconst\n  css = stylesheet({\n    // HACK: Put sorting icon on right (same as filter).\n    sortableHeader: {\n      $nest: {\n        '.ms-DetailsHeader-cellName': {\n          position: 'relative',\n          paddingRight: 15\n        }\n      }\n    },\n    sortingIcon: {\n      marginLeft: 10,\n      fontSize: rem(1.1),\n      position: 'absolute',\n      top: -2,\n      right: -5\n    },\n    // HACK: incorrect width recalculated after changing to \"group by mode\" - collapse icon in header\n    // causes horizontal overflow for whole table.\n    hideCellGroupCollapse: {\n      $nest: {\n        'div[class*=\"cellIsGroupExpander\"]': {\n          display: 'none'\n        }\n      }\n    }\n  }),\n  groupByF = function <T extends Dict<any>>(arr: T[], key: S): Dict<any> {\n    return arr.reduce((rv, x: T) => {\n      (rv[x[key]] = rv[x[key]] || []).push(x)\n      return rv\n    }, {} as Dict<any>)\n  },\n  sortingF = (column: QColumn, sortAsc: B) => (rowA: any, rowB: any) => {\n    let a = rowA[column.key], b = rowB[column.key]\n\n    switch (column.dataType) {\n      case 'number':\n        a = +a\n        b = +b\n        return sortAsc ? a - b : b - a\n      case 'time':\n        a = Date.parse(a)\n        b = Date.parse(b)\n        break\n      default:\n        a = a.toLowerCase()\n        b = b.toLowerCase()\n        break\n    }\n\n    return sortAsc\n      ? b > a ? -1 : 1\n      : b > a ? 1 : -1\n  },\n  formatNum = (num: U) => num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"),\n  toCSV = (data: unknown[][]): S => data.map(row => {\n    const line = JSON.stringify(row)\n    return line.substr(1, line.length - 2)\n  }).join('\\n')\n\n\nexport const\n  XTable = bond(({ model: m }: { model: Table }) => {\n    qd.args[m.name] = []\n    const\n      items = m.rows.map(r => {\n        const item: Fluent.IObjectWithKey & Dict<any> = { key: r.name }\n        for (let i = 0, n = r.cells.length; i < n; i++) {\n          const col = m.columns[i]\n          item[col.name] = r.cells[i]\n        }\n        return item\n      }),\n      isMultiple = m.values?.length || m.multiple,\n      filteredItemsB = box(items),\n      searchableKeys = m.columns.filter(({ searchable }) => searchable).map(({ name }) => name),\n      searchStrB = box(''),\n      selectedFiltersB = box<Dict<S[]> | null>(null),\n      colContextMenuListB = box<Fluent.IContextualMenuProps | null>(null),\n      groupsB = box<Fluent.IGroup[] | undefined>(undefined),\n      groupByKeyB = box('*'),\n      groupByOptions: Fluent.IDropdownOption[] = m.groupable ? [{ key: '*', text: '(No Grouping)' }, ...m.columns.map(col => ({ key: col.name, text: col.label }))] : [],\n      onSearchChange = (_e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, searchStr?: S) => {\n        searchStrB(searchStr || '')\n\n        if (!searchStr && !selectedFiltersB()) {\n          filteredItemsB(items)\n          if (groupsB()) initGroups()\n          return\n        }\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      search = () => {\n        const searchStr = searchStrB().toLowerCase()\n        if (!searchStr || !searchableKeys.length) return\n\n        filteredItemsB(filteredItemsB().filter(i => searchableKeys.some(key => (i[key] as S).toLowerCase().includes(searchStr))))\n      },\n      onFilterChange = (filterKey: S, filterVal: S) => (_e?: React.FormEvent<HTMLInputElement | HTMLElement>, checked?: B) => {\n        const filters = selectedFiltersB() || {}\n\n        if (checked) {\n          if (filters[filterKey]) filters[filterKey].push(filterVal)\n          else filters[filterKey] = [filterVal]\n        }\n        else filters[filterKey] = filters[filterKey].filter(f => f !== filterVal)\n        selectedFiltersB(Object.values(filters).every(v => !v.length) ? null : { ...filters })\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      // TODO: Make filter options in dropdowns dynamic.\n      filter = () => {\n        const selectedFilters = selectedFiltersB()\n\n        // If we have filters, check if any of the data-item's props (filter's keys) equals to any of its filter values.\n        const filteredItems = selectedFilters\n          ? items.filter(i => Object.keys(selectedFilters)\n            .every(filterKey => !selectedFilters[filterKey].length || selectedFilters[filterKey]\n              .some(filterVal => i[filterKey] === filterVal)\n            )\n          )\n          : items\n\n        filteredItemsB(filteredItems)\n      },\n      reset = () => {\n        selectedFiltersB(null)\n        searchStrB('')\n\n        groupsB(undefined)\n        groupByKeyB('*')\n\n        filter()\n        search()\n      },\n      sort = (column: QColumn) => {\n        const sortAsc = column.iconName === 'SortDown'\n        column.iconName = sortAsc ? 'SortUp' : 'SortDown'\n\n        if (groupsB()) {\n          filteredItemsB(groupsB()?.reduce((acc, group) =>\n            [...acc, ...filteredItemsB().slice(group.startIndex, acc.length + group.count).sort(sortingF(column, sortAsc))],\n            [] as any[]) || [])\n        }\n        else filteredItemsB([...filteredItemsB()].sort(sortingF(column, sortAsc)))\n\n        columnsB(columnsB().map((col) => column.key === col.key ? column : col))\n      },\n      download = () => {\n        // TODO: Prompt a dialog for name, encoding, etc.\n        const\n          data = toCSV([m.columns.map(({ label, name }) => label || name), ...m.rows.map(({ cells }) => cells)]),\n          a = document.createElement('a'),\n          blob = new Blob([data], { type: \"octet/stream\" }),\n          url = window.URL.createObjectURL(blob)\n\n        a.href = url\n        a.download = 'exported_data.csv'\n        a.click()\n\n        window.URL.revokeObjectURL(url)\n      },\n      onRenderMenuList = (props?: Fluent.IContextualMenuListProps) => {\n        if (!props) return null\n\n        return (\n          <div style={{ padding: 10 }}>\n            <Fluent.Text variant='mediumPlus' styles={{ root: { paddingTop: 10, paddingBottom: 10, fontWeight: 'bold' } }} block>Show only</Fluent.Text>\n            {\n              props.items.map(({ key, name, data }) => {\n                const selectedFilters = selectedFiltersB()\n                const checked = !!name && !!selectedFilters && selectedFilters[data] && selectedFilters[data].includes(name)\n                return (\n                  <Fluent.Checkbox\n                    key={key}\n                    label={name}\n                    defaultChecked={checked}\n                    onChange={onFilterChange(data || '', name || '')}\n                    styles={{ root: { marginBottom: 5 } }}\n                  />\n                )\n              })\n            }\n          </div>\n        )\n      },\n      onDismissContextMenu = () => colContextMenuListB(null),\n      onColumnContextMenu = (col: Fluent.IColumn, e: React.MouseEvent<HTMLElement>) => {\n        colContextMenuListB({\n          items: Array.from(new Set(items.map(i => i[col.fieldName || col.key])))\n            .map(option => ({ key: option, name: option, data: col.fieldName || col.key })),\n          target: e.target as HTMLElement,\n          directionalHint: Fluent.DirectionalHint.bottomLeftEdge,\n          gapSpace: 10,\n          isBeakVisible: true,\n          onRenderMenuList,\n          onDismiss: onDismissContextMenu,\n        })\n      },\n      makeGroups = () => {\n        let prevSum = 0\n        const groupedBy = groupByF(filteredItemsB(), groupByKeyB())\n        const groupedByKeys = Object.keys(groupedBy)\n        const groups: Fluent.IGroup[] = groupedByKeys.map((key, i) => {\n          if (i !== 0) {\n            const prevKey = groupedByKeys[i - 1]\n            prevSum += groupedBy[prevKey].length\n          }\n          return { key, name: key, startIndex: prevSum, count: groupedBy[key].length, isCollapsed: true }\n        })\n\n        return { groupedBy, groups }\n      },\n      initGroups = () => {\n        const { groupedBy, groups } = makeGroups()\n        filteredItemsB(Object.values(groupedBy).flatMap(arr => arr))\n        groupsB(groups)\n      },\n      onGroupByChange = (_e: React.FormEvent<HTMLDivElement>, option?: Fluent.IDropdownOption) => {\n        if (!option) return\n        if (option.key === '*') {\n          reset()\n          return\n        }\n\n        reset()\n        groupByKeyB(option.key as S)\n        initGroups()\n      },\n      onRenderDetailsHeader = (props?: Fluent.IDetailsHeaderProps) => {\n        if (!props) return <span />\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Header} isScrollSynced>\n            <Fluent.DetailsHeader {...props} onColumnContextMenu={onColumnContextMenu} className={groupsB() ? css.hideCellGroupCollapse : ''} />\n          </Fluent.Sticky>\n        )\n      },\n\n      onRenderDetailsFooter = (props?: Fluent.IDetailsFooterProps) => {\n        const searchOrFilter = searchableKeys.length || m.columns.some(c => c.filterable)\n        if (!props || (!m.downloadable && !m.resettable && !searchOrFilter)) return null\n\n        const footerItems: Fluent.ICommandBarItemProps[] = []\n        if (m.downloadable) footerItems.push({ key: 'download', text: 'Download data', iconProps: { iconName: 'Download' }, onClick: download })\n        if (m.resettable) footerItems.push({ key: 'reset', text: 'Reset table', iconProps: { iconName: 'Refresh' }, onClick: reset })\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Footer} isScrollSynced>\n            <Fluent.Stack horizontal horizontalAlign={searchOrFilter ? 'space-between' : 'end'} verticalAlign='center'>\n              {\n                searchOrFilter && (\n                  <Fluent.Text variant='smallPlus' block >Rows:\n                    <b style={{ paddingLeft: 5 }}>{formatNum(filteredItemsB().length)} of {formatNum(items.length)}</b>\n                  </Fluent.Text>\n                )\n              }\n              <Fluent.CommandBar items={footerItems} />\n            </Fluent.Stack>\n          </Fluent.Sticky>\n        )\n      },\n      onRenderRow = (props?: Fluent.IDetailsRowProps) => {\n        if (!props) return <span />\n\n        return <Fluent.DetailsRow {...props} styles={{ cell: { alignSelf: 'center' }, root: { width: '100%' } }} />\n      },\n      onColumnClick = (e: React.MouseEvent<HTMLElement>, column: QColumn) => {\n        const isMenuClicked = (e.target as HTMLElement).getAttribute('data-icon-name') === 'ChevronDown'\n\n        if (isMenuClicked) onColumnContextMenu(column, e)\n        else if (column.isSortable) sort(column)\n      },\n      columnsB = box(m.columns.map((c): QColumn => {\n        const\n          minWidth = c.min_width\n            ? c.min_width.endsWith('px')\n              ? +c.min_width.substring(0, c.min_width.length - 2)\n              : +c.min_width\n            : 150,\n          maxWidth = c.max_width\n            ? c.max_width.endsWith('px')\n              ? +c.max_width.substring(0, c.max_width.length - 2)\n              : +c.max_width\n            : undefined\n        return {\n          key: c.name,\n          name: c.label,\n          fieldName: c.name,\n          minWidth,\n          maxWidth,\n          headerClassName: c.sortable ? css.sortableHeader : undefined,\n          iconClassName: c.sortable ? css.sortingIcon : undefined,\n          iconName: c.sortable ? 'SortDown' : undefined,\n          onColumnClick,\n          columnActionsMode: c.filterable ? Fluent.ColumnActionsMode.hasDropdown : Fluent.ColumnActionsMode.clickable,\n          cellType: c.cell_type,\n          dataType: c.data_type,\n          isSortable: c.sortable,\n          isResizable: true,\n        }\n      })),\n      primaryColumnKey = m.columns.find(c => c.link)?.name || (m.columns[0].link === false ? undefined : m.columns[0].name),\n      selection = new Fluent.Selection({\n        onSelectionChanged: () => {\n          qd.args[m.name] = selection.getSelection().map(item => item.key as S)\n        }\n      }),\n      init = () => {\n        if (isMultiple && m.values) {\n          m.values.forEach(v => selection.setKeySelected(v, true, false))\n          qd.args[m.name] = m.values\n        }\n      },\n      onItemInvoked = (item: Fluent.IObjectWithKey & Dict<any>) => {\n        qd.args[m.name] = [item.key as S]\n        qd.sync()\n      },\n      onRenderItemColumn = (item?: Fluent.IObjectWithKey & Dict<any>, _index?: number, col?: QColumn) => {\n        if (!item || !col) return <span />\n\n        const v = item[col.fieldName as S]\n        if (col.key === primaryColumnKey && !isMultiple) {\n          const onClick = () => {\n            qd.args[m.name] = [item.key as S]\n            qd.sync()\n          }\n          return <Fluent.Link onClick={onClick}>{v}</Fluent.Link>\n        }\n\n        if (col.cellType?.progress) return <XProgressTableCellType model={col.cellType.progress} progress={item[col.key]} />\n        if (col.cellType?.icon) return <XIconTableCellType model={col.cellType.icon} icon={item[col.key]} />\n        if (col.dataType === 'time') return <span>{new Date(v).toLocaleString()}</span>\n\n        return <span>{v}</span>\n      },\n      computeHeight = () => {\n        if (m.height) return m.height\n        if (items.length > 10) return 500\n\n        const\n          topToolbarHeight = searchableKeys.length || m.groupable ? 60 : 0,\n          headerHeight = 60,\n          rowHeight = m.columns.some(c => c.cell_type)\n            ? m.columns.some(c => c.cell_type?.progress) ? 68 : 50\n            : 43,\n          footerHeight = m.downloadable || m.resettable || searchableKeys.length ? 44 : 0\n\n        return topToolbarHeight + headerHeight + (items.length * rowHeight) + footerHeight\n      },\n      DataTable = () => (\n        <>\n          <Fluent.DetailsList\n            items={filteredItemsB()}\n            columns={columnsB()}\n            constrainMode={Fluent.ConstrainMode.unconstrained}\n            layoutMode={Fluent.DetailsListLayoutMode.fixedColumns}\n            groups={groupsB()}\n            selection={selection}\n            selectionMode={isMultiple ? Fluent.SelectionMode.multiple : Fluent.SelectionMode.none}\n            selectionPreservedOnEmptyClick\n            onItemInvoked={isMultiple ? undefined : onItemInvoked}\n            onRenderRow={onRenderRow}\n            onRenderItemColumn={onRenderItemColumn}\n            onRenderDetailsHeader={onRenderDetailsHeader}\n            onRenderDetailsFooter={onRenderDetailsFooter}\n          />\n          {colContextMenuListB() && <Fluent.ContextualMenu {...(colContextMenuListB() as Fluent.IContextualMenuProps)} />}\n        </>\n      ),\n      render = () => (\n        <div data-test={m.name} style={{ position: 'relative', height: computeHeight(), ...displayMixin(m.visible) }}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' >\n            {m.groupable && <Fluent.Dropdown data-test='groupby' label='Group by' selectedKey={groupByKeyB()} onChange={onGroupByChange} options={groupByOptions} styles={{ root: { width: 300 } }} />}\n            {!!searchableKeys.length && <Fluent.TextField data-test='search' label='Search' onChange={onSearchChange} value={searchStrB()} styles={{ root: { width: '50%' } }} />}\n          </Fluent.Stack>\n          <Fluent.ScrollablePane scrollbarVisibility={Fluent.ScrollbarVisibility.auto} styles={{ root: { top: m.groupable || searchableKeys.length ? 60 : 0 } }}>\n            {\n              isMultiple\n                ? <Fluent.MarqueeSelection selection={selection}><DataTable /></Fluent.MarqueeSelection>\n                : <DataTable />\n            }\n          </Fluent.ScrollablePane>\n        </div>\n      )\n    return { init, render, columnsB, filteredItemsB, selectedFiltersB, searchStrB, colContextMenuListB, groupsB, groupByKeyB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a tab.\n */\nexport interface Tab {\n  /** An identifying name for this component. */\n  name: Id\n  /** The text displayed on the tab. */\n  label?: S\n  /** The icon displayed on the tab. */\n  icon?: S\n}\n\n/**\n * Create a tab bar.\n */\nexport interface Tabs {\n  /** An identifying name for this component. */\n  name: Id\n  /** The name of the tab to select. */\n  value?: S\n  /** The tabs in this tab bar. */\n  items?: Tab[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if tabs should be rendered as links instead of buttons. */\n  link?: B\n}\n\nconst\n  css = stylesheet({\n    pivot: {\n      // Actual height of the Fluent pivot is 44.\n      // When used standalone in a flex layout, scrollbars show up when attempting to fit to content height.\n      // So explicitly set a height to work around this issue.\n      minHeight: 46,\n    }\n  })\n\nexport const\n  XTabs = bond(({ model: m }: { model: Tabs }) => {\n    const\n      onLinkClick = (item?: Fluent.PivotItem) => {\n        const name = item?.props.itemKey\n        if (!name) return\n        if (name.startsWith('#')) {\n          window.location.hash = name.substr(1)\n          return\n        }\n        if (m.name) {\n          if (name !== qd.args[m.name]) {\n            qd.args[m.name] = name\n            qd.sync()\n          }\n        } else {\n          qd.args[name] = true\n          qd.sync()\n        }\n      },\n      render = () => {\n        const tabs = m.items?.map(t => (\n          <Fluent.PivotItem\n            key={t.name}\n            itemIcon={t.icon}\n            itemKey={t.name}\n            headerText={t.label} />\n        ))\n        return (\n          <div className={css.pivot}>\n            <Fluent.Pivot\n              data-test={m.name}\n              style={displayMixin(m.visible)}\n              selectedKey={m.value ?? null}\n              linkFormat={m.link ? Fluent.PivotLinkFormat.links : Fluent.PivotLinkFormat.tabs}\n              onLinkClick={onLinkClick}>{tabs}</Fluent.Pivot>\n          </div>\n        )\n      }\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport Handlebars from 'handlebars'\nimport React from 'react'\nimport { cards, substitute } from './layout'\nimport { MarkupCard, XMarkup } from './markup'\nimport { bond, Card, Rec, S, unpack, B } from './qd'\n\n/** Render dynamic content using an HTML template.*/\nexport interface Template {\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template */\n  data?: Rec\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render dynamic content using an HTML template.*/\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template. */\n  data?: Rec\n}\n\nexport const\n  XTemplate = bond(({ model: m }: { model: Template }) => {\n    const\n      template = Handlebars.compile(m.content || ''),\n      render = () => {\n        const data = unpack(m.data)\n        return <div data-test={m.name}><XMarkup model={{ content: template(data || {}), visible: m.visible }} /></div>\n      }\n    return { render }\n  }),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      template = Handlebars.compile(state.content || ''),\n      render = () => {\n        const data = unpack(state.data)\n        return <MarkupCard name={name} title={substitute(state.title, data)} content={template(data || {})} />\n      }\n    return { render, changed }\n  })\n\ncards.register('template', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { Markdown } from './markdown'\nimport { B, Dict, S } from './qd'\nimport { displayMixin, margin } from './theme'\nimport { Command } from './toolbar'\n\n/** Create text content. */\nexport interface Text {\n  /** The text content. */\n  content: S\n  /** The font size of the text content. */\n  size?: 'xl' | 'l' | 'm' | 's' | 'xs'\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-large sized text content. */\nexport interface TextXl {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create large sized text content. */\nexport interface TextL {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create medium sized text content. */\nexport interface TextM {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create small sized text content. */\nexport interface TextS {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-small sized text content. */\nexport interface TextXs {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nconst\n  css = stylesheet({\n    text: {\n      position: 'relative',\n      $nest: {\n        p: {\n          // Override default 1em margin inside markdown paragraphs.\n          margin: margin(0, 0, 10, 0),\n        }\n      },\n    },\n  }),\n  textVariants: Dict<keyof Fluent.IFontStyles> = {\n    xl: 'xLarge',\n    l: 'large',\n    m: 'medium',\n    s: 'small',\n    xs: 'xSmall',\n  },\n  toTextVariant = (s: S) => textVariants[s] || 'mediumPlus'\n\nexport const\n  XText = ({ content, name, size, commands, visibility = true }: { content: S, name?: S, size?: S, commands?: Command[], visibility?: B }) => {\n    const menuName = name ? `${name}-menu` : name\n    return (\n      <div className={css.text} style={displayMixin(visibility)}>\n        <Fluent.Text data-test={name} variant={toTextVariant(size || 'm')} block>\n          <Markdown source={content} />\n        </Fluent.Text>\n        {!!commands?.length && <CardMenu name={menuName} commands={commands} />}\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, debounce, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a text box.\n *\n * The text box component enables a user to type text into an app.\n * It's typically used to capture a single line of text, but can be configured to capture multiple lines of text.\n * The text displays on the screen in a simple, uniform format.\n*/\nexport interface Textbox {\n  /** An identifying name for this component. */\n  name: Id\n  /** The text displayed above the field. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. It should be a word or short phrase that demonstrates the expected type of data, rather than an explanatory message. */\n  placeholder?: S\n  /** Text to be displayed inside the text box. */\n  value?: S\n  /** The masking string that defines the mask's behavior. A backslash will escape any character. Special format characters are: '9': [0-9] 'a': [a-zA-Z] '*': [a-zA-Z0-9].*/\n  mask?: S\n  /** Icon displayed in the far right end of the text field. */\n  icon?: S\n  /** Text to be displayed before the text box contents. */\n  prefix?: S\n  /** Text to be displayed after the text box contents. */\n  suffix?: S\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if the text box is a required field. */\n  required?: B\n  /** True if the text box is disabled. */\n  disabled?: B\n  /** True if the text box is a read-only field. */\n  readonly?: B\n  /** True if the text box should allow multi-line text entry. */\n  multiline?: B\n  /** True if the text box should hide text content. */\n  password?: B\n  /** True if the form should be submitted when the text value changes. */\n  trigger?: B\n  /** The height of the text box, e.g. '100px'. Applicable only if `multiline` is true. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst DEBOUNCE_TIMEOUT = 500\nexport const\n  XTextbox = bond(({ model: m }: { model: Textbox }) => {\n    qd.args[m.name] = m.value || ''\n    const\n      onChange = ({ target }: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, v?: string) => {\n        v = v || (target as HTMLInputElement).value\n\n        qd.args[m.name] = v ?? (m.value || '')\n        if (m.trigger) qd.sync()\n      },\n      render = () => m.mask\n        ? (\n          <Fluent.MaskedTextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            label={m.label}\n            defaultValue={m.value}\n            mask={m.mask}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n        : (\n          <Fluent.TextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            styles={m.multiline && m.height ? { fieldGroup: { height: m.height } } : undefined}\n            label={m.label}\n            placeholder={m.placeholder}\n            iconProps={{ iconName: m.icon }}\n            prefix={m.prefix}\n            suffix={m.suffix}\n            defaultValue={m.value}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            multiline={m.multiline}\n            type={m.password ? 'password' : undefined}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, Id, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a toggle.\n * Toggles represent a physical switch that allows users to turn things on or off.\n * Use toggles to present users with two mutually exclusive options (like on/off), where choosing an option results\n * in an immediate action.\n *\n * Use a toggle for binary operations that take effect right after the user flips the Toggle.\n * For example, use a Toggle to turn services or hardware components on or off.\n * In other words, if a physical switch would work for the action, a Toggle is probably the best component to use.\n */\nexport interface Toggle {\n  /** An identifying name for this component. */\n  name: Id\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the toggle value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XToggle = bond(({ model: m }: { model: Toggle }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Toggle\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n          onText=\"On\"\n          offText=\"Off\"\n          inlineLabel\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport vegaEmbed from 'vega-embed'\nimport { cards, grid } from './layout'\nimport { B, bond, Card, Rec, S, unpack, xid, debounce } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    body: {\n      flexGrow: 1,\n      display: 'flex',\n    },\n    plot: {\n      $nest: {\n        'canvas': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }\n      }\n    }\n  })\n\n/** Create a Vega-lite plot for display inside a form. */\nexport interface VegaVisualization {\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The height of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XVegaVisualization = bond(({ model: state }: { model: VegaVisualization }) => {\n    const\n      ref = React.createRef<HTMLDivElement>(),\n      init = () => {\n        const el = ref.current\n        if (!el) return\n\n        const spec = JSON.parse(state.specification)\n        if (!isNaN(spec.height)) {\n          el.style.height = `${spec.height + 10}px`// HACK: Vega calculates dimensions with extra 10px for some reason, increase container for 10px as well.\n        }\n        // If card does not have specified height, it uses content. Since the wrapper is empty, it takes very little space - set to 300px by default.\n        else if (el.clientHeight < 30) {\n          el.style.height = '300px'\n        }\n\n        const\n          data = unpack<any[]>(state.data),\n          width = el.clientWidth - 10, // HACK: Vega calculates dimensions with extra 10px for some reason.\n          height = el.clientHeight - 10 // HACK: Vega calculates dimensions with extra 10px for some reason.\n\n        if (data) spec.data = { values: data }\n        vegaEmbed(el, spec, {\n          mode: 'vega-lite',\n          defaultStyle: false,\n          renderer: 'canvas',\n          actions: false,\n          config: {\n            autosize: {\n              type: 'fit',\n              resize: true\n            },\n            view: {\n              discreteWidth: width,\n              discreteHeight: height,\n              continuousWidth: width,\n              continuousHeight: height,\n            }\n          }\n        }).catch(console.error)\n      },\n      onResize = debounce(1000, init),\n      dispose = () => window.removeEventListener('resize', onResize),\n      render = () => {\n        const\n          { name, width = 'auto', height = 'auto', visible } = state,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { flexGrow: 1 }\n            : { width, height }\n        return <div data-test={name} className={css.plot} style={{ ...style, position: 'relative', ...displayMixin(visible) }} ref={ref} />\n      }\n    window.addEventListener('resize', onResize)\n\n    return { init, render, dispose }\n  })\n\n/** Create a card containing a Vega-lite plot. */\ninterface State {\n  /** The title of this card. */\n  title: S\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const { specification, data, title } = state\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{title}</div>\n            <div className={css.body}>\n              <XVegaVisualization key={xid()} model={{ specification, data }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('vega', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Button, Buttons, XButtons, XStandAloneButton } from './button'\nimport { Checkbox, XCheckbox } from './checkbox'\nimport { Checklist, XChecklist } from './checklist'\nimport { ChoiceGroup, XChoiceGroup } from './choice_group'\nimport { ColorPicker, XColorPicker } from './color_picker'\nimport { Combobox, XCombobox } from './combobox'\nimport { DatePicker, XDatePicker } from './date_picker'\nimport { Dropdown, XDropdown } from './dropdown'\nimport { Expander, XExpander } from './expander'\nimport { FileUpload, XFileUpload } from './file_upload'\nimport { Frame, XFrame } from './frame'\nimport { Label, XLabel } from './label'\nimport { cards } from './layout'\nimport { Link, XLink } from './link'\nimport { Markup, XMarkup } from './markup'\nimport { MessageBar, XMessageBar } from './message_bar'\nimport { Picker, XPicker } from './picker'\nimport { Visualization, XVisualization } from './plot'\nimport { Progress, XProgress } from './progress'\nimport { B, bond, Card, Packed, S, unpack, xid } from './qd'\nimport { RangeSlider, XRangeSlider } from './range_slider'\nimport { Separator, XSeparator } from './separator'\nimport { Slider, XSlider } from './slider'\nimport { Spinbox, XSpinbox } from './spinbox'\nimport { Stats, XStats } from './stats'\nimport { Stepper, XStepper } from './stepper'\nimport { Table, XTable } from './table'\nimport { Tabs, XTabs } from './tabs'\nimport { Template, XTemplate } from './template'\nimport { Text, TextL, TextM, TextS, TextXl, TextXs, XText } from './text'\nimport { Textbox, XTextbox } from './textbox'\nimport { clas, margin, padding, cssVar } from './theme'\nimport { Toggle, XToggle } from './toggle'\nimport { XToolTip } from './tooltip'\nimport { VegaVisualization, XVegaVisualization } from './vega'\n\n/** Create a component. */\nexport interface Component {\n  /** Text block. */\n  text?: Text\n  /** Extra-large sized text block. */\n  text_xl?: TextXl\n  /** Large sized text block. */\n  text_l?: TextL\n  /** Medium sized text block. */\n  text_m?: TextM\n  /** Small sized text block. */\n  text_s?: TextS\n  /** Extra-small sized text block. */\n  text_xs?: TextXs\n  /** Label. */\n  label?: Label\n  /** Separator. */\n  separator?: Separator\n  /** Progress bar. */\n  progress?: Progress\n  /** Message bar. */\n  message_bar?: MessageBar\n  /** Textbox. */\n  textbox?: Textbox\n  /** Checkbox. */\n  checkbox?: Checkbox\n  /** Toggle. */\n  toggle?: Toggle\n  /** Choice group. */\n  choice_group?: ChoiceGroup\n  /** Checklist. */\n  checklist?: Checklist\n  /** Dropdown. */\n  dropdown?: Dropdown\n  /** Combobox. */\n  combobox?: Combobox\n  /** Slider. */\n  slider?: Slider\n  /** Spinbox. */\n  spinbox?: Spinbox\n  /** Date picker. */\n  date_picker?: DatePicker\n  /** Color picker. */\n  color_picker?: ColorPicker\n  /** Button. */\n  button?: Button\n  /** Button set. */\n  buttons?: Buttons\n  /** File upload. */\n  file_upload?: FileUpload\n  /** Table. */\n  table?: Table;\n  /** Link. */\n  link?: Link\n  /** Tabs. */\n  tabs?: Tabs;\n  /** Expander. */\n  expander?: Expander\n  /** Frame. */\n  frame?: Frame\n  /** Markup */\n  markup?: Markup\n  /** Template */\n  template?: Template\n  /** Picker.*/\n  picker?: Picker\n  /** Range Slider. */\n  range_slider?: RangeSlider\n  /** Stepper. */\n  stepper?: Stepper\n  /** Visualization. */\n  visualization?: Visualization\n  /** Vega-lite Visualization. */\n  vega_visualization?: VegaVisualization\n  /** Stats */\n  stats?: Stats\n  /** Inline components */\n  inline?: Inline\n}\n\n/** Create an inline (horizontal) list of components. */\ninterface Inline {\n  /** The components laid out inline. */\n  items: Component[]\n  /** Specifies how to lay out the individual components. Defaults to 'start'. */\n  justify?: 'start' | 'end'\n  /** Whether to display the components inset from the parent form, with a contrasting background. */\n  inset?: B\n}\n\n/** Create a form. */\ninterface State {\n  /** The components in this form. */\n  items: Packed<Component[]>\n  /** The title for this card. */\n  title?: S\n}\n\nconst\n  defaults: Partial<State> = { items: [] },\n  css = stylesheet({\n    card: {\n      padding: 15,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    vertical: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n      $nest: {\n        '>*:not(:first-child)': {\n          marginTop: 10\n        },\n      }\n    },\n    horizontal: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    inset: {\n      background: cssVar('$page'),\n      padding: padding(10, 15)\n    },\n    horizontalLeft: {\n      $nest: {\n        '> *': {\n          margin: margin(0, 25, 0, 0),\n        }\n      }\n    },\n    horizontalRight: {\n      justifyContent: 'flex-end',\n      $nest: {\n        '> *': {\n          margin: margin(0, 0, 0, 25),\n        }\n      }\n    },\n  })\n\nexport enum XComponentAlignment { Top, Left, Right }\n\nexport const\n  XComponents = ({ items, alignment, inset }: { items: Component[], alignment?: XComponentAlignment, inset?: B }) => {\n    const\n      components = items.map(m => <XComponent key={xid()} model={m} />),\n      className = alignment === XComponentAlignment.Left\n        ? clas(css.horizontal, css.horizontalLeft, inset ? css.inset : '')\n        : alignment === XComponentAlignment.Right\n          ? clas(css.horizontal, css.horizontalRight, inset ? css.inset : '')\n          : css.vertical\n    return <div className={className}>{components}</div>\n  },\n  XInline = ({ model: m }: { model: Inline }) => (\n    <XComponents\n      items={m.items}\n      alignment={m.justify === 'end' ? XComponentAlignment.Right : XComponentAlignment.Left}\n      inset={m.inset}\n    />\n  )\n\n\nconst\n  XComponent = ({ model: m }: { model: Component }) => {\n    if (m.text) return <XToolTip content={m.text.tooltip} expand={false}><XText name={m.text.name} content={m.text.content} size={m.text.size} visibility={m.text.visible} /></XToolTip>\n    if (m.text_xl) return <XToolTip content={m.text_xl.tooltip} expand={false}><XText name={m.text_xl.name} content={m.text_xl.content} size='xl' commands={m.text_xl.commands} visibility={m.text_xl.visible} /></XToolTip>\n    if (m.text_l) return <XToolTip content={m.text_l.tooltip} expand={false}><XText name={m.text_l.name} content={m.text_l.content} size='l' commands={m.text_l.commands} visibility={m.text_l.visible} /></XToolTip>\n    if (m.text_m) return <XToolTip content={m.text_m.tooltip} expand={false}><XText name={m.text_m.name} content={m.text_m.content} visibility={m.text_m.visible} /></XToolTip>\n    if (m.text_s) return <XToolTip content={m.text_s.tooltip} expand={false}><XText name={m.text_s.name} content={m.text_s.content} size='s' visibility={m.text_s.visible} /></XToolTip>\n    if (m.text_xs) return <XToolTip content={m.text_xs.tooltip} expand={false}><XText name={m.text_xs.name} content={m.text_xs.content} size='xs' visibility={m.text_xs.visible} /></XToolTip>\n    if (m.label) return <XToolTip content={m.label.tooltip} expand={false}><XLabel model={m.label} /></XToolTip>\n    if (m.link) return <XToolTip content={m.link.tooltip} expand={false}><XLink model={m.link} /></XToolTip>\n    if (m.separator) return <XSeparator model={m.separator} />\n    if (m.progress) return <XToolTip content={m.progress.tooltip}><XProgress model={m.progress} /></XToolTip>\n    if (m.message_bar) return <XMessageBar model={m.message_bar} />\n    if (m.textbox) return <XToolTip content={m.textbox.tooltip}><XTextbox model={m.textbox} /></XToolTip>\n    if (m.checkbox) return <XToolTip content={m.checkbox.tooltip} expand={false}><XCheckbox model={m.checkbox} /></XToolTip>\n    if (m.toggle) return <XToolTip content={m.toggle.tooltip} expand={false}><XToggle model={m.toggle} /></XToolTip>\n    if (m.choice_group) return <XToolTip content={m.choice_group.tooltip}><XChoiceGroup model={m.choice_group} /></XToolTip>\n    if (m.dropdown) return <XToolTip content={m.dropdown.tooltip}><XDropdown model={m.dropdown} /></XToolTip>\n    if (m.checklist) return <XToolTip content={m.checklist.tooltip}><XChecklist model={m.checklist} /></XToolTip>\n    if (m.combobox) return <XToolTip content={m.combobox.tooltip}><XCombobox model={m.combobox} /></XToolTip>\n    if (m.slider) return <XToolTip content={m.slider.tooltip}><XSlider model={m.slider} /></XToolTip>\n    if (m.spinbox) return <XToolTip content={m.spinbox.tooltip} expand={false}><XSpinbox model={m.spinbox} /></XToolTip>\n    if (m.date_picker) return <XToolTip content={m.date_picker.tooltip}><XDatePicker model={m.date_picker} /></XToolTip>\n    if (m.color_picker) return <XToolTip content={m.color_picker.tooltip}><XColorPicker model={m.color_picker} /></XToolTip>\n    if (m.file_upload) return <XToolTip content={m.file_upload.tooltip}><XFileUpload model={m.file_upload} /></XToolTip>\n    if (m.table) return <XToolTip content={m.table.tooltip}><XTable model={m.table} /></XToolTip>\n    if (m.buttons) return <XButtons model={m.buttons} />\n    if (m.tabs) return <XTabs model={m.tabs} />\n    if (m.button) return <XToolTip content={m.button.tooltip} showIcon={false} expand={false}><XStandAloneButton model={m.button} /></XToolTip>\n    if (m.expander) return <XExpander model={m.expander} />\n    if (m.frame) return <XFrame model={m.frame} />\n    if (m.markup) return <XMarkup model={m.markup} />\n    if (m.template) return <XTemplate model={m.template} />\n    if (m.picker) return <XToolTip content={m.picker.tooltip}><XPicker model={m.picker} /></XToolTip>\n    if (m.range_slider) return <XToolTip content={m.range_slider.tooltip}><XRangeSlider model={m.range_slider} /></XToolTip>\n    if (m.stepper) return <XToolTip content={m.stepper.tooltip}><XStepper model={m.stepper} /></XToolTip>\n    if (m.visualization) return <XVisualization model={m.visualization} />\n    if (m.vega_visualization) return <XVegaVisualization model={m.vega_visualization} />\n    if (m.stats) return <XStats model={m.stats} />\n    if (m.inline) return <XInline model={m.inline} />\n    return <Fluent.MessageBar messageBarType={Fluent.MessageBarType.severeWarning}>This component could not be rendered.</Fluent.MessageBar>\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = { ...defaults, ...state },\n          title = s.title,\n          items = unpack<Component[]>(s.items) // XXX ugly\n\n        return (\n          <div data-test={name} className={css.card}>\n            {title && <div className='s12 w6'>{title}</div>}\n            <XComponents items={items} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('form', View)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { XButtons } from './button'\nimport { Component, XComponents } from './form'\nimport { B, bond, qd, S } from './qd'\n\n/**\n * A dialog box (Dialog) is a temporary pop-up that takes focus from the page or app\n * and requires people to interact with it. It’s primarily used for confirming actions,\n * such as deleting a file, or asking people to make a choice.\n */\nexport interface Dialog {\n  /** The dialog's title. */\n  title: S\n  /** The components displayed in this dialog. */\n  items: Component[]\n  /** The width of the dialog, e.g. '400px', defaults to '600px'. */\n  width?: S\n  /** True if the dialog should have a closing 'X' button at the top right corner. */\n  closable?: B\n  /** True to disable all actions and commands behind the dialog. Blocking dialogs should be used very sparingly, only when it is critical that the user makes a choice or provides information before they can proceed. Blocking dialogs are generally used for irreversible or potentially destructive tasks. Defaults to false. */\n  blocking?: B\n  /** Dialog with large header banner, mutually exclusive with `closable` prop. Defaults to false. */\n  primary?: B\n}\n\nexport default bond(() => {\n  const\n    { dialogB } = qd,\n    onDismiss = () => qd.dialogB(null),\n    render = () => {\n      const\n        { title, width = '600px', items = [], closable, primary, blocking } = dialogB() || {},\n        dialogContentProps: Fluent.IDialogContentProps = {\n          title,\n          onDismiss,\n          type: closable\n            ? Fluent.DialogType.close\n            : primary\n              ? Fluent.DialogType.largeHeader\n              : Fluent.DialogType.normal\n        },\n        lastComponent = items.pop()\n\n      return (\n        <Fluent.Dialog hidden={!dialogB()} dialogContentProps={dialogContentProps} modalProps={{ isBlocking: blocking }} minWidth={width} maxWidth={width}>\n          <XComponents items={items} />\n          {lastComponent?.buttons && <Fluent.DialogFooter><XButtons model={lastComponent.buttons} /></Fluent.DialogFooter>}\n        </Fluent.Dialog>\n      )\n    }\n  return { render, dialogB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const showNotification = async (notificationText: string) => {\n  // TODO: Decide on fallback when user's browser does not support Notification API.\n  if (!('Notification' in window)) return\n  else if (Notification.permission === 'granted') new Notification(notificationText)\n  else if (Notification.permission !== 'denied') {\n    if (await Notification.requestPermission() === 'granted') new Notification(notificationText)\n  }\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards } from './layout'\nimport { showNotification } from './notification'\nimport { bond, box, Card, Id, qd, S, U } from './qd'\nimport { Dialog } from './dialog'\nimport { changeTheme } from './theme'\nimport { setupTracker, Tracker } from './tracking'\n\n/**\n * Represents the layout structure for a page.\n */\nexport interface Layout {\n  /**\n   * The minimum viewport width at which to use this layout.\n   * Values must be pixel widths (e.g. '0px', '576px', '768px') or a named preset.\n   * The named presets are:\n   * 'xs': '0px' for extra small devices (portrait phones),\n   * 's': '576px' for small devices (landscape phones),\n   * 'm': '768px' for medium devices (tablets),\n   * 'l': '992px' for large devices (desktops),\n   * 'xl': '1200px' for extra large devices (large desktops).\n   *\n   * A breakpoint value of 'xs' (or '0') matches all viewport widths, unless other breakpoints are set.\n  */\n  breakpoint: S\n  /** The zones in this layout. Each zones can in turn contain sub-zones. */\n  zones: Zone[]\n  /** The width of the layout. Defaults to `100%`. */\n  width?: S\n  /** The minimum width of the layout. */\n  min_width?: S\n  /** The maximum width of the layout. */\n  max_width?: S\n  /** The height of the layout. Defaults to `auto`. */\n  height?: S\n  /** The minimum height of the layout. */\n  min_height?: S\n  /** The maximum height of the layout. */\n  max_height?: S\n}\n\n/**\n * Represents an zone within a page layout.\n */\nexport interface Zone {\n  /** An identifying name for this zone. */\n  name: Id\n  /** The size of this zone. */\n  size?: S\n  /** Layout direction. */\n  direction?: 'row' | 'column'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n  /** The sub-zones contained inside this zone. */\n  zones?: Zone[]\n}\n\n/**\n * Represents page-global state.\n *\n * This card is invisible.\n * It is used to control attributes of the active page.\n*/\ninterface State {\n  /** The title of the page. */\n  title?: S\n  /** Refresh rate in seconds. A value of 0 turns off live-updates. Values != 0 are currently ignored (reserved for future use). */\n  refresh?: U\n  /** Display a desktop notification. */\n  notification?: S\n  /** Redirect the page to a new URL. */\n  redirect?: S\n  /** Shortcut icon path. Preferably a `.png` file (`.ico` files may not work in mobile browsers). */\n  icon?: S\n  /** The layouts supported by this page. */\n  layouts?: Layout[]\n  /** Display a dialog on the page. */\n  dialog?: Dialog\n  /** Specify the name of the theme (color scheme) to use on this page. One of 'light' or 'neon'. */\n  theme?: S\n  /** Configure a tracker for the page (for web analytics). */\n  tracker?: Tracker\n}\n\nexport const\n  layoutsB = box<Layout[]>([]),\n  preload = ({ state }: Card<State>) => {\n    const { title, icon, refresh, notification, redirect, layouts, dialog, theme, tracker } = state\n\n    if (title) {\n      delete state.title\n      window.document.title = title\n    }\n\n    if (icon) {\n      delete state.icon\n      const\n        iconLink = document.querySelector(\"link[rel*='icon']\") as HTMLLinkElement,\n        touchIconLink = document.querySelector(\"link[rel*='apple-touch-icon']\") as HTMLLinkElement\n      if (iconLink) iconLink.href = icon\n      if (touchIconLink) touchIconLink.href = icon\n    }\n\n    if (typeof refresh === 'number') {\n      delete state.refresh\n      qd.refreshRateB(refresh)\n    }\n\n    // Force new obj reference to rerender Dialog component with most recent changes.\n    qd.dialogB(dialog ? { ...dialog } : null)\n\n    if (theme) changeTheme(theme)\n    if (notification) {\n      delete state.notification\n      showNotification(notification)\n    }\n\n    if (redirect) {\n      delete state.redirect\n      try {\n        const url = new URL(redirect)\n        if (redirect === url.hash) {\n          window.location.hash = redirect\n        } else {\n          window.location.replace(redirect)\n        }\n      } catch (e) {\n        console.error(`Could not redirect: ${redirect} is an invalid URL`)\n      }\n    }\n\n    if (layouts) {\n      delete state.layouts\n      layoutsB(layouts)\n    }\n\n    if (tracker) {\n      delete state.tracker\n      setupTracker(tracker)\n    }\n  }\n\nexport const View = bond(() => ({ render: () => <></> }))\n\ncards.register('meta', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { CardEffect, CardView, getCardEffect, GridLayout } from './layout'\nimport { Layout, layoutsB, preload, Zone } from './meta'\nimport { B, bond, box, C, Dict, Disposable, on, Page, parseU, S, U } from './qd'\nimport { clas, margin, cssVar } from './theme'\n\n\ntype Breakpoint = {\n  layout: Layout\n  min: U\n  max: U\n  listener(e: MediaQueryListEvent): void\n  mq: MediaQueryList\n}\n\ntype Slot = {\n  order: U\n  zone?: S\n  grow?: U\n  width?: S\n  height?: S\n}\n\ntype CardSlot = {\n  card: C\n  slot: Slot\n}\n\ntype Section = {\n  zone: Zone\n  sections?: Section[]\n  cardslots: CardSlot[]\n}\n\nconst\n  presetBreakpoints: Dict<S> = {\n    xs: '0px',\n    s: '576px',\n    m: '768px',\n    l: '992px',\n    xl: '1200px',\n  },\n  breakpointsB = box<Breakpoint[]>([]),\n  layoutB = box<{ layout: Layout, index: U } | null>(null),\n  resizedB = box(), // breakpoint changed?\n  parseBreakpoint = (spec: S): U => parseInt(presetBreakpoints[spec] ?? spec, 10),\n  badSlot: Slot = { order: 0 },\n  parseBox = ({ zone, order, size, width, height }: any): Slot => {\n    return { zone, order: order ? order : 0, grow: parseU(size), width, height }\n  },\n  parseBoxes = (index: U, spec: S): Slot => {\n    try {\n      if (spec[0] === '[') {\n        const specs: any[] = JSON.parse(spec)\n        spec = specs[index]\n        if (!spec) spec = specs[0]\n        if (!spec) return badSlot\n      }\n      return spec[0] === '{' ? parseBox(JSON.parse(spec)) : { zone: spec, order: 0 }\n    } catch {\n      return badSlot\n    }\n  },\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  segregate = <T extends {}>(xs: T[], f: (x: T) => B): [T[], T[]] => {\n    const a: T[] = [], b: T[] = []\n    for (const x of xs) (f(x) ? a : b).push(x)\n    return [a, b]\n  }\n\non(layoutsB, layouts => {\n  const\n    bps = layouts.map((layout, index): Breakpoint => {\n      const\n        nextLayout = layouts[index + 1],\n        min = parseBreakpoint(layout.breakpoint),\n        max = nextLayout ? parseBreakpoint(nextLayout.breakpoint) - 1 : 0,\n        mq = window.matchMedia(\n          max\n            ? `(min-width:${min}px) and (max-width:${max}.98px)`\n            : `(min-width:${min}px)`\n        ),\n        listener = (mq: MediaQueryListEvent) => {\n          if (mq.matches) {\n            layoutB({ layout, index })\n            resizedB({})\n          }\n        },\n        bp: Breakpoint = { layout, min, max, mq, listener }\n\n      mq.addListener(listener)\n      if (mq.matches) layoutB({ layout, index })\n\n      return bp\n    })\n\n  for (const { mq, listener } of breakpointsB()) mq.removeListener(listener)\n  breakpointsB(bps)\n})\n\nconst\n  css = stylesheet({\n    flex: {\n      position: 'relative',\n      display: 'flex',\n    },\n    slot: {\n      boxSizing: 'border-box',\n      transition: 'box-shadow 0.3s cubic-bezier(.25,.8,.25,1)',\n      display: 'flex',\n      flexDirection: 'column',\n      margin: margin(7), // Approx 15px gutter between cards.\n      $nest: {\n        '>*': {\n          boxSizing: 'border-box',\n          flexGrow: 1, // Expand vertically\n        }\n      }\n    },\n    normal: {\n      backgroundColor: cssVar('$card'),\n      boxShadow: `0px 3px 5px ${cssVar('$text0')}`,\n      $nest: {\n        '&:hover': {\n          boxShadow: `0px 12px 20px ${cssVar('$text2')}`,\n        }\n      },\n    },\n    raised: {\n      color: cssVar('$card'),\n      backgroundColor: cssVar('$themePrimary'),\n      boxShadow: `0px 3px 7px ${cssVar('$text3')}`,\n      margin: 0,\n    },\n    flat: {\n      backgroundColor: cssVar('$card'),\n      boxShadow: `0px 3px 5px ${cssVar('$text0')}`,\n    },\n  }),\n  getCardEffectClass = (c: C) => {\n    const effect = getCardEffect(c)\n    return clas(css.slot, effect === CardEffect.Normal\n      ? css.normal\n      : effect === CardEffect.Raised\n        ? css.raised\n        : effect == CardEffect.Flat\n          ? css.flat : '')\n  },\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toSectionStyle = (zone: Zone, direction?: S): React.CSSProperties => {\n    const\n      style: React.CSSProperties = {\n        flexDirection: zone.direction === 'row' ? 'row' : 'column',\n        justifyContent: justifications[zone.justify ?? ''],\n        alignItems: alignments[zone.align ?? ''],\n        alignContent: wrappings[zone.wrap ?? ''],\n        flexWrap: zone.wrap ? 'wrap' : undefined,\n      }\n\n    if (zone.size) {\n      const grow = parseU(zone.size) // attempt strict-parse to uint\n      if (!isNaN(grow)) {// no units; treat as ratio\n        if (grow > 0) style.flexGrow = grow\n      } else { // has units; treat as size\n        if (direction === 'row') {\n          style.width = zone.size\n        } else {\n          style.height = zone.size\n          style.minHeight = zone.size // Needed for Safari.\n        }\n      }\n    } else { // no size\n      // expand to fit if horizontal\n      if (direction === 'row') {\n        style.flexGrow = 1\n      }\n    }\n\n    return style\n  },\n  toSlotStyle = ({ card: c, slot }: CardSlot): React.CSSProperties => {\n    const\n      { width, height, grow } = slot,\n      zIndex = c.name === '__unhandled_error__' ? 1 : undefined,\n      style: React.CSSProperties = { position: 'relative', zIndex }\n\n    if (grow || grow === 0 || width || height) {\n      if (grow) style.flexGrow = grow // grow only if non-zero (else default to shrink)\n      if (width) style.width = width\n      if (height) style.height = height\n    } else { // no size specified; occupy 1 part\n      style.flexGrow = 1\n    }\n    return style\n  },\n  toSection = (zone: Zone): Section => ({\n    zone,\n    sections: zone.zones?.map(toSection),\n    cardslots: []\n  }),\n  findSection = (section: Section, name: S): Section | null => {\n    const { zone, sections } = section\n    if (zone.name === name) return section\n    if (sections) {\n      for (const s of sections) {\n        const c = findSection(s, name)\n        if (c) return c\n      }\n    }\n    return null\n  },\n  sortCardsInSection = (section: Section) => {\n    const { sections } = section\n    if (sections) {\n      for (const s of sections) {\n        sortCardsInSection(s)\n      }\n    }\n    section.cardslots.sort((a, b) => a.slot.order - b.slot.order)\n  },\n  FlexSection = ({ section, direction }: { section: Section, direction?: S }) => {\n    const\n      { zone, cardslots, sections } = section,\n      children = sections\n        ? sections.map(section => <FlexSection key={section.zone.name} direction={zone.direction} section={section} />)\n        : cardslots.length ?\n          cardslots.map(cardslot => {\n            const { card: c } = cardslot\n            return (\n              <div key={c.id} className={getCardEffectClass(c)} style={toSlotStyle(cardslot)}>\n                <CardView card={c} />\n                {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n              </div>\n            )\n          })\n          : null\n\n    return (\n      <div data-test={zone.name} className={css.flex} style={toSectionStyle(zone, direction)}>\n        {children}\n      </div>\n    )\n  },\n  FlexLayout = ({ name, cards }: { name: S, cards: C[] }) => {\n    const layoutIndex = layoutB()\n    if (!layoutIndex) return <></>\n    const\n      { layout, index } = layoutIndex,\n      section = toSection({ name: 'main', zones: layout.zones }),\n      { width, min_width, max_width, height, min_height, max_height } = layout\n    for (const card of cards) {\n      const\n        slot = parseBoxes(index, card.state.box),\n        target = findSection(section, slot.zone ?? '')\n      target?.cardslots.push({ card, slot })\n    }\n\n    sortCardsInSection(section)\n\n    const style: React.CSSProperties = {\n      width: width ?? '100%',\n      minWidth: min_width,\n      maxWidth: max_width,\n      height,\n      minHeight: min_height,\n      maxHeight: max_height,\n    }\n    if (height === '100%') {\n      style.display = 'flex'\n      style.flexDirection = 'column'\n    }\n    return (\n      <div data-test={name} style={style}>\n        <FlexSection section={section} />\n      </div>\n    )\n  }\nexport const\n  PageLayout = bond(({ page }: { page: Page }) => {\n    let\n      metaCard: C | null = null,\n      onMetaCardChanged: Disposable | null = null\n\n    const\n      { changed } = page,\n      render = () => {\n        const\n          all = page.list(),\n          [metas, cards] = segregate(all, c => c.state.view === 'meta')\n\n        if (metas.length) {\n          onMetaCardChanged?.dispose()\n          metaCard = metas[0]\n          preload(metaCard as any) // causes layoutB to be set, if available.\n          onMetaCardChanged = on(metaCard.changed, () => preload(metaCard as any))\n        }\n        return layoutsB().length\n          ? <FlexLayout name={page.key} cards={cards} />\n          : <GridLayout name={page.key} cards={cards} />\n      }\n\n    return { render, changed, resizedB }\n  })\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Spinner, SpinnerSize } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport Dialog from './dialog'\nimport { PageLayout } from './page'\nimport { bond, box, connect, on, Page, qd, S, SockEvent, SockEventType, SockMessageType } from './qd'\nimport { clas, cssVar, pc } from './theme'\nimport * as Fluent from '@fluentui/react'\n\nconst\n  css = stylesheet({\n    app: {\n      position: 'absolute',\n      left: 0, top: 0, right: 0, bottom: 0,\n      backgroundColor: cssVar('$page'),\n      color: cssVar('$text'),\n      display: 'flex',\n      justifyContent: 'center',\n      overflow: 'auto'\n    },\n    centerFullHeight: {\n      height: pc(100),\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: cssVar('$page'),\n      color: cssVar('$text'),\n    },\n    freeOverlay: {\n      display: 'none',\n      position: 'fixed',\n      left: 0, top: 0, right: 0, bottom: 0,\n    },\n    busyOverlay: {\n      display: 'block',\n    },\n  })\n\nconst\n  BusyOverlay = bond(() => {\n    let\n      spinTimeout = 0\n    const\n      spinDelay = 500, // ms\n      busyB = qd.busyB,\n      spinB = box(false),\n      render = () => (\n        <div className={busyB() ? clas(css.freeOverlay, css.busyOverlay) : css.freeOverlay}>\n          <Spinner className={css.centerFullHeight} style={{ opacity: spinB() ? 0.8 : 0 }} label='Loading...' size={SpinnerSize.large} />\n        </div>\n      )\n    on(busyB, busy => {\n      window.clearTimeout(spinTimeout)\n      if (busy) {\n        spinTimeout = window.setTimeout(() => spinB(true), spinDelay)\n      } else {\n        spinB(false)\n      }\n    })\n    return { render, busyB, spinB }\n  }),\n  App = bond(() => {\n    const\n      contentB = box<{ page?: Page, error?: S }>({}),\n      onSocket = (e: SockEvent) => {\n        switch (e.t) {\n          case SockEventType.Data:\n            contentB({ page: e.page })\n            break\n          case SockEventType.Message:\n            if (e.type === SockMessageType.Err) contentB({ error: e.message })\n            break\n          case SockEventType.Reset:\n            window.location.reload()\n            break\n        }\n      },\n      onHashChanged = () => {\n        const h = window.location.hash\n        if (h?.length > 1) {\n          qd.args['#'] = h.substr(1)\n        }\n        qd.sync()\n      },\n      init = () => {\n        connect('/_s', onSocket)\n        window.addEventListener('hashchange', onHashChanged)\n      },\n      render = () => {\n        const { page, error } = contentB()\n        // TODO prettier error section\n        if (error) {\n          const errorMessage = error === 'not_found'\n            ? <Spinner label='Waiting for content...' size={SpinnerSize.large} />\n            : error\n          return <div className={clas(css.centerFullHeight, css.app)}>{errorMessage}</div>\n        }\n        if (!page) return <Spinner className={css.centerFullHeight} size={SpinnerSize.large} label='Loading ...' />\n\n        return (\n          <Fluent.Fabric applyTheme>\n            <div className={css.app}>\n              <PageLayout key={page.key} page={page} />\n              <BusyOverlay />\n              <Dialog />\n            </div>\n          </Fluent.Fabric>\n        )\n      },\n      dispose = () => {\n        window.removeEventListener('hashchange', onHashChanged)\n      }\n\n    return { init, render, dispose, contentB, theme: qd.theme }\n  })\n\nexport default App\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport Login from './login'\nimport App from './app'\nimport { Switch, Route, BrowserRouter } from 'react-router-dom'\n\nconst\n  Router = () => {\n    const\n      routes = [\n        {\n          path: '/_login',\n          exact: true,\n          render: () => <Login />,\n        },\n        {\n          path: '/',\n          exact: false,\n          render: () => <App />\n        },\n      ]\n    return (\n      <BrowserRouter>\n        <Switch>\n          {routes.map((r, i) => <Route key={i} path={r.path} exact={r.exact} render={r.render} />)}\n        </Switch>\n      </BrowserRouter>\n    )\n  }\n\nexport default Router\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, Id, qd, S } from './qd'\n\n/** Create a breadcrumb for a `h2o_wave.types.BreadcrumbsCard()`. */\ninterface Breadcrumb {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: Id\n  /** The label to display. */\n  label: S\n}\n/**\n * Create a card containing breadcrumbs.\n * Breadcrumbs should be used as a navigational aid in your app or site.\n * They indicate the current page’s location within a hierarchy and help\n * the user understand where they are in relation to the rest of that hierarchy.\n * They also afford one-click access to higher levels of that hierarchy.\n * Breadcrumbs are typically placed, in horizontal form, under the masthead\n * or navigation of an experience, above the primary content area.\n */\ninterface State {\n  /** A list of `h2o_wave.types.Breadcrumb` instances to display. See `h2o_wave.ui.breadcrumb()` */\n  items: Breadcrumb[]\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      items = state.items.map(({ name, label }) => ({\n        key: name,\n        text: label,\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }\n      )),\n      render = () => (\n        <div data-test={name} className={css.card}>\n          <Fluent.Breadcrumb items={items} styles={{ root: { margin: 0 } }} />\n        </div>\n      )\n\n    return { render, changed }\n  })\n\ncards.register('breadcrumbs', View, CardEffect.Transparent)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Dict, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out using a one-dimensional model with flexible alignemnt and wrapping capabilities.\n **/\ninterface State {\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n  /** Layout direction. */\n  direction?: 'horizontal' | 'vertical'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n}\n\nconst\n  directions: Dict<S> = {\n    horizontal: 'row',\n    vertical: 'column',\n  },\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toFlexStyle = (state: State): React.CSSProperties => {\n    const\n      css: React.CSSProperties = { display: 'flex' },\n      direction = directions[state.direction || ''],\n      justify = justifications[state.justify || ''],\n      align = alignments[state.align || ''],\n      wrap = wrappings[state.wrap || '']\n\n    if (direction) css.flexDirection = direction as any\n    if (justify) css.justifyContent = justify\n    if (align) css.alignItems = align\n    if (wrap) {\n      css.flexWrap = 'wrap'\n      css.alignContent = wrap\n    }\n    return css\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        // FIXME theme.merge()\n        return (\n          <div data-test={name} style={toFlexStyle(state)} >\n            <Repeat view={state.item_view} props={state.item_props} data={state.data} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('flex', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { Markdown } from './markdown'\nimport { bond, Card, S } from './qd'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n  })\n\n\n/**\n * Render a page footer displaying a caption.\n * Footer cards are typically displayed at the bottom of a page.\n */\ninterface State {\n  /** The caption. Supports markdown. */\n  caption: S\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { caption } = state\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s13'><Markdown source={caption} /></div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('footer', View, CardEffect.Transparent)\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, Data, Dict, F, Rec, Recs, S, U, unpack } from './qd'\n\n\n/** Create a card for displaying vector graphics. */\ninterface State {\n  /**\n   * The position and dimension of the SVG viewport, in user space.\n   * A space-separated list of four numbers: min-x, min-y, width and height.\n   * For example, '0 0 400 300'.\n   * See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\n   */\n  view_box: S\n  /** Background layer for rendering static SVG elements. Must be packed to conserve memory. */\n  stage?: Recs\n  /** Foreground layer for rendering dynamic SVG elements. */\n  scene?: Data\n  /**\n   * The displayed width of the rectangular viewport.\n   * (Not the width of its coordinate system.)\n   */\n  width?: S\n  /**\n   * The displayed height of the rectangular viewport.\n   * (Not the height of its coordinate system.)\n   */\n  height?: S\n}\n\nconst\n  toAttributes = (d: any): [S, any] => {\n    const\n      t = d['_t'] || 'u',  // default to '<use/>'\n      a: any = {}\n    delete d['_t']\n\n    for (const k in d) a[k.replace(/_./g, x => x.substr(1).toUpperCase())] = d[k] // xml_attr to xmlAttr\n    return [t, a]\n  },\n  extract = (d: any, extra: S[]): any[] => {\n    const e: any[] = []\n    for (const k of extra) e.push(d[k])\n    for (const k of extra) delete d[k]\n    return e\n  },\n  nums = (s: S): F[] => s.split(/\\s/g).map(x => +x),\n  zip = <T1, T2, T3>(a: T1[], b: T2[], f: (a: T1, b: T2) => T3): T3[] => {\n    const\n      n = a.length,\n      c: T3[] = new Array(n)\n    for (let i = 0; i < n; i++) c[i] = f(a[i], b[i])\n    return c\n  },\n  zip3 = <T1, T2, T3, T4>(a: T1[], b: T2[], c: T3[], f: (a: T1, b: T2, c: T3) => T4): T4[] => {\n    const\n      n = a.length,\n      d: T4[] = new Array(n)\n    for (let i = 0; i < n; i++) d[i] = f(a[i], b[i], c[i])\n    return d\n  },\n  curves: Dict<d3.CurveFactory> = {\n    basis: d3.curveBasis,\n    'basis-closed': d3.curveBasisClosed,\n    'basis-open': d3.curveBasisOpen,\n    cardinal: d3.curveCardinal,\n    'cardinal-closed': d3.curveCardinalClosed,\n    'cardinal-open': d3.curveCardinalOpen,\n    smooth: d3.curveCatmullRom,\n    'smooth-closed': d3.curveCatmullRomClosed,\n    'smooth-open': d3.curveCatmullRomOpen,\n    linear: d3.curveLinear,\n    'linear-closed': d3.curveLinearClosed,\n    'monotone-x': d3.curveMonotoneX,\n    'monotone-y': d3.curveMonotoneY,\n    natural: d3.curveNatural,\n    step: d3.curveStep,\n    'step-after': d3.curveStepAfter,\n    'step-before': d3.curveStepBefore,\n  },\n  ret0 = () => 0,\n  get0 = (d: any) => d[0],\n  get1 = (d: any) => d[1],\n  get2 = (d: any) => d[2]\n\nconst\n  css = stylesheet({\n    card: {\n      position: 'absolute',\n      left: grid.gap, top: grid.gap, right: grid.gap, bottom: grid.gap,\n    },\n  })\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    type El = { d: S, o: S }\n\n    const\n      renderEl = (o: Rec, i: U) => {\n        const\n          [t, a] = toAttributes(o)\n        switch (t) {\n          case 'a': {\n            const\n              [r1, r2, a1, a2] = extract(a, ['r1', 'r2', 'a1', 'a2']),\n              d = d3.arc()({\n                innerRadius: r1,\n                outerRadius: r2,\n                startAngle: a1 * Math.PI / 180.0,\n                endAngle: a2 * Math.PI / 180.0,\n              })\n            return <path key={i} {...a} d={d} />\n          }\n          case 'c': return <circle key={i} {...a} />\n          case 'e': return <ellipse key={i} {...a} />\n          case 'i': return <image key={i} {...a} />\n          case 'l': return <line key={i} {...a} />\n          case 'p': return <path key={i} {...a} />\n          case 'pg': return <polygon key={i} {...a} />\n          case 'pl': return <polyline key={i} {...a} />\n          case 'r': return <rect key={i} {...a} />\n          case 's': {\n            const\n              [x, y, x0, y0, curve, radial] = extract(a, ['x', 'y', 'x0', 'y0', 'curve', 'radial']),\n              c = curves[curve] || d3.curveLinear,\n              d = radial\n                ? y0 === ''\n                  ? d3.radialArea().angle(get0).outerRadius(get1).innerRadius(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.radialArea().angle(get0).outerRadius(get2).innerRadius(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.radialArea().endAngle(get0).startAngle(ret0).radius(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.radialArea().endAngle(get1).startAngle(get0).radius(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.radialLine().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n                : y0 === ''\n                  ? d3.area().x(get0).y1(get1).y0(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.area().x(get0).y1(get2).y0(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.area().x1(get0).x0(ret0).y(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.area().x1(get1).x0(get0).y(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.line().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n            return <path key={i} {...a} d={d} />\n          }\n          case 't': {\n            const [text] = extract(a, ['text'])\n            return <text key={i} {...a} >{text}</text>\n          }\n          default: return <use key={i} {...a} />\n        }\n      },\n      render = () => {\n        const\n          { view_box, width, height, stage, scene } = state,\n          stageEls = stage ? unpack<Recs>(stage).map(renderEl) : [],\n          sceneEls = scene ? unpack<El[]>(scene).map(({ d, o }, i) => renderEl({\n            ...(d ? JSON.parse(d) : {}),\n            ...(o ? JSON.parse(o) : {}),\n          }, i)) : []\n        return (\n          <div data-test={name} className={css.card}>\n            <svg viewBox={view_box} width={width} height={height}>\n              <g>{stageEls}</g>\n              <g>{sceneEls}</g>\n            </svg>\n          </div>\n        )\n\n      }\n    return { render, changed }\n  })\n\ncards.register('graphics', View)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, Card, unpack, Rec, S, Data, xid, box, bond } from './qd'\nimport { cards, CardView, Format } from './layout'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid var(--text1)',\n          padding: '5px 0',\n        },\n      },\n    },\n    table: {\n      width: '100%',\n    }\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  cells: Data\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        let cells = unpack<any[]>(s.cells)\n\n        if (!Array.isArray(cells)) cells = [{ title: 'Data' }]\n\n        const\n          ths = cells.map((cell, i) => (<th key={i}>{cell.title}</th>)),\n          columns = cells.map(({ view, props, value }) => ({ view, props: unpack<Rec>(props), value })),\n          trs = unpack<Rec[]>(s.data).map((data, i) => {\n            const tds = columns.map(({ view, props, value }, j) => {\n              if (value != null) {\n                return <td><Format data={data} format={value} /></td>\n              } else {\n                const card: Card<any> = {\n                  name: xid(),\n                  state: { ...props, view, data },\n                  changed: box<B>(),\n                }\n                return <td><CardView key={j} card={card} /></td>\n              }\n            })\n            return (<tr key={i}>{tds}</tr>)\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{s.title || 'Untitled'}</div>\n            <div className={css.body}>\n              <table className={css.table}>\n                <thead>\n                  <tr>{ths}</tr>\n                </thead>\n                <tbody>\n                  {trs}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('grid', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { INavLink, INavLinkGroup, Nav } from '@fluentui/react'\nimport React from 'react'\nimport { CardEffect, cards } from './layout'\nimport { B, bond, Card, Id, qd, S } from './qd'\n\n/** Create a navigation item. */\nexport interface NavItem {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: Id\n  /** The label to display. */\n  label: S\n  /** An optional icon to display next to the label. */\n  icon?: S\n  /** True if this item should be disabled. */\n  disabled?: B\n}\n\n/** Create a group of navigation items. */\nexport interface NavGroup {\n  /** The label to display for this group. */\n  label: S\n  /** The navigation items contained in this group. */\n  items: NavItem[]\n  /** Indicates whether nav groups should be rendered as collapsed initially */\n  collapsed?: B\n}\n\n/** Create a card containing a navigation pane. */\nexport interface State {\n  /** The navigation groups contained in this pane. */\n  items: NavGroup[]\n  /** The name of the active (highlighted) navigation item. */\n  value?: S\n}\n\nexport const\n  XNav = ({ items, value }: State) => {\n    const groups = items.map((g): INavLinkGroup => ({\n      name: g.label,\n      collapseByDefault: g.collapsed,\n      links: g.items.map(({ name, label, icon, disabled }): INavLink => ({\n        key: name,\n        name: label,\n        icon,\n        disabled,\n        url: '',\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }))\n    }))\n    return <Nav groups={groups} selectedKey={value} />\n  },\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <div data-test={name}><XNav {...state} /></div>\n    return { render, changed }\n  })\n\ncards.register('nav', View, CardEffect.Flat)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon, Panel, PanelType } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { NavGroup, XNav } from './nav'\nimport { bond, Box, box, Card, S, B } from './qd'\nimport { clas, cssVar, padding } from './theme'\n\nconst\n  iconSize = 24,\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      alignItems: 'center',\n      padding: padding(8, 15),\n    },\n    lhs: {\n      width: iconSize + 15,\n      height: iconSize + 15,\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'default',\n    },\n    burger: {\n      $nest: {\n        '&:hover': {\n          color: cssVar('page'),\n          cursor: 'pointer',\n        },\n      },\n    },\n    icon: {\n      fontSize: iconSize,\n      height: iconSize,\n      width: iconSize,\n    },\n    rhs: {\n      flexGrow: 1\n    },\n    subtitle: {\n      position: 'relative',\n      top: -5, // nudge up slightly to account for padding\n    },\n  })\n\n\n/**\n * Render a page header displaying a title, subtitle and an optional navigation menu.\n * Header cards are typically used for top-level navigation.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The subtitle, displayed below the title. */\n  subtitle: S\n  /** The icon type, displayed to the left. */\n  icon?: S\n  /** The icon's color. */\n  icon_color?: S\n  /** The navigation menu to display when the header's icon is clicked. */\n  nav?: NavGroup[]\n}\n\nconst\n  Navigation = bond(({ items, isOpenB }: { items: NavGroup[], isOpenB: Box<B> }) => {\n    const\n      hideNav = () => isOpenB(false),\n      render = () => (\n        <Panel\n          isLightDismiss\n          type={PanelType.smallFixedNear}\n          isOpen={isOpenB()}\n          onDismiss={hideNav}\n          hasCloseButton={false}\n        >\n          <XNav items={items} />\n        </Panel>\n      )\n    return { render, isOpenB }\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      navB = box(false),\n      showNav = () => navB(true),\n      render = () => {\n        const\n          { title, subtitle, icon, icon_color, nav } = state,\n          burger = nav\n            ? (\n              <div className={clas(css.lhs, css.burger)} onClick={showNav}>\n                <FontIcon className={css.icon} iconName='GlobalNavButton' />\n              </div>\n            ) : (\n              <div className={css.lhs}>\n                <FontIcon className={css.icon} iconName={icon ?? 'WebComponents'} style={{ color: cssVar(icon_color) }} />\n              </div>\n            )\n\n        return (\n          <div data-test={name} className={css.card}>\n            {burger}\n            <div className={css.rhs}>\n              <div className='s24 w3'>{title}</div>\n              <div className={clas(css.subtitle, 's12')}>{subtitle}</div>\n            </div>\n            {nav && <Navigation items={nav} isOpenB={navB} />}\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('header', View, CardEffect.Raised)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, Rec, S } from './qd'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    img: {\n      flexGrow: 1,\n      objectFit: 'contain',\n      maxHeight: 'calc(100% - 20px)'\n    }\n  })\n\n/** Create a card that displays a base64-encoded image. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The image MIME subtype. One of `apng`, `bmp`, `gif`, `x-icon`, `jpeg`, `png`, `webp`. */\n  type: S\n  /** Image data, base64-encoded. */\n  image: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <Format data={s.data} format={s.title} className='s12 w6' />\n        <img className={css.img} alt={s.title} src={`data:image/${s.type};base64,${s.image}`} />\n      </div >\n    )\n    return { render, changed }\n  })\n\ncards.register('image', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { F, S, U } from '../qd'\n\nconst css = stylesheet({\n  body: {\n    position: 'relative',\n  },\n  rail: {\n    position: 'absolute',\n    width: '100%',\n    opacity: 0.15,\n  },\n  bar: {\n    position: 'absolute',\n  }\n})\n\ninterface Props {\n  thickness: U\n  color: S\n  value: F\n}\n\nexport const ProgressBar = ({ thickness, color, value }: Props) => {\n  return (\n    <div className={css.body} style={{ height: thickness }}>\n      <div className={css.rail} style={{ height: thickness, backgroundColor: color }} />\n      <div className={css.bar} style={{ width: `${Math.round(value * 100)}%`, height: thickness, backgroundColor: color }} />\n    </div>\n  )\n}\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressBar } from './parts/progress_bar'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      padding: grid.gap,\n    },\n    values: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    aux_value: {\n      color: 'var(--text7)',\n    },\n    caption: {\n      color: 'var(--text5)',\n    },\n    captions: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      color: 'var(--text7)',\n    },\n  })\n\n/** Create a large captioned card displaying a primary value, an auxiliary value and a progress bar, with captions for each value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The card's caption. */\n  caption: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value, typically a target value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  value_caption: S\n  /** The caption displayed below the auxiliary value. */\n  aux_value_caption: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className='s12 w6' />\n          <Format data={data} format={s.caption} className={clas(css.caption, 's13')} />\n          <div>\n            <div className={clas(css.values, 's18 w3')}>\n              <div><Format data={data} format={s.value} /></div>\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n            <ProgressBar thickness={2} color={cssVar(s.plot_color)} value={s.progress} />\n            <div className={clas(css.captions, 's12')}>\n              <div><Format data={data} format={s.value_caption} /></div>\n              <div><Format data={data} format={s.aux_value_caption} /></div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('large_bar_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, Rec, S } from './qd'\nimport { clas } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    aux_value: {\n      marginLeft: 5,\n      color: 'var(--text6)',\n    },\n    caption: {\n      color: 'var(--text5)',\n    }\n  })\n\n/** Create a stat card displaying a primary value, an auxiliary value and a caption. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  caption: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <Format data={s.data} format={s.title} className='s12 w6' />\n        <div className={css.values}>\n          <Format data={s.data} defaultValue={s.value} format={s.value} className='s40 w2' />\n          <Format data={s.data} format={s.aux_value} className={css.aux_value} />\n        </div>\n        <Format data={s.data} format={s.caption} className={clas(css.caption, 's13')} />\n      </div>\n    )\n\n    return { render, changed }\n  })\n\ncards.register('large_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid var(--text1)',\n          padding: '5px 0',\n        },\n      },\n    }\n  })\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out in the form of a list (vertically, top-to-bottom).\n **/\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{s.title}</div>\n            <div className={css.body}>\n              <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, unpack, Rec, S } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    item: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    left: {\n      flexDirection: 'column',\n    },\n    right: {\n      flexDirection: 'column',\n    },\n    caption: {\n      color: cssVar('text5'),\n    },\n    aux_value: {\n      color: cssVar('text5'),\n    },\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  caption: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  aux_value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Rec\n}\n\nconst defaults: Partial<State> = {\n  title: 'Untitled',\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = { ...defaults, ...state },\n          data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.item}>\n            <div className={css.left}>\n              <Format data={data} format={s.title} className='s12 w6' />\n              <Format data={data} format={s.caption} className={clas(css.caption, 's13')} />\n            </div>\n            <div className={css.right}>\n              <Format data={data} format={s.value} className='s12' />\n              <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's13')} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list_item1', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { bond, Card, S } from './qd'\nimport { cards } from './layout'\n\nexport const\n  View = bond(({ name, state, changed }: Card<Record<S, unknown>>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <pre>{JSON.stringify(state, null, 2)}</pre>\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, unpack, Rec, S, qd, U } from './qd'\n\nconst\n  pixelSize = 20,\n  canvasSize = pixelSize * 16,\n  palette = '#ffffff #bfbfbf #808080 #404040 #000000 #6699ff #3366cc #003399 #99cc33 #00cc00 #669900 #ffcc00 #ff9900 #ff6600 #cc0000'.split(/\\s+/g)\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    canvas: {\n      display: 'flex', flexWrap: 'wrap',\n      width: canvasSize, height: canvasSize,\n    },\n    swatches: {\n      paddingTop: 10,\n      marginTop: 15,\n      borderTop: '1px solid #ccc',\n    },\n    pixel: {\n      display: 'inline-block',\n      width: pixelSize, height: pixelSize,\n    }\n  }),\n  defaultColorAt = (i: U): S => {\n    const\n      row = Math.floor(i / 16),\n      col = i % 16,\n      odd = col % 2 === 1\n    return row % 2 === 0\n      ? odd ? '#fff' : '#ddd'\n      : odd ? '#ddd' : '#fff'\n\n  }\n\n/** Create a card displaying a collaborative Pixel art tool, just for kicks. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The data for this card.*/\n  data: Rec\n}\n\n/** A pixel. */\ninterface Pixel {\n  /** The pixel's color. */\n  color: S\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    let brush = '#000'\n    const\n      paint = (i: U) => {\n        const page = qd.page()\n        page.set(`${name} data ${i}`, brush === 'none' ? null : [brush])\n        page.sync()\n      },\n      render = () => {\n        const\n          data = unpack<(Pixel | null)[]>(s.data),\n          swatches = palette.map((c, i) => (\n            <div\n              key={i}\n              className={css.pixel}\n              style={{ backgroundColor: c }}\n              onClick={() => brush = c}\n            />\n          )),\n          pixels = data.map((p, i) => {\n            const color = p ? p.color : defaultColorAt(i)\n            return (\n              <div\n                key={i}\n                className={css.pixel}\n                style={{ backgroundColor: color }}\n                onClick={() => paint(i)}\n              />\n            )\n          })\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{s.title}</div>\n            <div className={css.canvas}>{pixels}</div>\n            <div className={css.swatches}>\n              <div className={css.pixel}>\n                <svg onClick={() => brush = 'none'} viewBox=\"0 0 433.25 433.25\" width={pixelSize} height={pixelSize}>\n                  <path d=\"M418.4,192.331c19.8-19.8,19.8-51.9,0-71.7l-0.1-0.1l-78.6-78.3c-19.8-19.8-51.9-19.7-71.8,0l-169.5,169.6l-54.2,54.1 c-19.8,19.7-19.8,51.8-0.1,71.6l48.3,48.3H10c-5.5,0-10,4.5-10,10s4.5,10,10,10h297.4c5.5,0,10-4.5,10-10s-4.5-10-10-10H225 l23.9-23.7L418.4,192.331z M196.7,385.831h-76.1l-62.3-62.4c-12-12-11.9-31.4,0-43.4l47.1-47l122.2,122L196.7,385.831z M119.6,218.931l162.5-162.5c12-12,31.5-12,43.5,0l78.6,78.4c12,12,12,31.4,0,43.5l-162.4,162.8L119.6,218.931z\" />\n                </svg>\n              </div>\n              {swatches}\n            </div>\n          </div>)\n\n      }\n    return { render, changed }\n  })\n\ncards.register('pixel_art', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards.\n **/\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('repeat', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component, XComponentAlignment, XComponents } from './form'\nimport { CardEffect, cards } from './layout'\nimport { Markdown } from './markdown'\nimport { bond, Card, Packed, S, unpack } from './qd'\nimport { clas } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      paddingTop: 5,\n    },\n    lhs: {\n      flexGrow: 1,\n    },\n    subtitle: {\n      $nest: {\n        '>div>p': { margin: 0 },\n      },\n    },\n  })\n\n\n/**\n * Render a card displaying a title, a subtitle, and optional components.\n * Section cards are typically used to demarcate different sections on a page. \n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The subtitle, displayed below the title. Supports Markdown. */\n  subtitle: S\n  /** The components to display in this card */\n  items?: Packed<Component[]>\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { title, subtitle, items } = state,\n          components = unpack<Component[]>(items), // XXX ugly\n          form = items && (\n            <div>\n              <XComponents items={components} alignment={XComponentAlignment.Right} />\n            </div>\n          )\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.lhs}>\n              <div className='s14 w6'>{title}</div>\n              <div className={clas(css.subtitle, 's12')}><Markdown source={subtitle} /></div>\n            </div>\n            {form}\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('section', View, CardEffect.Transparent)\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S } from '../qd'\n\ninterface Props {\n  data: any[]\n  zeroValue?: F\n  value: S\n  color: S\n  curve: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n}\n\nconst curves: Record<S, d3.CurveFactory> = {\n  linear: d3.curveLinear,\n  smooth: d3.curveCatmullRom,\n  step: d3.curveStep,\n  'step-after': d3.curveStepAfter,\n  'step-before': d3.curveStepBefore,\n}\n\nconst css = stylesheet({\n  container: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n    flexGrow: 1,\n    minHeight: 32,\n  }\n})\n\nexport const MicroArea = ({ value, color, data, zeroValue, curve }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement>(null),\n    [minY, maxY] = React.useMemo(() => {\n      let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n      if (zeroValue != null) {\n        minY = Math.min(zeroValue, minY)\n        maxY = Math.max(zeroValue, maxY)\n      }\n      return [minY, maxY]\n    }, [data, zeroValue]),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        scaleX = d3.scaleLinear().domain([0, data.length - 1]).range([0, width]),\n        scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 2]),\n        fcurve = curves[curve] || d3.curveLinear,\n\n        ln = d3.line<any>()\n          // .curve(d3.curveBasis) // XXX add support for this\n          .defined(d => d && d[value] != null)\n          .x((_, i) => scaleX(i))\n          .y(d => scaleY(d[value]))\n          .curve(fcurve),\n        ar = d3.area<any>()\n          // .curve(d3.curveBasis) // XXX add support for this\n          .defined(d => d && d[value] != null)\n          .x((_, i) => scaleX(i))\n          .y0(_ => scaleY(zeroValue == null ? minY : zeroValue))\n          .y1(d => scaleY(d[value]))\n          .curve(fcurve)\n\n      setContent(\n        <svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>\n          <path d={ar(data) as S} fill={color} fillOpacity='0.1' strokeLinejoin='round' strokeLinecap='round'></path>\n          <path d={ln(data) as S} fill='none' stroke={color} strokeWidth='1.5' strokeLinejoin='round' strokeLinecap='round'></path>\n        </svg>\n      )\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [value, color, data, zeroValue, curve])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S } from '../qd'\n\ninterface Props {\n  data: any[]\n  zeroValue?: F\n  category?: S\n  value: S\n  color: S\n}\n\nconst css = stylesheet({\n  container: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n    flexGrow: 1,\n    minHeight: 32,\n  }\n})\n\nexport const MicroBars = ({ value, category = 'x', color, data, zeroValue }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement | null>(null),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    [minY, maxY] = React.useMemo(() => {\n      let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n      if (zeroValue != null) {\n        minY = Math.min(zeroValue, minY)\n        maxY = Math.max(zeroValue, maxY)\n      }\n      return [minY, maxY]\n    }, [data, zeroValue]),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        scaleX = d3.scaleBand().domain(data.map(d => d[category])).range([0, width]).paddingInner(0.1),\n        scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 0]),\n        rects = data.map((d, i) => {\n          const x = scaleX(d[category]), y = scaleY(d[value])\n          return <rect key={i} fill={color} x={x} y={y} width={2} height={height - y} />\n        })\n      setContent(<svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>{rects}</svg>)\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [value, category, color, data, zeroValue])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, unpack, F, Rec, S, Data } from './qd'\nimport { cssVar } from './theme'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    text: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      padding: grid.gap,\n    },\n  })\n\n/** Create a small stat card displaying a primary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.text}>\n            <Format data={data} format={s.title || 'Untitled'} className='s12 w6' />\n            <Format data={data} format={s.value} className='s12' />\n          </div>\n          {plot}\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('small_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { clas } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    value: {\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    }\n  })\n\n/** Create a stat card displaying a single value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className='s12 w6' />\n          <Format data={data} format={s.value} className={clas(css.value, 's24 w3')} />\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('small_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\nimport { clas, cssVar } from './theme'\n\n\n/**\n * Render a card displaying a list of stats.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The individual stats to be displayed. */\n  items: StatListItem[]\n  // TODO optional data for buffer-based rendering.\n  /** An optional name for this item. */\n  name?: S\n  /** The subtitle, displayed below the title. */\n  subtitle?: S\n}\n\n/** Create a stat item (a label-value pair) for stat_list_card. */\nexport interface StatListItem {\n  /** The label for the metric. */\n  label: S\n  /** An optional name for this item (required only if this item is clickable). */\n  name?: S\n  /** The caption for the metric, displayed below the label. */\n  caption?: S\n  /** The primary value of the metric. */\n  value?: S\n  /** The font color of the primary value. */\n  value_color?: S\n  /** The auxiliary value, displayed below the primary value. */\n  aux_value?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n    },\n    items: {\n      overflow: 'auto',\n      flexGrow: 1,\n      marginTop: '1em',\n    },\n    item: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      borderBottom: '1px solid #ddd',\n      padding: '0.5em 0',\n      $nest: {\n        '&:last-child': {\n          borderBottom: 'none'\n        }\n      }\n    },\n    icon: {\n      padding: '0.2em 0.5em 0em 0.1em',\n    },\n    lhs: {\n      flexGrow: 1,\n    },\n    rhs: {\n      textAlign: 'right'\n    },\n    caption: {\n      opacity: 0.7,\n    },\n    auxValue: {\n      opacity: 0.7,\n    },\n    clickable: {\n      cursor: 'pointer',\n      $nest: {\n        '&:hover': {\n          backgroundColor: '#fafafa',\n        }\n      },\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { name: listName, title, subtitle, items } = state,\n          list = items.map(({ name: itemName, label, caption, value, value_color, aux_value, icon, icon_color }, i) => {\n            const\n              onClick = itemName ? () => qd.jump(listName, itemName) : undefined\n            return (\n              <div key={itemName ?? `${i}:${label}`} className={onClick ? clas(css.item, css.clickable) : css.item} onClick={onClick}>\n                {icon && <div className={css.icon} style={icon_color ? { color: cssVar(icon_color) } : undefined}><FontIcon iconName={icon} /></div>}\n                <div className={css.lhs}>\n                  <div className='s12 w6'>{label}</div>\n                  {caption && <div className={clas(css.caption, 's12')}>{caption}</div>}\n                </div>\n                <div className={css.rhs}>\n                  {value && (\n                    <div className='s13 w6' style={value_color ? { color: cssVar(value_color) } : undefined}>{value}</div>\n                  )}\n                  {aux_value && <div className={clas(css.auxValue, 's12')}>{aux_value}</div>}\n                </div>\n              </div>\n            )\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{title}</div>\n            {subtitle && <div className='s12'>{subtitle}</div>}\n            <div className={css.items}>\n              {list}\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('stat_list', View, CardEffect.Normal)\n\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\nimport { clas, cssVar } from './theme'\n\n\n/**\n * Render a card displaying a table of stats.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The names of this table's columns. */\n  columns: S[]\n  /** The rows displayed in this table. */\n  items: StatTableItem[]\n  // TODO optional data for buffer-based rendering.\n  /** An optional name for this item. */\n  name?: S\n  /** The subtitle, displayed below the title. */\n  subtitle?: S\n}\n\n/** Create a stat item (a label and a set of values) for stat_table_card. */\nexport interface StatTableItem {\n  /** The label for the row. */\n  label: S\n  /** The values displayed in the row. */\n  values: S[]\n  /** An optional name for this row (required only if this row is clickable). */\n  name?: S\n  /** The caption for the metric, displayed below the label. */\n  caption?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n      // HACK: for some reason, the overflow on 'items' does not take effect without this line.\n      overflow: 'auto',\n    },\n    items: {\n      flexGrow: 1,\n      overflow: 'auto',\n      marginTop: '1em',\n    },\n    table: {\n      borderSpacing: 0,\n      width: '100%',\n      $nest: {\n        tbody: {\n          $nest: {\n            th: {\n              borderTop: '1px solid #ddd',\n              textAlign: 'left',\n              padding: '0.5em 1em 0.5em 0',\n            },\n            td: {\n              borderTop: '1px solid #ddd',\n              padding: '0.5em 0 0.5em 1em',\n            },\n          },\n        },\n        td: {\n          textAlign: 'right',\n          verticalAlign: 'top',\n        }\n      }\n    },\n    thead: {\n      opacity: 0.4,\n      $nest: {\n        th: {\n          textAlign: 'right',\n          width: '1%',\n          whiteSpace: 'nowrap',\n          padding: '0.5em 0 0.5em 1em',\n        },\n        'th:first-child': {\n          textAlign: 'left',\n          width: '100%',\n          padding: '0.5em 1em 0.5em 0',\n        }\n      },\n    },\n    header: {\n      display: 'flex',\n    },\n    caption: {\n      opacity: 0.7,\n    },\n    icon: {\n      padding: '0.2em 0.5em 0em 0.1em',\n    },\n    clickable: {\n      cursor: 'pointer',\n      $nest: {\n        '&:hover': {\n          backgroundColor: '#fafafa',\n        }\n      },\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { name: tableName, title, columns, subtitle, items } = state,\n          header = columns.map((label, i) => (\n            <th key={`${i}:${label}`}>{label}</th>\n          )),\n          rows = items.map(({ name: rowName, label, values, caption, icon, icon_color }, i) => {\n            const\n              onClick = rowName ? () => qd.jump(tableName, rowName) : undefined,\n              cells = values.map((value, j) => (<td key={`${j}:${value}`}>{value}</td>))\n\n            return (\n              <tr key={rowName ?? `${i}:${label}`} className={onClick ? css.clickable : undefined} onClick={onClick}>\n                <th key='label'>\n                  <div className={css.header}>\n                    {icon && <div className={css.icon} style={icon_color ? { color: cssVar(icon_color) } : undefined}>\n                      <FontIcon iconName={icon} />\n                    </div>}\n                    <div>\n                      <div className='w6'>{label}</div>\n                      {caption && <div className={clas(css.caption, 's12 w4')}>{caption}</div>}\n                    </div>\n                  </div>\n                </th>\n                {cells}\n              </tr>\n            )\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className='s12 w6'>{title}</div>\n            {subtitle && <div className='s12'>{subtitle}</div>}\n            <div className={css.items}>\n              <table className={clas(css.table, 's13')}>\n                <thead className={clas(css.thead, 'w6')}>\n                  <tr>\n                    {header}\n                  </tr>\n                </thead>\n                <tbody>\n                  {rows}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('stat_table', View, CardEffect.Normal)\n\n\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Pivot, PivotItem, PivotLinkFormat } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { B, bond, Card, qd, S } from './qd'\nimport { Tab } from './tabs'\n\n/** Create a card containing tabs for navigation. */\ninterface State {\n  /** The tabs to display in this card */\n  items: Tab[]\n  /** The name of the tab to select. */\n  value?: S\n  /** True if tabs should be rendered as links instead of buttons. */\n  link?: B\n  /** An optional name for the card. If provided, the selected tab can be accessed using the name of the card. */\n  name?: S\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      onLinkClick = (item?: PivotItem) => {\n        const name = item?.props.itemKey\n        if (!name) return\n        if (name.startsWith('#')) {\n          window.location.hash = name.substr(1)\n          return\n        }\n        if (state.name) {\n          qd.args[state.name] = name\n        } else {\n          qd.args[name] = true\n        }\n        qd.sync()\n      },\n      render = () => {\n        const\n          linkFormat = state.link ? PivotLinkFormat.links : PivotLinkFormat.tabs,\n          items = state.items.map(({ name, label, icon }) => (\n            <PivotItem key={name} itemKey={name} headerText={label} itemIcon={icon} />\n          ))\n        return (\n          <div data-test={name} className={css.card}>\n            <Pivot linkFormat={linkFormat} onLinkClick={onLinkClick} defaultSelectedKey={state.value}>{items}</Pivot>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('tab', View, CardEffect.Transparent)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressArc } from './parts/progress_arc'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n      position: 'relative',\n    },\n    body: {\n      position: 'relative',\n      display: 'flex',\n      flexGrow: 1,\n    },\n    value_overlay: {\n      position: 'absolute',\n      top: 0, right: 0, bottom: 0, left: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    aux_value: {\n      color: 'var(--text7)',\n    },\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className='s12 w6' />\n          <div className={css.body}>\n            <ProgressArc thickness={2} color={cssVar(s.plot_color)} value={s.progress} />\n            <div className={css.value_overlay}>\n              <Format data={data} format={s.value} className='s24 w3' />\n              <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's12')} />\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('tall_gauge_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\nimport { bond, Card, Data, F, Rec, S, unpack } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    text: {\n      padding: grid.gap,\n    },\n    aux_value: {\n      color: 'var(--text7)',\n    },\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.text}>\n            <Format data={data} format={s.title || 'Untitled'} className='s12 w6' />\n            <Format data={data} format={s.value} className='s24 w3' />\n            <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's12')} />\n          </div>\n          {plot}\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('tall_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CommandBar, IButtonProps, ICommandBarItemProps } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, Id, qd, S } from './qd'\n\n/**\n * Create a command.\n *\n * Commands are typically displayed as context menu items or toolbar button.\n */\nexport interface Command {\n  /** An identifying name for this component. If the name is prefixed with a '#', the command sets the location hash to the name when executed. */\n  name: Id\n  /** The text displayed for this command. */\n  label?: S\n  /** The caption for this command (typically a tooltip). */\n  caption?: S\n  /** The icon to be displayed for this command. */\n  icon?: S\n  /** Sub-commands, if any */\n  items?: Command[]\n  /** Data associated with this command, if any. */\n  value?: S\n  /** DEPRECATED. Use `value` instead. Data associated with this command, if any. */\n  data?: S\n}\n\n\n/** Create a card containing a toolbar. */\ninterface State {\n  /** Items to render. */\n  items: Command[]\n  /** Items to render on the right side (or left, in RTL). */\n  secondary_items?: Command[]\n  /** Items to render in an overflow menu. */\n  overflow_items?: Command[]\n}\n\nconst\n  overflowProps: IButtonProps = { ariaLabel: 'More' },\n  toCommands = (commands: Command[]) => commands.map(toCommand),\n  toCommand = ({ name, label, caption, icon, items }: Command): ICommandBarItemProps => {\n    qd.args[name] = false\n    const onClick = () => {\n      if (name[0] === '#') {\n        window.location.hash = name.substr(1)\n        return\n      }\n      qd.args[name] = true\n      qd.sync()\n    }\n    return {\n      key: name,\n      text: label,\n      ariaLabel: caption || label,\n      title: caption,\n      iconOnly: !label,\n      iconProps: icon ? { iconName: icon } : undefined,\n      subMenuProps: items ? { items: toCommands(items) } : undefined,\n      onClick,\n    }\n  }\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    }\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { items, overflow_items, secondary_items } = state,\n          commands = toCommands(items),\n          overflowCommands = overflow_items ? toCommands(overflow_items) : undefined,\n          farCommands = secondary_items ? toCommands(secondary_items) : undefined\n        return (\n          <div className={css.card}>\n            <CommandBar\n              data-test={name}\n              items={commands}\n              overflowItems={overflowCommands}\n              overflowButtonProps={overflowProps}\n              farItems={farCommands}\n              ariaLabel='Use left and right arrow keys to navigate between commands.'\n            />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('toolbar', View, CardEffect.Transparent)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressBar } from './parts/progress_bar'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { clas, cssVar } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      padding: grid.gap,\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    content: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-end',\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    aux_value: {\n      marginLeft: 5,\n      color: cssVar('$text7'),\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress bar. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className='s12 w6' />\n          <div className={css.content}>\n            <div className={css.values}>\n              <Format data={data} format={s.value} className='s18 w3' />\n              <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's13')} />\n            </div>\n            <ProgressBar thickness={2} color={cssVar(s.plot_color)} value={s.progress} />\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_bar_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressArc } from './parts/progress_arc'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { cssVar, pc, clas } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      padding: grid.gap,\n    },\n    lhs: {\n      position: 'relative',\n      width: pc(50)\n    },\n    rhs: {\n      width: pc(50),\n      marginLeft: grid.gap,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    percentContainer: {\n      position: 'absolute',\n      top: 0, right: 0, bottom: 0, left: 0,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    percent: {\n      opacity: 0.5,\n    },\n    title: {\n      overflow: 'visible'\n    },\n    value: {\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    },\n    aux_value: {\n      color: 'var(--text7)',\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.lhs}>\n            <ProgressArc thickness={2} color={cssVar(s.plot_color)} value={s.progress} />\n            <div className={css.percentContainer}>\n              <div className={css.percent}>{`${Math.round(s.progress * 100)}%`}</div>\n            </div>\n          </div>\n          <div className={css.rhs}>\n            <Format data={data} format={s.title} className='s12 w6' />\n            <div className={css.values}>\n              <Format data={data} format={s.value} className='s24 w3' />\n              <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's13')} />\n            </div>\n          </div>\n        </div >\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_gauge_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\nimport { bond, Card, Data, F, Rec, S, unpack } from './qd'\nimport { cssVar, pc, clas } from './theme'\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      padding: grid.gap,\n    },\n    plot: {\n      display: 'flex',\n      width: pc(50),\n    },\n    text: {\n      width: pc(50),\n      paddingLeft: grid.gap,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    },\n    aux_value: {\n      color: cssVar('$text7'),\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={cssVar(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.plot}>{plot}</div>\n          <div className={css.text}>\n            <Format data={data} format={s.title} className='s12 w6' />\n            <div className={css.values}>\n              <Format data={data} format={s.value} className={clas(css.value, 's24 w3')} />\n              <Format data={data} format={s.aux_value} className={clas(css.aux_value, 's13')} />\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { initializeIcons, loadTheme } from '@fluentui/react'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Router from './router'\nimport './cards'\nimport './index.scss'\nimport * as serviceWorker from './serviceWorker'\nimport { fluentPalettes } from \"./theme\"\n\nloadTheme({\n  defaultFontStyle: { fontFamily: 'Inter' },\n  palette: fluentPalettes.light\n})\n\n// Initialize Fluent icons\ninitializeIcons()\n\nReactDOM.render(<Router />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}