{"version":3,"sources":["login.tsx","qd.ts","card_menu.tsx","intl.ts","theme.ts","layout.tsx","notification.ts","meta.tsx","page.tsx","markdown.tsx","tooltip.tsx","button.tsx","checkbox.tsx","checklist.tsx","choice_group.tsx","color_picker.tsx","combobox.tsx","date_picker.tsx","dropdown.tsx","expander.tsx","file_upload.tsx","frame.tsx","label.tsx","link.tsx","markup.tsx","message_bar.tsx","plot.tsx","picker.tsx","progress.tsx","range_slider.tsx","separator.tsx","slider.tsx","spinbox.tsx","stats.tsx","stepper.tsx","parts/progress_arc.tsx","progress_table_cell_type.tsx","icon_table_cell_type.tsx","table.tsx","tabs.tsx","template.tsx","text.tsx","textbox.tsx","toggle.tsx","vega.tsx","form.tsx","dialog.tsx","app.tsx","router.tsx","breadcrumbs.tsx","flex.tsx","footer.tsx","graphics.tsx","grid.tsx","nav.tsx","header.tsx","image.tsx","parts/progress_bar.tsx","large_bar_stat.tsx","large_stat.tsx","list.tsx","list_item1.tsx","none.tsx","pixel_art.tsx","repeat.tsx","section.tsx","parts/microarea.tsx","parts/microbars.tsx","small_series_stat.tsx","small_stat.tsx","stat_list.tsx","stat_table.tsx","tab.tsx","tall_gauge_stat.tsx","tall_series_stat.tsx","toolbar.tsx","wide_bar_stat.tsx","wide_gauge_stat.tsx","wide_series_stat.tsx","serviceWorker.ts","index.tsx"],"names":["css","stylesheet","login","width","minHeight","display","alignItems","justifyContent","flexDirection","Login","queryString","window","location","search","action","className","method","CompoundButton","type","secondaryText","different","_a","_b","box","x","length","undefined","equal","arrows","on","f","a","dispose","remove","push","broadcast","t","touch","y","__boxed__","boxed","args","react","slice","immediate","boxen","xs","emit","map","forEach","i","indexOf","splice","bond","ctor","props","model","self","Object","keys","k","v","_","setState","state","this","init","update","render","React","SockEventType","SockMessageType","guid","xid","parseI","s","test","parseInt","NaN","parseU","isNaN","unpack","data","decodeString","isData","list","debounce","timeout","e","clearTimeout","setTimeout","d","substring","decodeType","JSON","parse","console","error","fields","rows","Array","isArray","w","recs","r","rec","j","columns","n","isMap","isBuf","__buf__","isCur","__cur__","newType","m","reverseIndex","match","make","tup","newCur","get","set","newFixBuf","tups","seti","geti","put","newCycBuf","b","_k","newTups","loadCycBuf","loadFixBuf","loadMapBuf","ts","keysOf","sort","newMapBuf","loadBuf","c","loadCard","key","changedB","ks","p","gget","gset","buf","substr","id","name","changed","newPage","dirty","dirties","cards","add","card","split","valuesOf","drop","sync","load","page","exec","ops","op","keyseq","join","clearRec","qd","path","pathname","events","refreshRateB","busyB","socket","dialogB","changes","ref","value","del","sock","opsd","send","stringify","jump","startsWith","hash","close","backoff","currentPage","connect","handle","reconnect","address","retry","WebSocket","onopen","Message","Info","message","charAt","onclose","Warn","onmessage","line","msg","Data","Err","Reset","err","onerror","l","protocol","host","toSocketAddress","menu","position","top","right","$nest","height","padding","icon","userSelect","target","boxSizing","cursor","opacity","toContextMenuItem","text","label","iconProps","iconName","title","caption","subMenuProps","items","onClick","CardMenu","commands","hiddenB","show","hide","hidden","data-test","Icon","ContextualMenu","onItemClick","onDismiss","intlCache","createIntlCache","intl","createIntl","locale","navigator","language","messages","onError","isBareExpr","Handlebars","registerHelper","opts","replace","toUpperCase","kvToOpts","formatDate","formatTime","formatNumber","isFormatExpr","parseFormat","invocation","compile","bare","format","px","pc","rem","clas","names","border","thickness","color","margin","rgba","g","toFixed","displayMixin","visible","black","toPalette","palette","hex","rgb","tones","text0","text1","text2","text3","text4","text5","text6","text7","text8","text9","defaultColors","red","pink","purple","violet","indigo","blue","azure","cyan","teal","mint","green","lime","yellow","amber","orange","tangerine","brown","gray","palettes","light","dark","neon","fontStyles","size","tracking","fontSize","letterSpacing","lineHeight","Math","round","fontStyleFor","CardEffect","font","s6","s7","s8","s9","s10","s11","s12","s13","s14","s15","s16","s17","s18","s20","s24","s30","s40","s80","w1","fontWeight","w2","w3","w4","w5","w6","w7","w8","w9","theme","getTheme","colors","merge","defs","endsWith","loadTheme","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","white","register","effect","Normal","lookup","newCardRegistry","substitute","formatString","defaultValue","Format","CardView","Tag","view","Repeat","badPlacement","left","grid","uw","uh","cols","gap","scale","innerWidth","innerHeight","unitWidth","unitHeight","unitInnerWidth","unitInnerHeight","place","trim","normalize","h","slot","bottom","placeOnGrid","rescale","document","documentElement","clientWidth","body","clientHeight","min","inset","overflow","newGrid","transition","flexGrow","normal","backgroundColor","boxShadow","raised","flat","getCardEffectClass","getCardEffect","Raised","Flat","GridLayout","children","placement","zIndex","style","showNotification","notificationText","Notification","permission","requestPermission","layoutsB","preload","refresh","notification","redirect","layouts","dialog","iconLink","querySelector","touchIconLink","href","URL","View","presetBreakpoints","xl","breakpointsB","layoutB","resizedB","parseBreakpoint","spec","badSlot","order","parseBoxes","index","specs","zone","grow","parseBox","bps","layout","nextLayout","breakpoint","max","mq","matchMedia","listener","matches","bp","addListener","removeListener","flex","justifications","start","end","center","between","around","alignments","baseline","stretch","wrappings","toSectionStyle","direction","justify","align","alignContent","wrap","flexWrap","toSlotStyle","findSection","section","sections","FlexSection","cardslots","cardslot","FlexLayout","layoutIndex","toSection","zones","min_width","max_width","min_height","max_height","sortCardsInSection","minWidth","maxWidth","maxHeight","PageLayout","metaCard","onMetaCardChanged","segregate","metas","markdown","textDecoration","table","borderCollapse","tr","borderBottom","th","textAlign","td","img","markdownit","html","linkify","typographer","Markdown","source","dangerouslySetInnerHTML","__html","content","container","element","marginLeft","XToolTip","showIcon","expand","tooltipProps","onRenderContent","buttons","XButton","link","disabled","primary","XButtons","button","filter","Boolean","tooltip","horizontal","horizontalAlign","tokens","childrenGap","XStandAloneButton","XCheckbox","onChange","_e","checked","trigger","inputProps","defaultIndeterminate","indeterminate","defaultChecked","toolbar","XChecklistItem","selectedB","styles","root","marginBottom","XChecklist","values","_pause","defaultSelection","Set","choices","choice","has","capture","vs","select","selectAll","deselectAll","variant","XChoiceGroup","options","option","required","defaultSelectedKey","XColorPicker","onColorChanged","_id","str","cs","columnCount","selectedId","colorCells","XCombobox","textB","_index","placeholder","autoComplete","allowFreeform","errorMessage","pad2","parseDate","ss","ymd","Date","XDatePicker","onSelectDate","getFullYear","getMonth","getDate","XDropdown","isMultivalued","selection","selectedOptionsB","from","selected","delete","selectedOpts","clear","o","selectionArr","multiSelect","selectedKeys","expanderOpen","expanderClosed","XExpander","isOpenB","expanded","isOpen","actionTitle","expanderIcon","paddingLeft","uploadInput","upload","uploadDragging","uploadLabel","borderRadius","background","uploadMessageBar","uploadRemove","convertMegabytesToBytes","bytes","XFileUpload","isDraggingB","filesB","percentCompleteB","errorB","successMsgB","maxFileSizeBytes","max_file_size","maxSizeBytes","max_size","fileExtensions","file_extensions","formData","FormData","append","makeRequest","Promise","resolve","reject","xhr","XMLHttpRequest","open","onprogress","loaded","total","onreadystatechange","readyState","DONE","status","responseText","files","validateFiles","fileArr","multiple","notAllowedFiles","fileName","allowedExtension","toLowerCase","isFileTypeAllowed","maxSizePerFileExceededFiles","reduce","errMsg","onIsDragging","preventDefault","stopPropagation","onIsNotDragging","onDrop","dataTransfer","onDragOver","onDismissError","onDismissSuccess","uploadClasses","onDragStart","onDragEnter","onDragEnd","onDragLeave","messageBarType","Fluent","isMultiline","success","pointerEvents","description","percentComplete","verticalAlign","overflowX","nowrap","accept","htmlFor","marginTop","fixrefs","inline","createObjectURL","Blob","InlineFrame","src","frameBorder","XFrame","XLabel","XLink","download","XMarkup","MarkupCard","SpaceT","toMessageBarType","warning","severeWarning","blocked","info","XMessageBar","pickerSuggestionsProps","suggestionsHeaderText","noResultsFoundText","XPicker","tags","selectedTagsB","includes","filterSuggestedTags","filterText","selectedTags","isAlreadySelected","onEmptyResolveSuggestions","removeButtonAriaLabel","onResolveSuggestions","itemLimit","max_choices","selectedItems","hues","cat10","registerInteraction","processing","throttle","wait","leading","trailing","isF","isS","parseInts","convertToDates","ds","convertToPairs","f0","f1","xyVariants","xyExtra","makeXYProps","makeXYExtraProps","makeFormattables","xProps","yProps","xExtraProps","yExtraProps","otherProps","formattables","scaleTypeOf","marks","attr","field","spaceTypes","cc","CC","dd","DD","tt","TT","dc","DC","cd","CD","tc","TC","ct","CT","TD","dt","DT","dummyDatum","makeFormatFunc","datum","transposeMark","mark","tmp","refactorMark","plainAttr","fieldAttr","formatAttr","expr","fmts","fmt","refactorData","x_scale","x_field","x0_field","x0","y_scale","y_field","y0_field","y0","x1_field","x2_field","y1_field","y2_field","makeNote","fill_color","fill_opacity","stroke_color","stroke_opacity","stroke_size","stroke_dash","ref_stroke_color","ref_stroke_opacity","ref_stroke_dash","ref_stroke_size","label_fill_color","label_fill_opacity","label_stroke_color","label_stroke_opacity","label_stroke_size","label_font_size","label_font_weight","label_line_height","label_align","labelStyle","makeTextStyle","shapeStyle","makeShapeStyle","lineStyle","point","makeGeom","color_field","color_range","color_domain","shape_field","shape_range","shape","size_field","size_range","stack","dodge","dodge_field","curve","label_field","label_format","label_offset","label_offset_x","label_offset_y","label_rotation","label_position","label_overlap","adjust","marginRatio","dodgeBy","domain_colors","acc","callback","offset","offsetX","offsetY","i_label_rotation","autoRotate","rotate","PI","cfg","fill","fillOpacity","stroke","strokeOpacity","lineWidth","lineDash","font_size","font_weight","line_height","u_font_weight","makeScale","typ","nice","axis","autoHide","fixScaleType","formatter","alias","makeCoord","space","coord","getCoordType","transpose","actions","makeChart","el","coordinate","scales","axes","x_format","x_title","x_min","x_max","x_nice","x_axis","y_format","y_title","y_min","y_max","y_nice","y_axis","makeScales","geometries","annotations","makeMarks","autoFit","animate","interactions","showCrosshairs","crosshairs","XVisualization","currentChart","currentPlot","createRef","current","raw_data","plot","spaceTypeOf","chart","Chart","interaction","ev","gEvent","originalEvent","stateStatus","select_marks","changeData","XProgress","borderWidth","borderColor","transform","fontFamily","XRangeSlider","step","min_value","max_value","valueB","val","maxValue","minValue","allowSameValues","separator","XSeparator","XSlider","onChanged","_event","_value","buttonProps","showValue","originFromZero","XSpinbox","parseValue","parseFloat","isFinite","onBlur","onIncrement","newValue","String","onDecrement","stats","stat","lhs","marginRight","statLabel","statValue","statCaption","XStats","statStyle","justification","icon_color","FontIcon","stepNumber","iconStyles","XStepper","steps","createStep","Fragment","done","stepIdx","paddingRight","block","ProgressArc","useRef","useState","setContent","renderViz","getBoundingClientRect","diameter","outerRadius","innerRadius","d3","startAngle","endAngle","bar","viewBox","onResize","useEffect","addEventListener","removeEventListener","useLayoutEffect","percentContainer","percent","XProgressTableCellType","progress","XIconTableCellType","sortableHeader","sortingIcon","hideCellGroupCollapse","sortingF","column","sortAsc","rowA","rowB","dataType","formatNum","num","toString","XTable","item","cells","isMultiple","filteredItemsB","searchableKeys","searchable","searchStrB","selectedFiltersB","colContextMenuListB","groupsB","groupByKeyB","groupByOptions","groupable","col","onSearchChange","searchStr","initGroups","some","selectedFilters","filteredItems","every","filterKey","filterVal","reset","row","toCSV","createElement","blob","url","click","revokeObjectURL","onRenderMenuList","paddingTop","paddingBottom","filters","onDismissContextMenu","onColumnContextMenu","fieldName","directionalHint","bottomLeftEdge","gapSpace","isBeakVisible","arr","prevSum","groupedBy","rv","groupedByKeys","groups","prevKey","startIndex","count","isCollapsed","makeGroups","flatMap","onGroupByChange","onRenderDetailsHeader","stickyPosition","Header","isScrollSynced","onRenderDetailsFooter","searchOrFilter","filterable","downloadable","resettable","footerItems","Footer","onRenderRow","cell","alignSelf","onColumnClick","getAttribute","isSortable","group","columnsB","headerClassName","sortable","iconClassName","columnActionsMode","hasDropdown","clickable","cellType","cell_type","data_type","isResizable","primaryColumnKey","find","onSelectionChanged","getSelection","onItemInvoked","onRenderItemColumn","toLocaleString","computeHeight","topToolbarHeight","rowHeight","footerHeight","DataTable","constrainMode","unconstrained","layoutMode","fixedColumns","selectionMode","none","selectionPreservedOnEmptyClick","setKeySelected","selectedKey","scrollbarVisibility","auto","pivot","XTabs","onLinkClick","itemKey","tabs","itemIcon","headerText","linkFormat","links","XTemplate","template","textVariants","XText","visibility","menuName","XTextbox","mask","readOnly","readonly","multiline","fieldGroup","prefix","suffix","password","XToggle","onText","offText","inlineLabel","XVegaVisualization","specification","vegaEmbed","mode","defaultStyle","renderer","config","autosize","resize","discreteWidth","discreteHeight","continuousWidth","continuousHeight","catch","XComponentAlignment","defaults","vertical","horizontalLeft","horizontalRight","XComponents","alignment","components","Left","Right","XInline","XComponent","text_xl","text_l","text_m","text_s","text_xs","message_bar","textbox","checkbox","toggle","choice_group","dropdown","checklist","combobox","slider","spinbox","date_picker","color_picker","file_upload","expander","frame","markup","picker","range_slider","stepper","visualization","vega_visualization","closable","blocking","dialogContentProps","largeHeader","lastComponent","pop","modalProps","isBlocking","app","centerFullHeight","freeOverlay","busyOverlay","BusyOverlay","spinTimeout","spinB","busy","Spinner","SpinnerSize","large","App","contentB","onSocket","reload","onHashChanged","Router","routes","exact","Breadcrumb","Transparent","directions","toFlexStyle","item_view","item_props","extract","extra","nums","zip","zip3","curves","basis","cardinal","smooth","linear","natural","ret0","get0","get1","get2","renderEl","toAttributes","r1","r2","a1","a2","radial","angle","radius","y1","x1","view_box","stage","scene","stageEls","sceneEls","ths","trs","tds","XNav","collapseByDefault","collapsed","Nav","iconSize","burger","rhs","subtitle","Navigation","hideNav","Panel","isLightDismiss","PanelType","smallFixedNear","hasCloseButton","navB","showNav","nav","objectFit","alt","image","rail","ProgressBar","aux_value","captions","plot_color","value_caption","aux_value_caption","canvas","pixelSize","swatches","borderTop","pixel","brush","pixels","odd","floor","defaultColorAt","paint","form","MicroArea","zeroValue","useMemo","minY","maxY","scaleX","domain","range","scaleY","fcurve","ln","defined","ar","strokeLinejoin","strokeLinecap","strokeWidth","MicroBars","category","paddingInner","rects","plot_type","plot_data","plot_category","plot_value","plot_zero_value","plot_curve","auxValue","listName","itemName","value_color","borderSpacing","thead","whiteSpace","tbody","header","tableName","rowName","PivotLinkFormat","PivotItem","Pivot","value_overlay","overflowProps","ariaLabel","toCommands","toCommand","iconOnly","overflow_items","secondary_items","overflowCommands","farCommands","CommandBar","overflowItems","overflowButtonProps","farItems","hostname","defaultFontStyle","initializeIcons","ReactDOM","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a3a10c68.chunk.js","sourcesContent":["// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CompoundButton } from '@fluentui/react'\n\nconst\n  css = stylesheet({\n    login: {\n      width: '100%',\n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column',\n    },\n  })\n\nconst\n  Login = () => {\n    const\n      queryString = window.location.search,\n      action = `/_auth/init${queryString}`\n    return (\n      <div className={css.login}>\n        <form action={action} method=\"POST\">\n          <CompoundButton type=\"default\" secondaryText=\"using OpenID Connect.\">\n            Log In\n          </CompoundButton>\n        </form>\n      </div>\n    )\n  }\n\nexport default Login\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/ban-types */\nimport * as React from 'react'\nimport { Dialog } from './dialog'\n\n//\n// Dataflow\n// Mostly a port of H2O Flow's dataflow.coffee\n//\n\nexport type Act = () => void\nexport type Eff<T> = (t: T) => void\nexport type Eff2<A, B> = (a: A, b: B) => void\nexport type Eff3<A, B, C> = (a: A, b: B, c: C) => void\nexport type Eff4<A, B, C, D> = (a: A, b: B, c: C, d: D) => void\nexport type Func<A, B> = (a: A) => B\nexport type Func2<A, B, C> = (a: A, b: B) => C\nexport type Func3<A, B, C, D> = (a: A, b: B, c: C) => D\n\nexport interface Disposable { dispose(): void }\ninterface Arrow<T> extends Disposable { f: Eff<T> }\n\nexport interface Box<T> extends Disposable {\n  (): T\n  (value: T): T\n}\ninterface Boxed<T> extends Box<T> {\n  __boxed__: boolean // marker\n  on(f: Eff<T>, o?: any): Arrow<T>\n  touch(): void\n}\n\ntype Equal<T> = (a: T, b: T) => boolean\nfunction different<T>(_a: T, _b: T) { return false }\nexport function box<T>(value?: T, equal?: Equal<T>): Box<T>;\nexport function box<T>(...args: any[]): Box<T> {\n  let\n    x: T = (args.length > 0 ? args[0] : undefined) as T\n  const\n    equal = args.length > 0 ? (args.length > 1 ? args[1] : null) : different,\n    arrows: Arrow<T>[] = [],\n    on = (f: Eff<T>): Arrow<T> => {\n      const a: Arrow<T> = { f, dispose: () => remove(arrows, a) }\n      arrows.push(a)\n      return a\n    },\n    dispose = (): void => { arrows.length = 0 },\n    broadcast = (t: T): void => { for (const a of arrows) a.f(t) },\n    touch = (): void => broadcast(x),\n    f = (...ys: T[]): T => {\n      if (ys.length) { // f(x) invoked\n        const y = ys[0]\n        if (!(equal ? equal(x, y) : (x === y))) broadcast(x = y) // store and broadcast new value if changed\n      } // else f() invoked\n      return x\n    }\n\n  f.on = on\n  f.touch = touch\n  f.dispose = dispose\n  f.__boxed__ = true\n\n  return f as Box<T>\n}\n\nexport function boxed<T>(x: any): x is Box<T> { return x && x.__boxed__ === true }\nexport function unbox<T>(x: T | Box<T>): T { return boxed(x) ? x() : x }\nexport function rebox<T>(b: Box<T>, f: Eff<T>) { const x = b(); f(x); (b as Boxed<T>).touch() }\n\nexport function on<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function on<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function on<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function on<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function on(...args: any[]): Disposable { return react(false, args.slice(0, args.length - 1), args[args.length - 1]) }\n\nexport function to<A>(a: Box<A>, f: Eff<A>): Disposable;\nexport function to<A, B>(a: Box<A>, b: Box<B>, f: Eff2<A, B>): Disposable;\nexport function to<A, B, C>(a: Box<A>, b: Box<B>, c: Box<C>, f: Eff3<A, B, C>): Disposable;\nexport function to<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, d: Box<D>, f: Eff4<A, B, C, D>): Disposable;\nexport function to(...args: any[]): Disposable { return react(true, args.slice(0, args.length - 1), args[args.length - 1]) }\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function react(immediate: boolean, boxen: Box<any>[], f: Function): Disposable {\n  const\n    xs = boxen as Boxed<any>[],\n    emit = () => f(...xs.map(x => x())),\n    arrows = xs.map(x => x.on(emit)),\n    dispose = () => arrows.forEach(a => a.dispose())\n\n  if (immediate) emit()\n  return { dispose }\n}\n\nexport function by<A, B>(a: Box<A>, map: Func<A, B>): Box<B>\nexport function by<A, B, C>(a: Box<A>, b: Box<B>, zip: Func2<A, B, C>): Box<B>\nexport function by<A, B, C, D>(a: Box<A>, b: Box<B>, c: Box<C>, zip: Func3<A, B, C, D>): Box<B>\nexport function by(...args: any[]): any {\n  if (args.length < 2) throw new Error(`invalid number of args: want 2 or more, got ${args.length}`)\n  const\n    m = args.length - 1,\n    xs = args.slice(0, m) as Boxed<any>[],\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    f = args[m] as Function,\n    yB = box(f(...xs.map(x => x())))\n\n  xs.forEach(x => x.on(_ => yB(f(...xs.map(x => x())))))\n  return yB\n}\n\nexport function watch<T>(x: Box<T>, label?: string): Disposable {\n  // eslint-disable-next-line no-console\n  return on(x, label ? ((x: T) => console.log(label, x)) : ((x: T) => console.log(x)))\n}\n\nfunction remove<T>(xs: T[], x: T): void { const i = xs.indexOf(x); if (i > -1) xs.splice(i, 1) }\n\n//\n// React Component + Dataflow\n//\n\ninterface Renderable {\n  render(): JSX.Element\n  init?(): void\n  update?(): void\n  dispose?(): void\n}\n\nexport function bond<TProps, TState extends Renderable>(ctor: (props: TProps) => TState) {\n  return class extends React.Component<TProps> {\n    private readonly model: TState\n    private readonly arrows: Disposable[]\n    constructor(props: TProps) {\n      super(props)\n\n      const\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        self = this,\n        model = ctor(props),\n        arrows: Disposable[] = []\n\n      Object.keys(model).forEach(k => {\n        if (k === 'render' || k === 'dispose' || k === 'init' || k === 'update') return\n        const v = (model as any)[k]\n        if (boxed(v)) arrows.push(on(v, _ => self.setState({})))\n      })\n\n      this.model = model\n      this.arrows = arrows\n      this.state = {}\n    }\n    componentDidMount() {\n      if (this.model.init) this.model.init()\n    }\n    componentDidUpdate() {\n      if (this.model.update) this.model.update()\n    }\n    componentWillUnmount() {\n      if (this.model.dispose) this.model.dispose()\n      for (const a of this.arrows) a.dispose()\n    }\n    render() {\n      return this.model.render()\n    }\n  }\n}\n\n//\n// Sync\n//\n\nexport type B = boolean\nexport type U = number\nexport type I = number\nexport type F = number\nexport type S = string\nexport type D = Date\nexport type V = F | S | D\nexport type Prim = S | F | B | null // primitive\nexport interface Size { width: U, height: U }\nexport interface Rect extends Size { left: U, top: U }\n\nexport interface Dict<T> { [key: string]: T } // generic object\n\nexport type Rec = Dict<Prim | Prim[]> // Record; named \"Rec\" to distinguish from Typescript's Record<K,T> utility type.\nexport type Recs = Rec[]\nexport type Packed<T> = T | S\n\nexport interface Data {\n  list(): (Rec | null)[]\n}\n\ninterface OpsD {\n  p?: PageD // init\n  d?: OpD[] // deltas\n  e?: S // error\n  r?: U // reset\n}\ninterface OpD {\n  k?: S\n  v?: any\n  c?: CycBufD\n  f?: FixBufD\n  m?: MapBufD\n  d?: Dict<Datum>\n  b?: BufD[]\n}\ntype Tup = any[]\ninterface PageD {\n  c: Dict<CardD>\n}\ntype Datum = S | F | B | Dict<any> | any[] | BufD\ninterface CardD {\n  d: Dict<Datum>\n  b?: BufD[]\n}\ninterface BufD {\n  c: CycBufD\n  f: FixBufD\n  m: MapBufD\n}\ninterface MapBufD {\n  f: S[]\n  d: Dict<Tup>\n}\ninterface FixBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n}\ninterface CycBufD {\n  f: S[]\n  d: (Tup | null)[]\n  n: U\n  i: U\n}\n\nexport interface Page {\n  key: S\n  changed: Box<B>\n  add(k: S, c: C): void\n  get(k: S): C | undefined\n  set(k: S, v: any): void\n  list(): C[]\n  drop(k: S): void\n  sync(): void\n}\n\ninterface Cur {\n  __cur__: true\n  get(f: S): any\n  set(f: S, v: any): void\n}\ninterface Buf {\n  put(xs: any): void\n  set(k: S, v: any): void\n  get(k: S): Cur | null\n}\nexport interface Card<T> {\n  name: S\n  state: T\n  changed: Box<B>\n}\nexport interface C extends Card<Dict<any>> {\n  id: S\n  set(ks: S[], v: any): void\n}\ninterface Typ {\n  readonly f: S[] // fields\n  readonly m: Dict<U> // offsets\n  match(x: any): Tup | null\n  make(t: Tup): Rec\n}\n\ninterface DataBuf extends Data, Buf {\n  __buf__: true\n}\ninterface FixBuf extends DataBuf {\n  n: U\n  seti(i: U, v: any): void\n  geti(i: U): Cur | null\n}\ntype CycBuf = DataBuf\ntype MapBuf = DataBuf\n\nlet guid = 0\nexport const\n  xid = () => `x${++guid}`,\n  parseI = (s: S): I => {\n    if (!/^-{0,1}\\d+$/.test(s)) return NaN\n    return parseInt(s, 10)\n  },\n  parseU = (s: S): U => {\n    const i = parseI(s)\n    return isNaN(i) || i < 0 ? NaN : i\n  },\n  dict = <T extends {}>(kvs: [S, T][]): Dict<T> => {\n    const d: Dict<T> = {}\n    for (const [k, v] of kvs) d[k] = v\n    return d\n  },\n  unpack = <T extends {}>(data: any): T =>\n    (typeof data === 'string')\n      ? decodeString(data)\n      : (isData(data))\n        ? data.list()\n        : data,\n  iff = (x: S) => x && x.length ? x : undefined,\n  debounce = (timeout: U, f: (e: any) => void) => {\n    let t: number | null = null\n    return (e: any) => {\n      if (t) window.clearTimeout(t)\n      t = window.setTimeout(() => (f(e), t = null), timeout)\n    }\n  }\n\nconst\n  decodeType = (d: S): [S, S] => {\n    const i = d.indexOf(':')\n    return (i > 0) ? [d.substring(0, i), d.substring(i + 1)] : ['', d]\n  },\n  decodeString = (data: S): any => {\n    if (data === '') return data\n    const [t, d] = decodeType(data)\n    switch (t) {\n      case 'data':\n        try {\n          return JSON.parse(d)\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'rows':\n        try {\n          const [fields, rows] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(rows)) return data\n          const w = fields.length // width\n          const recs: Rec[] = []\n          for (const r of rows) {\n            if (!Array.isArray(r)) continue\n            if (r.length !== w) continue\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = r[j]\n              rec[f] = v\n            }\n            recs.push(rec)\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n      case 'cols':\n        try {\n          const [fields, columns] = JSON.parse(d)\n          if (!Array.isArray(fields)) return data\n          if (!Array.isArray(columns)) return data\n          const w = fields.length // width\n          if (columns.length !== w) return data\n          if (columns.length === 0) return data\n          const n = columns[0].length\n          const recs = new Array<Rec>(n)\n          for (let i = 0; i < n; i++) {\n            const rec: Rec = {}\n            for (let j = 0; j < w; j++) {\n              const f = fields[j], v = columns[j][i]\n              rec[f] = v\n            }\n            recs[i] = rec\n          }\n          return recs\n        } catch (e) {\n          console.error(e)\n        }\n        break\n    }\n    return data\n  }\n\nconst\n  keysOf = <T extends {}>(d: Dict<T>): S[] => {\n    const a: S[] = []\n    for (const k in d) a.push(k)\n    return a\n  },\n  valuesOf = <T extends {}>(d: Dict<T>): T[] => {\n    const a: T[] = []\n    for (const k in d) a.push(d[k])\n    return a\n\n  },\n  isMap = (x: any): B => {\n    // for JSON data only: anything not null, string, number, bool, array\n    if (x === null || x === undefined) return false\n    switch (typeof x) {\n      case 'number':\n      case 'string':\n      case 'boolean':\n        return false\n      default:\n        if (Array.isArray(x)) return false\n    }\n    return true\n  },\n  isBuf = (x: any): x is Buf => x != null && x.__buf__ === true,\n  isData = (x: any): x is Data => isBuf(x),\n  isCur = (x: any): x is Cur => x != null && x.__cur__ === true,\n  reverseIndex = (xs: S[]): Dict<U> => {\n    const m: Dict<U> = {}\n    for (let i = 0, n = xs.length; i < n; i++) m[xs[i]] = i\n    return m\n  },\n  newType = (fields: S[]): Typ => {\n    const\n      n = fields.length,\n      m = reverseIndex(fields),\n      match = (x: any): Tup | null => {\n        if (Array.isArray(x) && x.length === n) return x\n        return null\n      },\n      make = (tup: Tup): Rec => {\n        const r: Rec = {}\n        for (let i = 0; i < n; i++) r[fields[i]] = tup[i]\n        return r\n      }\n    return { f: fields, m, match, make }\n  },\n  newCur = (t: Typ, tup: Tup): Cur => {\n    const\n      get = (f: S): any => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) return tup[i]\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) return tup[i]\n        }\n        return null\n      },\n      set = (f: S, v: any) => {\n        if (tup != null) {\n          let i = t.m[f]\n          if (i != null && i >= 0 && i < tup.length) tup[i] = v\n          i = parseI(f)\n          if (!isNaN(i) && i >= 0 && i < tup.length) tup[i] = v\n        }\n      }\n    return { __cur__: true, get, set }\n  },\n  newFixBuf = (t: Typ, tups: (Tup | null)[]): FixBuf => {\n    const\n      n = tups.length,\n      put = (xs: any) => {\n        if (Array.isArray(xs) && xs.length === n) for (let i = 0; i < n; i++) seti(i, xs[i])\n      },\n      set = (k: S, v: any) => {\n        const i = parseI(k)\n        if (!isNaN(i)) seti(i, v)\n      },\n      seti = (i: U, v: any) => {\n        if (i >= 0 && i < n) {\n          if (v === null) {\n            tups[i] = null\n          } else {\n            const tup = t.match(v)\n            if (tup) tups[i] = tup\n          }\n        }\n      },\n      get = (k: S): Cur | null => {\n        const i = parseI(k)\n        if (!isNaN(i)) return geti(i)\n        return null\n      },\n      geti = (i: U): Cur | null => {\n        if (i >= 0 && i < n) {\n          const tup = tups[i]\n          if (tup) return newCur(t, tup)\n        }\n        return null\n      },\n      list = (): (Rec | null)[] => {\n        const xs: (Rec | null)[] = []\n        for (const tup of tups) xs.push(tup ? t.make(tup) : null)\n        return xs\n      }\n    return { __buf__: true, n, put, set, seti, get, geti, list }\n  },\n  newCycBuf = (t: Typ, tups: (Tup | null)[], i: U): CycBuf => {\n    const\n      n = tups.length,\n      b = newFixBuf(t, tups),\n      cur = \"\",\n      put = (xs: any) => {\n        if (Array.isArray(xs)) for (const x of xs) set(cur, x)\n      },\n      set = (_k: S, v: any) => {\n        b.seti(i, v)\n        i++\n        if (i >= n) i = 0\n      },\n      get = (_k: S): Cur | null => {\n        return b.geti(i)\n      },\n      list = (): Rec[] => {\n        const xs: Rec[] = []\n        for (let j = i, k = 0; k < n; j++, k++) {\n          if (j >= n) j = 0\n          const tup = tups[j]\n          if (tup) xs.push(t.make(tup))\n        }\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newMapBuf = (t: Typ, tups: Dict<Tup>): MapBuf => {\n    const\n      put = (xs: any) => {\n        const ts: Dict<Tup> = {}\n        for (const k in xs) {\n          const x = xs[k], tup = t.match(x)\n          if (tup) ts[k] = tup\n        }\n        tups = ts\n      },\n      set = (k: S, v: any) => {\n        if (v === null) {\n          delete tups[k]\n        } else {\n          const tup = t.match(v)\n          if (tup) tups[k] = tup\n        }\n      },\n      get = (k: S): Cur | null => {\n        const tup = tups[k]\n        return tup ? newCur(t, tup) : null\n      },\n      list = (): Rec[] => {\n        const keys = keysOf(tups)\n        keys.sort()\n        const xs: Rec[] = []\n        for (const k of keys) xs.push(t.make(tups[k]))\n        return xs\n      }\n    return { __buf__: true, put, set, get, list }\n  },\n  newTups = (n: U) => {\n    const xs = new Array<Tup | null>(n)\n    for (let i = 0; i < n; i++) xs[i] = null\n    return xs\n  },\n  loadCycBuf = (b: CycBufD): CycBuf => {\n    const t = newType(b.f)\n    return b.d && b.d.length\n      ? newCycBuf(t, b.d, b.i)\n      : newCycBuf(t, newTups(b.n <= 0 ? 10 : b.n), 0)\n  },\n  loadFixBuf = (b: FixBufD): FixBuf => {\n    const t = newType(b.f)\n    return newFixBuf(t, b.d && b.d.length ? b.d : newTups(b.n <= 0 ? 10 : b.n))\n  },\n  loadMapBuf = (b: MapBufD): MapBuf => {\n    const t = newType(b.f)\n    return newMapBuf(t, b.d || {})\n  },\n  loadBuf = (b: BufD): DataBuf | null => {\n    if (b.c) return loadCycBuf(b.c)\n    if (b.f) return loadFixBuf(b.f)\n    if (b.m) return loadMapBuf(b.m)\n    return null\n  },\n  loadCard = (key: S, c: CardD): C => {\n    const\n      data: Dict<any> = {},\n      changedB = box<B>(),\n      ctor = (c: CardD) => {\n        const { d, b } = c\n        for (let k in d) {\n          let v = d[k]\n          if (b && k.length > 0 && k[0] === '~') {\n            const buf = loadBuf(b[v as U])\n            if (buf) {\n              k = k.substr(1)\n              v = buf\n            }\n          }\n          set([k], v)\n        }\n      },\n      set = (ks: S[], v: any) => {\n        switch (ks.length) {\n          case 0:\n            return\n          case 1:\n            {\n              const p = ks[0], b = data[p]\n              if (b && isBuf(b)) {\n                b.put(v)\n                return\n              }\n              if (v == null) delete data[p]; else data[p] = v\n              return\n            }\n          default:\n            {\n              let x: any = data\n              const p = ks[ks.length - 1]\n              for (const k of ks.slice(0, ks.length - 1)) x = gget(x, k)\n              gset(x, p, v)\n              return\n            }\n        }\n      }\n    ctor(c)\n    return { id: xid(), name: key, state: data, changed: changedB, set }\n  },\n  gset = (x: any, k: S, v: any) => {\n    if (x == null) return\n    if (isBuf(x)) x.set(k, v)\n    else if (isCur(x)) x.set(k, v)\n    else if (isMap(x)) {\n      if (v == null) delete x[k]; else x[k] = v\n    } else if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) x[i] = v\n    }\n  },\n  gget = (x: any, k: S): any => {\n    if (x == null) return null\n    if (isBuf(x)) return x.get(k)\n    if (isCur(x)) return x.get(k)\n    if (isMap(x)) return x[k]\n    if (Array.isArray(x)) {\n      const i = parseI(k)\n      if (!isNaN(i) && i >= 0 && i < x.length) return x[i]\n    }\n    return null\n  },\n  newPage = (): Page => {\n    let dirty = false, dirties: Dict<B> = {}\n\n    const\n      key = xid(),\n      cards: Dict<C> = {},\n      changedB = box<B>(),\n      add = (k: S, card: C) => {\n        cards[k] = card\n        dirty = true\n      },\n      get = (k: S): C | undefined => cards[k],\n      list = (): C[] => valuesOf(cards),\n      drop = (k: S) => delete cards[k],\n      set = (k: S, v: any) => {\n        const ks = k.split(/\\s+/g)\n        if (ks.length === 1) {\n          delete cards[k]\n          dirty = true\n          return\n        }\n        const c = cards[ks[0]]\n        if (c) {\n          c.set(ks.slice(1), v)\n          dirties[ks[0]] = true\n        }\n      },\n      sync = () => {\n        if (dirty) {\n          changedB(true)\n        } else {\n          for (const k in dirties) {\n            const c = cards[k]\n            if (c) c.changed(true)\n          }\n        }\n        dirty = false // reset\n        dirties = {} // reset\n      }\n\n    return { key, changed: changedB, add, get, set, list, drop, sync }\n  },\n  load = ({ c }: PageD): Page => {\n    const page = newPage()\n    for (const k in c) page.add(k, loadCard(k, c[k]))\n    return page\n  },\n  exec = (page: Page, ops: OpD[]): Page | null => {\n    for (const op of ops) {\n      if (op.k && op.k.length > 0) {\n        if (op.c) {\n          page.set(op.k, loadCycBuf(op.c))\n        } else if (op.f) {\n          page.set(op.k, loadFixBuf(op.f))\n        } else if (op.m) {\n          page.set(op.k, loadMapBuf(op.m))\n        } else if (op.d) {\n          page.add(op.k, loadCard(op.k, { d: op.d, b: op.b || [] }))\n        } else {\n          page.set(op.k, op.v)\n        }\n      } else { // drop page\n        page = newPage()\n      }\n    }\n    if (page) page.sync()\n    return page\n  }\n\n//\n// In-browser API\n//\n\nexport interface PageRef {\n  get(key: S): Ref\n  set(key: S, value: any): void\n  del(key: S): void\n  drop(): void\n  sync(): void\n}\n\nexport interface Ref {\n  get(key: S): Ref\n  set(key: S, value: any): void\n}\n\nexport interface Qd {\n  readonly path: S\n  readonly args: Rec\n  readonly events: Dict<any>\n  readonly refreshRateB: Box<U>\n  readonly busyB: Box<B>\n  socket: WebSocket | null\n  dialogB: Box<Dialog | null>\n  page(): PageRef\n  sync(): void\n  jump(key: any, value: any): void\n}\n\nconst\n  keyseq = (...keys: S[]): S => keys.join(' '),\n  clearRec = (a: Rec) => {\n    for (const k in a) delete a[k]\n  }\n\nexport const qd: Qd = {\n  path: window.location.pathname,\n  args: {},\n  events: {},\n  refreshRateB: box(-1),\n  busyB: box(false),\n  socket: null,\n  dialogB: box(null),\n  page: (path?: S): PageRef => {\n    path = path || qd.path\n    const\n      changes: OpD[] = [],\n      ref = (k: S): Ref => {\n        const\n          get = (key: S): Ref => ref(`${k}.${key}`),\n          set = (key: S, value: any) => changes.push({ k: keyseq(k, key), v: value })\n        return { get, set }\n      },\n      get = (key: S) => ref(key),\n      set = (key: S, value: any) => changes.push({ k: keyseq(key), v: value }),\n      del = (key: S) => changes.push({ k: key }),\n      drop = () => changes.push({}),\n      sync = () => {\n        const sock = qd.socket\n        if (!sock) return\n        const opsd: OpsD = { d: changes }\n        sock.send(`* ${path} ${JSON.stringify(opsd)}`)\n      }\n    return { get, set, del, drop, sync }\n  },\n  sync: () => {\n    const sock = qd.socket\n    if (!sock) return\n    const args: Dict<any> = { ...qd.args }\n    clearRec(qd.args)\n    if (Object.keys(qd.events).length) {\n      args[''] = { ...qd.events }\n      clearRec(qd.events)\n    }\n    sock.send(`@ ${qd.path} ${JSON.stringify(args)}`)\n    qd.busyB(true)\n  },\n  jump: (key: any, value: any) => {\n    if (value.startsWith('#')) {\n      window.location.hash = value.substr(1)\n      return\n    }\n    if (key) {\n      qd.args[key] = value\n    } else {\n      qd.args[value] = true\n    }\n    qd.sync()\n  },\n}\n\non(qd.refreshRateB, r => {\n  // If we receive a change in refresh rate once the page has been loaded, close the socket.\n  // The socket onclose handler will reconnect using the refresh rate if necessary.\n  if (r < 0) return\n  const sock = qd.socket\n  if (sock) sock.close()\n})\n\nexport enum SockEventType { Message, Data, Reset }\nexport type SockEvent = SockMessage | SockData | SockReload\nexport interface SockData { t: SockEventType.Data, page: Page }\nexport enum SockMessageType { Info, Warn, Err }\nexport interface SockMessage { t: SockEventType.Message, type: SockMessageType, message: S }\nexport interface SockReload { t: SockEventType.Reset }\ntype SockHandler = (e: SockEvent) => void\n\nlet backoff = 1, currentPage: Page | null = null\nconst\n  toSocketAddress = (path: S): S => {\n    const\n      l = window.location,\n      p = l.protocol === 'https:' ? 'wss' : 'ws'\n    return p + \"://\" + l.host + path\n  },\n  reconnect = (address: S, handle: SockHandler) => {\n    const retry = () => reconnect(address, handle)\n    const sock = new WebSocket(address)\n    sock.onopen = function () {\n      qd.socket = sock\n      handle({ t: SockEventType.Message, type: SockMessageType.Info, message: 'Connected' })\n      backoff = 1\n      const hash = window.location.hash\n      sock.send(`+ ${qd.path} ${hash.charAt(0) === '#' ? hash.substr(1) : hash}`) // protocol: t<sep>addr<sep>data\n    }\n    sock.onclose = function () {\n      const refreshRate = qd.refreshRateB()\n      if (refreshRate === 0) return\n\n      // TODO handle refreshRate > 0 case\n\n      qd.socket = null\n      backoff *= 2\n      if (backoff > 16) backoff = 16\n      handle({ t: SockEventType.Message, type: SockMessageType.Warn, message: `Disconneced. Reconnecting in ${backoff} seconds...` })\n      window.setTimeout(retry, backoff * 1000)\n    }\n    sock.onmessage = function (e) {\n      if (!e.data) return\n      if (!e.data.length) return\n      qd.busyB(false)\n      for (const line of e.data.split('\\n')) {\n        try {\n          const msg = JSON.parse(line) as OpsD\n          if (msg.d) {\n            const page = exec(currentPage || newPage(), msg.d)\n            if (currentPage !== page) {\n              currentPage = page\n              if (page) handle({ t: SockEventType.Data, page: page })\n            }\n          } else if (msg.p) {\n            currentPage = load(msg.p)\n            handle({ t: SockEventType.Data, page: currentPage })\n          } else if (msg.e) {\n            handle({ t: SockEventType.Message, type: SockMessageType.Err, message: msg.e })\n          } else if (msg.r) {\n            handle({ t: SockEventType.Reset })\n          }\n        } catch (err) {\n          console.error(err)\n          handle({ t: SockEventType.Message, type: SockMessageType.Err, message: `Error: ${err}` })\n        }\n      }\n    }\n    sock.onerror = function (e: Event) {\n      qd.busyB(false)\n      console.error('A websocket error was encountered.', e) // XXX\n    }\n  }\n\nexport const connect = (path: S, handle: SockHandler) => reconnect(toSocketAddress(path), handle)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ContextualMenu, Icon, IContextualMenuItem } from '@fluentui/react'\nimport * as React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Command } from './toolbar'\nimport { bond, box, qd, Box, B, S } from './qd'\n\nconst\n  css = stylesheet({\n    menu: {\n      position: 'absolute',\n      top: 0, right: 0,\n      $nest: {\n        '>div:first-child': {\n          width: 32, height: 32,\n          padding: 8,\n        },\n      },\n    },\n    icon: {\n      userSelect: 'none',\n    },\n    target: {\n      boxSizing: 'border-box',\n      cursor: 'pointer',\n      opacity: 0.5,\n      $nest: {\n        '&:hover': {\n          opacity: 1,\n        },\n      },\n    }\n  })\n\nconst\n  toContextMenuItem = (c: Command): IContextualMenuItem => {\n    const\n      onClick = () => {\n        if (c.name.startsWith('#')) {\n          window.location.hash = c.name.substr(1)\n          return\n        }\n        qd.args[c.name] = c.value ?? c.data ?? true\n        qd.sync()\n      }\n    return {\n      key: c.name,\n      text: c.label || c.name || 'Untitled',\n      iconProps: c.icon ? { iconName: c.icon } : undefined,\n      title: c.caption || undefined,\n      subMenuProps: c.items ? { items: c.items.map(toContextMenuItem) } : undefined,\n      onClick,\n    }\n  }\n\nexport const\n  CardMenu = bond(({ commands, name, changedB }: { commands: Command[], name?: S, changedB?: Box<B> }) => {\n    const\n      target = React.createRef<HTMLDivElement>(),\n      hiddenB = box(true),\n      show = () => hiddenB(false),\n      hide = () => hiddenB(true),\n      render = () => {\n        const\n          hidden = hiddenB(),\n          items = commands.map(toContextMenuItem)\n        return (\n          <div className={css.menu} data-test={name}>\n            <div className={css.target} ref={target} onClick={show}>\n              <Icon className={css.icon} iconName='MoreVertical' />\n            </div>\n            <ContextualMenu target={target} items={items} hidden={hidden} onItemClick={hide} onDismiss={hide} />\n          </div>\n        )\n      }\n    return { render, changedB, hiddenB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport Handlebars from 'handlebars'\nimport { createIntl, createIntlCache } from 'react-intl'\nimport { B, S } from './qd'\n\nconst intlCache = createIntlCache() // prevents memory leaks per docs\nexport const intl = createIntl({\n  locale: navigator.language,\n  messages: {},\n  // Since we generate format messages on the fly, ignore all errors.\n  // The intl lib requires messages to be initialized in advance,\n  // Otherwise, it throws console.errors for each missing id, each time format() is called.\n  // As of this implementation, there's no formal way to disable that behavior.\n  onError: () => { /* noop */ },\n}, intlCache)\n\nconst\n  snakeToCamel = (s: S): S => s.replace(/(_\\w)/g, m => m[1].toUpperCase()),\n  kvToOpts = (a: any): any => {\n    const b: any = {}\n    for (const k in a) {\n      const v = a[k]\n      b[snakeToCamel(k)] =\n        (v === 'true')\n          ? true\n          : v === 'false'\n            ? false\n            : /^\\d+$/.test(v)\n              ? parseInt(v, 10)\n              : v\n    }\n    return b\n  },\n  isBareExpr = (s: S): B => /^\\w+$/.test(s)\n\nHandlebars.registerHelper('intl', (v: any, { hash: opts }: any) => {\n  opts = kvToOpts(opts)\n  const t = opts.type\n  return t === 'date'\n    ? intl.formatDate(v, opts)\n    : t === 'time'\n      ? intl.formatTime(v, opts)\n      : t === 'number' || typeof v === 'number'\n        ? intl.formatNumber(v, opts)\n        : v\n})\n\nexport type Fmt = (datum: any, value?: any) => S\n\nexport const\n  isFormatExpr = (f: any): B => typeof f === 'string' && f.length > 1 && f.charAt(0) === '=' && f.charAt(1) !== '=',\n  parseFormat = (s: S): [S, HandlebarsTemplateDelegate<any> | undefined] | null => {\n    if (!isFormatExpr(s)) return null\n\n    // \"=foo\"\n    s = s.substr(1) // lop off leading '='\n\n    // \"foo\"\n    if (isBareExpr(s)) return [s, undefined]\n\n    // \"{{func foo...\"\n    const invocation = s.match(/\\{\\{\\s*(\\w+)\\s+(\\w+)/)\n    if (invocation) return [invocation[2], compile(s)]\n\n    // \"{{foo...\"\n    const bare = s.match(/\\{\\{\\s*(\\w+)/)\n    if (bare) return [bare[1], undefined]\n\n    return null\n  },\n  compile = (s: S): any => Handlebars.compile(s),\n  format = (s: S, data: any): S => {\n    if (isBareExpr(s)) s = '{{' + s + '}}'\n    const t = compile(s)\n    return t ? t(data) : s\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NestedCSSProperties } from \"typestyle/lib/types\"\nimport { Dict, I, F, S, U } from \"./qd\"\n\ninterface RGB { r: U, g: U, b: U }\ninterface Palette {\n  red: S\n  pink: S\n  purple: S\n  violet: S\n  indigo: S\n  blue: S\n  azure: S\n  cyan: S\n  teal: S\n  mint: S\n  green: S\n  lime: S\n  yellow: S\n  amber: S\n  orange: S\n  tangerine: S\n  brown: S\n  gray: S\n  text: S\n  card: S\n  page: S\n}\n\ninterface Tones {\n  text0: S\n  text1: S\n  text2: S\n  text3: S\n  text4: S\n  text5: S\n  text6: S\n  text7: S\n  text8: S\n  text9: S\n}\n\nexport const\n  px = (x: I) => `${x}px`,\n  pc = (x: F) => `${x}%`,\n  rem = (x: F) => `${x}rem`,\n  clas = (...names: string[]) => names.join(' '),\n  quint = (prop: string) => `${prop} 600ms cubic-bezier(0.23, 1, 0.32, 1)`, // https://easings.net/#easeOutQuint\n  border = (thickness: U, color: string) => `${thickness}px solid ${color}`,\n  dotted = (thickness: U, color: string) => `${thickness}px dotted ${color}`,\n  dashed = (thickness: U, color: string) => `${thickness}px dashed ${color}`,\n  hairline = border(1, '#ececec'),\n  padding = (...t: I[]) => t.map(px).join(' '),\n  paddingRem = (...t: F[]) => t.map(rem).join(' '),\n  margin = padding,\n  rgba = (r: U, g: U, b: U, a: F) => `rgba(${r},${g},${b},${a.toFixed(1)})`,\n  gray = (b: U) => { const h = b.toString(16); return `#${h}${h}${h}` },\n  centerMixin = () => ({ display: 'flex', alignItems: 'center', justifyContent: 'center' }),\n  displayMixin = (visible = true): React.CSSProperties => {\n    if (visible) return {}\n    return { display: 'none' }\n  }\n\nconst\n  black: RGB = { r: 0, g: 0, b: 0 },\n  rgb = (hex: S): RGB => {\n    const x = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return x ? { r: parseInt(x[1], 16), g: parseInt(x[2], 16), b: parseInt(x[3], 16) } : black\n  },\n  toPalette = (palette: Palette, a: F): Palette & Tones => {\n    const\n      { r, g, b } = rgb(palette.text),\n      tones: Tones = {\n        text0: rgba(r, g, b, 0.05),\n        text1: rgba(r, g, b, a += 0.1),\n        text2: rgba(r, g, b, a += 0.1),\n        text3: rgba(r, g, b, a += 0.1),\n        text4: rgba(r, g, b, a += 0.1),\n        text5: rgba(r, g, b, a += 0.1),\n        text6: rgba(r, g, b, a += 0.1),\n        text7: rgba(r, g, b, a += 0.1),\n        text8: rgba(r, g, b, a += 0.1),\n        text9: rgba(r, g, b, a += 0.1),\n      }\n    return { ...palette, ...tones }\n  },\n  defaultColors = {\n    red: '#F44336',\n    pink: '#E91E63',\n    purple: '#9C27B0',\n    violet: '#673AB7',\n    indigo: '#3F51B5',\n    blue: '#2196F3',\n    azure: '#03A9F4',\n    cyan: '#00BCD4',\n    teal: '#009688',\n    mint: '#4CAF50',\n    green: '#8BC34A',\n    lime: '#CDDC39',\n    yellow: '#FFEB3B',\n    amber: '#FFC107',\n    orange: '#FF9800',\n    tangerine: '#FF5722',\n    brown: '#795548',\n    gray: '#9E9E9E',\n  },\n  palettes: Dict<Palette & Tones> = {\n    light: toPalette({\n      ...defaultColors,\n      text: '#323130',\n      card: '#ffffff',\n      page: '#f5f5f5',\n    }, 0.1),\n    dark: toPalette({\n      ...defaultColors,\n      text: '#ffffff',\n      card: '#21252b',\n      page: '#282c34',\n    }, 0),\n    neon: toPalette({\n      ...defaultColors,\n      text: '#ffffff',\n      card: '#0d0e0f',\n      page: '#1b1d1f',\n    }, 0),\n  },\n  // tracking = a + b * Math.exp(c * fontSize)\n  // a = -0.0223, b = 0.185, c = -0.1745\n  fontTrackings = [\n    [6, 0.043],\n    [7, 0.032],\n    [8, 0.024],\n    [9, 0.016],\n    [10, 0.01],\n    [11, 0.005],\n    [12, 0],\n    [13, -0.0025],\n    [14, -0.006],\n    [15, -0.009],\n    [16, -0.011],\n    [17, -0.013],\n    [18, -0.014],\n    [20, -0.017],\n    [24, -0.019],\n    [30, -0.021],\n    [40, -0.022],\n    [80, -0.022],\n  ],\n  fontStyleFor = (size: U, tracking: F) => ({\n    fontSize: size + 'px',\n    letterSpacing: tracking + 'em',\n    lineHeight: Math.round(1.4 * size) + 'px',\n  }),\n  fontStyles: ReturnType<typeof fontStyleFor>[] = []\n\nfontTrackings.forEach(([size, tracking]) => fontStyles[size] = fontStyleFor(size, tracking))\n\n\nconst\n  font: ThemeFont = {\n    s6: fontStyles[6],\n    s7: fontStyles[7],\n    s8: fontStyles[8],\n    s9: fontStyles[9],\n    s10: fontStyles[10],\n    s11: fontStyles[11],\n    s12: fontStyles[12],\n    s13: fontStyles[13],\n    s14: fontStyles[14],\n    s15: fontStyles[15],\n    s16: fontStyles[16],\n    s17: fontStyles[17],\n    s18: fontStyles[18],\n    s20: fontStyles[20],\n    s24: fontStyles[24],\n    s30: fontStyles[30],\n    s40: fontStyles[40],\n    s80: fontStyles[80],\n    w1: { fontWeight: 100 }, // thin\n    w2: { fontWeight: 200 }, // extralight\n    w3: { fontWeight: 300 }, // light\n    w4: { fontWeight: 400 }, // regular\n    w5: { fontWeight: 500 }, // medium\n    w6: { fontWeight: 600 }, // semibold\n    w7: { fontWeight: 700 }, // bold\n    w8: { fontWeight: 800 }, // extrabold\n    w9: { fontWeight: 900 }, // black\n  }\n// ellipsis: NestedCSSProperties = {\n//   whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden',\n// }\n\ninterface ThemeFont {\n  s6: NestedCSSProperties\n  s7: NestedCSSProperties\n  s8: NestedCSSProperties\n  s9: NestedCSSProperties\n  s10: NestedCSSProperties\n  s11: NestedCSSProperties\n  s12: NestedCSSProperties\n  s13: NestedCSSProperties\n  s14: NestedCSSProperties\n  s15: NestedCSSProperties\n  s16: NestedCSSProperties\n  s17: NestedCSSProperties\n  s18: NestedCSSProperties\n  s20: NestedCSSProperties\n  s24: NestedCSSProperties\n  s30: NestedCSSProperties\n  s40: NestedCSSProperties\n  s80: NestedCSSProperties\n  /** Thin */\n  w1: NestedCSSProperties\n  /** Extra light */\n  w2: NestedCSSProperties\n  /** Light */\n  w3: NestedCSSProperties\n  /** Regular */\n  w4: NestedCSSProperties\n  /** Medium */\n  w5: NestedCSSProperties\n  /** Semi bold */\n  w6: NestedCSSProperties\n  /** Bold */\n  w7: NestedCSSProperties\n  /** Extra bold */\n  w8: NestedCSSProperties\n  /** Black */\n  w9: NestedCSSProperties\n}\n\nexport interface Theme {\n  font: ThemeFont\n  colors: Palette & Tones\n  merge<T>(defs: Partial<T>, state: Partial<T>): T\n  color(color?: S): S\n}\n\nlet theme: Theme | null = null\nexport const\n  loadTheme = (name: S): Theme => {\n    const colors = palettes[name],\n      color = (s?: S): S => {\n        if (!s) return colors.gray\n        if (s.startsWith('$')) {\n          const c = (colors as any)[s.substr(1)]\n          return c ? c : colors.gray\n        }\n        return s\n      },\n      merge = <T extends unknown>(defs: Partial<T>, state: Partial<T>): T => {\n        const s = { ...defs, ...state } as any\n        for (const k in s) {\n          if (k.endsWith('_color')) {// XXX obsolete; remove\n            const v = s[k]\n            if (typeof v === 'string') s[k] = color(v)\n          }\n        }\n        return s as T\n      }\n    theme = { font, colors, merge, color }\n    return theme\n  },\n  getTheme = (): Theme => theme ? theme : loadTheme('light'),\n  palette = {\n    themePrimary: '#000000',\n    themeLighterAlt: '#898989',\n    themeLighter: '#737373',\n    themeLight: '#595959',\n    themeTertiary: '#373737',\n    themeSecondary: '#2f2f2f',\n    themeDarkAlt: '#252525',\n    themeDark: '#151515',\n    themeDarker: '#0b0b0b',\n    neutralLighterAlt: '#faf9f8',\n    neutralLighter: '#f3f2f1',\n    neutralLight: '#edebe9',\n    neutralQuaternaryAlt: '#e1dfdd',\n    neutralQuaternary: '#d0d0d0',\n    neutralTertiaryAlt: '#c8c6c4',\n    neutralTertiary: '#a19f9d',\n    neutralSecondary: '#605e5c',\n    neutralPrimaryAlt: '#3b3a39',\n    neutralPrimary: '#323130',\n    neutralDark: '#201f1e',\n    black: '#000000',\n    white: '#ffffff',\n  },\n  defaultFontStyle = {\n    fontFamily: 'Inter',\n  }\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { format, isFormatExpr } from './intl'\nimport { B, box, C, Card, Dict, F, parseI, Rec, S, U, unpack, xid } from './qd'\nimport { clas, getTheme, margin, palette } from './theme'\n\ntype Slot = {\n  left: U\n  top: U\n  width?: U\n  height?: U\n  right?: U\n  bottom?: U\n}\n\n\nexport enum CardEffect { Transparent, Normal, Raised, Flat }\n\nconst\n  newCardRegistry = () => {\n    const\n      m: Dict<{ ctor: typeof React.Component, effect: CardEffect }> = {},\n      register = (name: S, ctor: typeof React.Component, effect: CardEffect = CardEffect.Normal) => m[name] = { ctor, effect },\n      lookup = (name: S) => m[name] || m['']\n    return { register, lookup }\n  }\n\nexport const\n  cards = newCardRegistry(),\n  substitute = (formatString?: S, data?: Rec, defaultValue: any = null) => {\n    return (formatString !== undefined && formatString !== null)\n      ? isFormatExpr(formatString)\n        ? format(formatString.substr(1), data)\n        : formatString\n      : (defaultValue !== undefined && defaultValue !== null)\n        ? defaultValue\n        : null\n  },\n  Format = ({ data, defaultValue: v, format: f, className }: { data?: Rec, defaultValue?: any, format?: S, className?: S }) => {\n    const x = substitute(f, data, v)\n    if (x == null) return null\n    if (className) return <div className={className}>{x}</div>\n    return <>{x}</>\n  },\n  CardView = ({ card }: { card: Card<any> }) => {\n    const Tag = cards.lookup(card.state.view).ctor\n    return <Tag {...card} />\n  },\n  Repeat = ({ view, props, data }: { view: S | any, props: any, data: any }) => {\n    const items = unpack<Rec[]>(data).map((r, i) => {\n      const card: Card<any> = {\n        name: xid(),\n        state: { ...unpack<Rec>(props), view, data: r },\n        changed: box<B>(),\n      }\n      return <CardView key={i} card={card} />\n    })\n    return <>{items}</>\n  }\n\ntype Size = [U, U]\n\nconst\n  badPlacement: Slot = { left: 0, top: 0, width: 0, height: 0 },\n  newGrid = (uw: U, uh: U, cols: U, rows: U, gap: U) => {\n    let scale = 1\n    const\n      iw = uw - 2 * gap, // unit inner width\n      ih = uh - 2 * gap, // unit inner height\n      width = uw * cols + gap * (cols + 1),\n      height = uh * rows + gap * (rows + 1),\n      giw = width - 2 * gap,\n      gih = height - 2 * gap,\n      placeOnGrid = (x: U, y: U, w: U, h: U): Slot => {\n        const\n          slot: Slot = {\n            left: x * (uw + gap),\n            top: y * (uh + gap),\n          }\n        if (w > 0) {\n          slot.width = w * uw + (w - 1) * gap\n        } else {\n          slot.right = -(w + 1) * (uw + gap)\n        }\n        if (h > 0) {\n          slot.height = h * uh + (h - 1) * gap\n        } else {\n          slot.bottom = -(h + 1) * (uh + gap)\n        }\n        return slot\n      },\n      normalize = (s: S): S[] => {\n        const x = s.trim().split(/\\s+/g)\n        switch (x.length) {\n          case 1: return ['1', '1', s, s]\n          case 2: return ['1', '1', ...x]\n          case 3: return [...x, x[2]]\n          case 4: return x\n          default: return x.slice(0, 4)\n        }\n      },\n      place = (s: S): Slot => {\n        if (!s) return badPlacement\n        const [x, y, w, h] = normalize(s).map(parseI)\n        if (isNaN(x) || isNaN(y) || isNaN(w) || isNaN(h)) return badPlacement\n        return placeOnGrid(x - 1, y - 1, w, h)\n      },\n      getWindowSize = (): Size => ([\n        window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n        window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n      ]),\n      rescale = (): F => {\n        const [w, h] = getWindowSize()\n        scale = Math.min(w / width, h / height)\n        return scale\n      },\n      inset: React.CSSProperties = ({ position: 'absolute', left: gap, top: gap, right: gap, bottom: gap, overflow: 'auto' })\n    return {\n      width, height,\n      innerWidth: giw, innerHeight: gih,\n      unitWidth: uw, unitHeight: uh,\n      unitInnerWidth: iw, unitInnerHeight: ih,\n      gap, place, scale, rescale, inset,\n    }\n  }\n\nexport const\n  grid = newGrid(134, 76, 12, 10, 15) // approx 1800x930\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    grid: {\n      position: 'relative',\n      boxSizing: 'border-box',\n      width: grid.innerWidth,\n      margin: margin(grid.gap),\n    },\n    slot: {\n      boxSizing: 'border-box',\n      transition: 'box-shadow 0.3s cubic-bezier(.25,.8,.25,1)',\n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      $nest: {\n        '>*:first-child': {\n          boxSizing: 'border-box',\n          flexGrow: 1, // Expand vertically\n        }\n      }\n    },\n    normal: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n      $nest: {\n        '&:hover': {\n          boxShadow: `0px 12px 20px ${theme.colors.text2}`,\n        }\n      },\n    },\n    raised: {\n      color: theme.colors.card,\n      backgroundColor: palette.themePrimary,\n      boxShadow: `0px 3px 7px ${theme.colors.text3}`,\n    },\n    flat: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n    },\n  }),\n  getCardEffectClass = (c: C) => {\n    const effect = getCardEffect(c)\n    return clas(css.slot, effect === CardEffect.Normal\n      ? css.normal\n      : effect === CardEffect.Raised\n        ? css.raised\n        : effect == CardEffect.Flat\n          ? css.flat : '')\n  }\n\nexport const\n  getCardEffect = (c: C): CardEffect => cards.lookup(c.state.view).effect,\n  GridLayout = ({ name, cards: cs }: { name: S, cards: C[] }) => {\n    const\n      children = cs.map(c => {\n        const\n          placement = grid.place(c.state.box),\n          { left, top, right, bottom, width, height } = placement,\n          display = placement === badPlacement ? 'none' : undefined,\n          zIndex = c.name === '__unhandled_error__' ? 1 : 'initial'\n        return (\n          <div key={c.id} className={getCardEffectClass(c)} style={{ display, position: 'absolute', left, top, right, bottom, width, height, zIndex }}>\n            <CardView card={c} />\n            {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n          </div>\n        )\n      })\n    return (\n      <div data-test={name} className={css.grid}>\n        {children}\n      </div>\n    )\n  }\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const showNotification = async (notificationText: string) => {\n  // TODO: Decide on fallback when user's browser does not support Notification API.\n  if (!('Notification' in window)) return\n  else if (Notification.permission === 'granted') new Notification(notificationText)\n  else if (Notification.permission !== 'denied') {\n    if (await Notification.requestPermission() === 'granted') new Notification(notificationText)\n  }\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards } from './layout'\nimport { showNotification } from './notification'\nimport { bond, box, Card, qd, S, U } from './qd'\nimport { Dialog } from './dialog'\n\n/**\n * Represents the layout structure for a page.\n */\nexport interface Layout {\n  /**\n   * The minimum viewport width at which to use this layout.\n   * Values must be pixel widths (e.g. '0px', '576px', '768px') or a named preset.\n   * The named presets are:\n   * 'xs': '0px' for extra small devices (portrait phones),\n   * 's': '576px' for small devices (landscape phones),\n   * 'm': '768px' for medium devices (tablets),\n   * 'l': '992px' for large devices (desktops),\n   * 'xl': '1200px' for extra large devices (large desktops).\n   *\n   * A breakpoint value of 'xs' (or '0') matches all viewport widths, unless other breakpoints are set.\n  */\n  breakpoint: S\n  /** The zones in this layout. Each zones can in turn contain sub-zones. */\n  zones: Zone[]\n  /** The width of the layout. Defaults to `100%`. */\n  width?: S\n  /** The minimum width of the layout. */\n  min_width?: S\n  /** The maximum width of the layout. */\n  max_width?: S\n  /** The height of the layout. Defaults to `auto`. */\n  height?: S\n  /** The minimum height of the layout. */\n  min_height?: S\n  /** The maximum height of the layout. */\n  max_height?: S\n}\n\n/**\n * Represents an zone within a page layout.\n */\nexport interface Zone {\n  /** An identifying name for this zone. */\n  name: S,\n  /** The size of this zone. */\n  size?: S,\n  /** Layout direction. */\n  direction?: 'row' | 'column'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n  /** The sub-zones contained inside this zone. */\n  zones?: Zone[]\n}\n\n/**\n * Represents page-global state.\n *\n * This card is invisible.\n * It is used to control attributes of the active page.\n*/\ninterface State {\n  /** The title of the page. */\n  title?: S\n  /** Refresh rate in seconds. A value of 0 turns off live-updates. Values != 0 are currently ignored (reserved for future use). */\n  refresh?: U\n  /** Display a desktop notification. */\n  notification?: S\n  /** Redirect the page to a new URL. */\n  redirect?: S\n  /** Shortcut icon path. Preferably a `.png` file (`.ico` files may not work in mobile browsers). */\n  icon?: S\n  /** The layouts supported by this page. */\n  layouts?: Layout[]\n  /** Display a dialog on the page. */\n  dialog?: Dialog\n}\n\nexport const\n  layoutsB = box<Layout[]>([]),\n  preload = ({ state }: Card<State>) => {\n    const { title, icon, refresh, notification, redirect, layouts, dialog } = state\n\n    if (title) {\n      delete state.title\n      window.document.title = title\n    }\n\n    if (icon) {\n      delete state.icon\n      const\n        iconLink = document.querySelector(\"link[rel*='icon']\") as HTMLLinkElement,\n        touchIconLink = document.querySelector(\"link[rel*='apple-touch-icon']\") as HTMLLinkElement\n      if (iconLink) iconLink.href = icon\n      if (touchIconLink) touchIconLink.href = icon\n    }\n\n    if (typeof refresh === 'number') {\n      delete state.refresh\n      qd.refreshRateB(refresh)\n    }\n\n    // Force new obj reference to rerender Dialog component with most recent changes.\n    qd.dialogB(dialog ? { ...dialog } : null)\n\n    if (notification) {\n      delete state.notification\n      showNotification(notification)\n    }\n\n    if (redirect) {\n      delete state.redirect\n      try {\n        const url = new URL(redirect)\n        if (redirect === url.hash) {\n          window.location.hash = redirect\n        } else {\n          window.location.replace(redirect)\n        }\n      } catch (e) {\n        console.error(`Could not redirect: ${redirect} is an invalid URL`)\n      }\n    }\n\n    if (layouts) {\n      delete state.layouts\n      layoutsB(layouts)\n    }\n  }\n\nexport const View = bond(() => ({ render: () => <></> }))\n\ncards.register('meta', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { default as React } from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { CardEffect, CardView, getCardEffect, GridLayout } from './layout'\nimport { Layout, layoutsB, preload, Zone } from './meta'\nimport { B, bond, box, C, Dict, Disposable, on, Page, parseU, S, U } from './qd'\nimport { clas, getTheme, margin, palette } from './theme'\n\n\ntype Breakpoint = {\n  layout: Layout\n  min: U\n  max: U\n  listener(e: MediaQueryListEvent): void\n  mq: MediaQueryList\n}\n\ntype Slot = {\n  order: U\n  zone?: S\n  grow?: U\n  width?: S\n  height?: S\n}\n\ntype CardSlot = {\n  card: C\n  slot: Slot\n}\n\ntype Section = {\n  zone: Zone\n  sections?: Section[]\n  cardslots: CardSlot[]\n}\n\nconst\n  presetBreakpoints: Dict<S> = {\n    xs: '0px',\n    s: '576px',\n    m: '768px',\n    l: '992px',\n    xl: '1200px',\n  },\n  breakpointsB = box<Breakpoint[]>([]),\n  layoutB = box<{ layout: Layout, index: U } | null>(null),\n  resizedB = box(), // breakpoint changed?\n  parseBreakpoint = (spec: S): U => parseInt(presetBreakpoints[spec] ?? spec, 10),\n  badSlot: Slot = { order: 0 },\n  parseBox = ({ zone, order, size, width, height }: any): Slot => {\n    return { zone, order: order ? order : 0, grow: parseU(size), width, height }\n  },\n  parseBoxes = (index: U, spec: S): Slot => {\n    try {\n      if (spec[0] === '[') {\n        const specs: any[] = JSON.parse(spec)\n        spec = specs[index]\n        if (!spec) spec = specs[0]\n        if (!spec) return badSlot\n      }\n      return spec[0] === '{' ? parseBox(JSON.parse(spec)) : { zone: spec, order: 0 }\n    } catch {\n      return badSlot\n    }\n  },\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  segregate = <T extends {}>(xs: T[], f: (x: T) => B): [T[], T[]] => {\n    const a: T[] = [], b: T[] = []\n    for (const x of xs) (f(x) ? a : b).push(x)\n    return [a, b]\n  }\n\non(layoutsB, layouts => {\n  const\n    bps = layouts.map((layout, index): Breakpoint => {\n      const\n        nextLayout = layouts[index + 1],\n        min = parseBreakpoint(layout.breakpoint),\n        max = nextLayout ? parseBreakpoint(nextLayout.breakpoint) - 1 : 0,\n        mq = window.matchMedia(\n          max\n            ? `(min-width:${min}px) and (max-width:${max}.98px)`\n            : `(min-width:${min}px)`\n        ),\n        listener = (mq: MediaQueryListEvent) => {\n          if (mq.matches) {\n            layoutB({ layout, index })\n            resizedB({})\n          }\n        },\n        bp: Breakpoint = { layout, min, max, mq, listener }\n\n      mq.addListener(listener)\n      if (mq.matches) layoutB({ layout, index })\n\n      return bp\n    })\n\n  for (const { mq, listener } of breakpointsB()) mq.removeListener(listener)\n  breakpointsB(bps)\n})\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    flex: {\n      position: 'relative',\n      display: 'flex',\n    },\n    slot: {\n      boxSizing: 'border-box',\n      transition: 'box-shadow 0.3s cubic-bezier(.25,.8,.25,1)',\n      display: 'flex',\n      flexDirection: 'column',\n      margin: margin(7), // Approx 15px gutter between cards.\n      $nest: {\n        '>*': {\n          boxSizing: 'border-box',\n          flexGrow: 1, // Expand vertically\n        }\n      }\n    },\n    normal: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n      $nest: {\n        '&:hover': {\n          boxShadow: `0px 12px 20px ${theme.colors.text2}`,\n        }\n      },\n    },\n    raised: {\n      color: theme.colors.card,\n      backgroundColor: palette.themePrimary,\n      boxShadow: `0px 3px 7px ${theme.colors.text3}`,\n      margin: 0,\n    },\n    flat: {\n      backgroundColor: theme.colors.card,\n      boxShadow: `0px 3px 5px ${theme.colors.text0}`,\n    },\n  }),\n  getCardEffectClass = (c: C) => {\n    const effect = getCardEffect(c)\n    return clas(css.slot, effect === CardEffect.Normal\n      ? css.normal\n      : effect === CardEffect.Raised\n        ? css.raised\n        : effect == CardEffect.Flat\n          ? css.flat : '')\n  },\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toSectionStyle = (zone: Zone, direction?: S): React.CSSProperties => {\n    const\n      style: React.CSSProperties = {\n        flexDirection: zone.direction === 'row' ? 'row' : 'column',\n        justifyContent: justifications[zone.justify ?? ''],\n        alignItems: alignments[zone.align ?? ''],\n        alignContent: wrappings[zone.wrap ?? ''],\n        flexWrap: zone.wrap ? 'wrap' : undefined,\n      }\n\n    if (zone.size) {\n      const grow = parseU(zone.size) // attempt strict-parse to uint\n      if (!isNaN(grow)) {// no units; treat as ratio\n        if (grow > 0) style.flexGrow = grow\n      } else { // has units; treat as size\n        if (direction === 'row') {\n          style.width = zone.size\n        } else {\n          style.height = zone.size\n          style.minHeight = zone.size // Needed for Safari.\n        }\n      }\n    } else { // no size\n      // expand to fit if horizontal\n      if (direction === 'row') {\n        style.flexGrow = 1\n      }\n    }\n\n    return style\n  },\n  toSlotStyle = ({ card: c, slot }: CardSlot): React.CSSProperties => {\n    const\n      { width, height, grow } = slot,\n      zIndex = c.name === '__unhandled_error__' ? 1 : undefined,\n      style: React.CSSProperties = { position: 'relative', zIndex }\n\n    if (grow || grow === 0 || width || height) {\n      if (grow) style.flexGrow = grow // grow only if non-zero (else default to shrink)\n      if (width) style.width = width\n      if (height) style.height = height\n    } else { // no size specified; occupy 1 part\n      style.flexGrow = 1\n    }\n    return style\n  },\n  toSection = (zone: Zone): Section => ({\n    zone,\n    sections: zone.zones?.map(toSection),\n    cardslots: []\n  }),\n  findSection = (section: Section, name: S): Section | null => {\n    const { zone, sections } = section\n    if (zone.name === name) return section\n    if (sections) {\n      for (const s of sections) {\n        const c = findSection(s, name)\n        if (c) return c\n      }\n    }\n    return null\n  },\n  sortCardsInSection = (section: Section) => {\n    const { sections } = section\n    if (sections) {\n      for (const s of sections) {\n        sortCardsInSection(s)\n      }\n    }\n    section.cardslots.sort((a, b) => a.slot.order - b.slot.order)\n  },\n  FlexSection = ({ section, direction }: { section: Section, direction?: S }) => {\n    const\n      { zone, cardslots, sections } = section,\n      children = sections\n        ? sections.map(section => <FlexSection key={section.zone.name} direction={zone.direction} section={section} />)\n        : cardslots.length ?\n          cardslots.map(cardslot => {\n            const { card: c } = cardslot\n            return (\n              <div key={c.id} className={getCardEffectClass(c)} style={toSlotStyle(cardslot)}>\n                <CardView card={c} />\n                {!!c.state.commands?.length && <CardMenu name={c.name} commands={c.state.commands} changedB={c.changed} />}\n              </div>\n            )\n          })\n          : null\n\n    return (\n      <div data-test={zone.name} className={css.flex} style={toSectionStyle(zone, direction)}>\n        {children}\n      </div>\n    )\n  },\n  FlexLayout = ({ name, cards }: { name: S, cards: C[] }) => {\n    const layoutIndex = layoutB()\n    if (!layoutIndex) return <></>\n    const\n      { layout, index } = layoutIndex,\n      section = toSection({ name: 'main', zones: layout.zones }),\n      { width, min_width, max_width, height, min_height, max_height } = layout\n    for (const card of cards) {\n      const\n        slot = parseBoxes(index, card.state.box),\n        target = findSection(section, slot.zone ?? '')\n      target?.cardslots.push({ card, slot })\n    }\n\n    sortCardsInSection(section)\n\n    const style: React.CSSProperties = {\n      width: width ?? '100%',\n      minWidth: min_width,\n      maxWidth: max_width,\n      height,\n      minHeight: min_height,\n      maxHeight: max_height,\n    }\n    if (height === '100%') {\n      style.display = 'flex'\n      style.flexDirection = 'column'\n    }\n    return (\n      <div data-test={name} style={style}>\n        <FlexSection section={section} />\n      </div>\n    )\n  }\nexport const\n  PageLayout = bond(({ page }: { page: Page }) => {\n    let\n      metaCard: C | null = null,\n      onMetaCardChanged: Disposable | null = null\n\n    const\n      { changed } = page,\n      render = () => {\n        const\n          all = page.list(),\n          [metas, cards] = segregate(all, c => c.state.view === 'meta')\n\n        if (metas.length) {\n          onMetaCardChanged?.dispose()\n          metaCard = metas[0]\n          preload(metaCard as any) // causes layoutB to be set, if available.\n          onMetaCardChanged = on(metaCard.changed, () => preload(metaCard as any))\n        }\n        return layoutsB().length\n          ? <FlexLayout name={page.key} cards={cards} />\n          : <GridLayout name={page.key} cards={cards} />\n      }\n\n    return { render, changed, resizedB }\n  })\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport markdownit from 'markdown-it'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid, substitute } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { border, getTheme, padding, palette, pc } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n    },\n    markdown: {\n      $nest: {\n        a: {\n          color: palette.themePrimary,\n          $nest: {\n            '&:hover': {\n              textDecoration: 'none',\n            },\n          },\n        },\n        table: {\n          width: pc(100),\n          borderCollapse: 'collapse',\n        },\n        tr: {\n          borderBottom: border(1, theme.colors.text5),\n        },\n        th: {\n          padding: padding(11, 6),\n          textAlign: 'left',\n        },\n        td: {\n          padding: padding(11, 6),\n        },\n        img: {\n          maxWidth: '100%',\n          maxHeight: '100%',\n        },\n      },\n    },\n  })\n\nexport const\n  markdown = markdownit({ html: true, linkify: true, typographer: true, }),\n  markdownSafe = markdownit({ typographer: true, linkify: true }),\n  Markdown = ({ source }: { source: S }) => (<div className={css.markdown} dangerouslySetInnerHTML={{ __html: markdown.render(source) }} />),\n  MarkdownSafe = ({ source }: { source: S }) => (<div className={css.markdown} dangerouslySetInnerHTML={{ __html: markdownSafe.render(source) }} />)\n\n\n/**\n * Create a card that renders Markdown content.\n *\n * Github-flavored markdown is supported.\n * HTML markup is allowed in markdown content.\n * URLs, if found, are displayed as hyperlinks.\n * Copyright, reserved, trademark, quotes, etc. are replaced with language-neutral symbols.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The markdown content. Supports Github Flavored Markdown (GFM): https://guides.github.com/features/mastering-markdown/ */\n  content: S\n  /** Additional data for the card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          data = unpack(state.data),\n          title = substitute(state.title, data)\n        return (\n          <div data-test={name} className={css.card}>\n            {title && <div className={css.title}>{title}</div>}\n            <div className={css.body}>\n              <Markdown source={substitute(state.content, data)} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('markdown', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Markdown } from './markdown'\nimport { B, S } from './qd'\n\nconst\n  css = stylesheet({\n    container: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      alignContent: 'flex-start'\n    },\n    element: {\n      flexGrow: 1\n    },\n    icon: {\n      color: '#323130',\n      fontWeight: 400,\n      fontSize: '14px',\n      userSelect: 'none',\n      textAlign: 'left',\n      marginLeft: '0.5em',\n      cursor: 'pointer'\n    }\n  })\n\nexport const\n  XToolTip = ({ children, content, showIcon, expand }: {\n    children: React.ReactChild,\n    content?: S,\n    showIcon?: B,\n    expand?: B\n  }) => {\n    if (!content) return <>{children}</>\n\n    const\n      tooltipProps: Fluent.ITooltipProps = {\n        onRenderContent: () => (<div><Markdown source={content} /></div>)\n      }\n    return (\n      <div className={css.container} data-test='tooltip'>\n        {\n          showIcon === undefined || showIcon\n            ? (\n              <>\n                <div className={expand === undefined || expand ? css.element : ''}>{children}</div>\n                <Fluent.TooltipHost tooltipProps={tooltipProps}>\n                  <Fluent.FontIcon className={css.icon} iconName='Info' />\n                </Fluent.TooltipHost>\n              </>\n            )\n            : <Fluent.TooltipHost tooltipProps={tooltipProps}>{children}</Fluent.TooltipHost>\n        }\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component } from './form'\nimport { B, bond, S, qd, Dict } from './qd'\nimport { XToolTip } from './tooltip'\nimport { displayMixin } from './theme'\n\n/**\n * Create a button.\n *\n * Buttons are best used to enable a user to commit a change or complete steps in a task.\n * They are typically found inside forms, dialogs, panels or pages.\n * An example of their usage is confirming the deletion of a file in a confirmation dialog.\n *\n * When considering their place in a layout, contemplate the order in which a user will flow through the UI.\n * As an example, in a form, the individual will need to read and interact with the form fields before submitting\n * the form. Therefore, as a general rule, the button should be placed at the bottom of the UI container\n * which holds the related UI elements.\n *\n * Buttons may be placed within a \"buttons\" component which will lay out the buttons horizontally, or used\n * individually and they will be stacked vertically.\n *\n * While buttons can technically be used to navigate a user to another part of the experience, this is not\n * recommended unless that navigation is part of an action or their flow.\n */\nexport interface Button {\n  /** An identifying name for this component. If the name is prefixed with a '#', the button sets the location hash to the name when clicked. */\n  name: S\n  /** The text displayed on the button. */\n  label?: S\n  /** The caption displayed below the label. Setting a caption renders a compound button. */\n  caption?: S\n  /** A value for this button. If a value is set, it is used for the button's submitted instead of a boolean True. */\n  value?: S\n  /** True if the button should be rendered as the primary button in the set. */\n  primary?: B\n  /** True if the button should be disabled. */\n  disabled?: B\n  /** True if the button should be rendered as link text and not a standard button. */\n  link?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n/** Create a set of buttons laid out horizontally. */\nexport interface Buttons {\n  /** The button in this set. */\n  items: Component[]\n  /** Specifies how to lay out buttons horizontally. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n\nconst\n  css = stylesheet({\n    buttons: {\n      boxSizing: 'border-box',\n    },\n  }),\n  justifications: Dict<Fluent.Alignment> = {\n    start: 'start',\n    end: 'end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  }\n\nconst\n  XButton = bond(({ model: m }: { model: Button }) => {\n    qd.args[m.name] = false\n    const\n      onClick = () => {\n        if (m.name.startsWith('#')) {\n          window.location.hash = m.name.substr(1)\n          return\n        }\n        qd.args[m.name] = m.value === undefined || m.value\n        qd.sync()\n      },\n      render = () => {\n        if (m.link) {\n          return <Fluent.Link data-test={m.name} disabled={m.disabled} onClick={onClick}>{m.label}</Fluent.Link>\n        }\n        return m.caption?.length\n          ? m.primary\n            ? <Fluent.CompoundButton data-test={m.name} primary text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.CompoundButton data-test={m.name} text={m.label} secondaryText={m.caption} disabled={m.disabled} onClick={onClick} />\n          : m.primary\n            ? <Fluent.PrimaryButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n            : <Fluent.DefaultButton data-test={m.name} text={m.label} disabled={m.disabled} onClick={onClick} />\n      }\n    return { render }\n  })\nexport const\n  XButtons = ({ model: m }: { model: Buttons }) => {\n    const\n      children = (m.items.map(c => c.button).filter(Boolean) as Button[]).map(b => (\n        <XToolTip key={b.name} content={b.tooltip} showIcon={false} expand={false}>\n          <XButton model={b}>{b.label}</XButton>\n        </XToolTip>\n      ))\n    return (\n      <div data-test={m.name} className={css.buttons} style={displayMixin(m.visible)}>\n        <Fluent.Stack horizontal horizontalAlign={justifications[m.justify || '']} tokens={{ childrenGap: 10 }}>{children}</Fluent.Stack>\n      </div>\n    )\n  },\n  XStandAloneButton = ({ model: m }: { model: Button }) => (\n    <div className={css.buttons} style={displayMixin(m.visible)}>\n      <XButton key={m.name} model={m}>{m.label}</XButton>\n    </div>\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a checkbox.\n *\n * A checkbox allows users to switch between two mutually exclusive options (checked or unchecked, on or off) through\n * a single click or tap. It can also be used to indicate a subordinate setting or preference when paired with another\n * component.\n *\n * A checkbox is used to select or deselect action items. It can be used for a single item or for a list of multiple\n * items that a user can choose from. The component has two selection states: unselected and selected.\n *\n * For a binary choice, the main difference between a checkbox and a toggle switch is that the checkbox is for status\n * and the toggle switch is for action.\n *\n * Use multiple checkboxes for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checkbox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the checkbox. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the selection is indeterminate (neither selected nor unselected). */\n  indeterminate?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the checkbox value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XCheckbox = bond(({ model: m }: { model: Checkbox }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = checked === null ? null : !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Checkbox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          defaultIndeterminate={m.indeterminate}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, box, Box, on, S, qd } from './qd'\nimport { margin, displayMixin } from './theme'\nimport { stylesheet } from 'typestyle'\n\n/**\n * Create a set of checkboxes.\n * Use this for multi-select scenarios in which a user chooses one or more items from a group of\n * choices that are not mutually exclusive.\n */\nexport interface Checklist {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if the form should be submitted when the checklist value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  css = stylesheet({\n    toolbar: {\n      margin: margin(5, 0)\n    },\n    items: {\n      $nest: {\n        '> *': {\n          margin: '10px 0',\n        }\n      },\n    },\n  }),\n  XChecklistItem = bond(({ name, label, disabled, selectedB }: { name: S, label: S, disabled: B, selectedB: Box<B> }) => {\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => selectedB(!!checked),\n      render = () => {\n        return (\n          <Fluent.Checkbox\n            data-test={name}\n            label={label}\n            checked={selectedB()}\n            onChange={onChange}\n            disabled={disabled}\n            styles={{ root: { marginBottom: 4 } }}\n          />\n        )\n      }\n    return { render, selectedB }\n  })\n\nexport const\n  XChecklist = bond(({ model: m }: { model: Checklist }) => {\n    qd.args[m.name] = m.values || []\n    let _pause = false\n    const\n      defaultSelection = new Set<S>(m.values),\n      choices = (m.choices || []).map(c => ({\n        choice: c,\n        selectedB: box(defaultSelection.has(c.name))\n      })),\n      capture = () => {\n        if (_pause) return\n        const vs: S[] = []\n        for (const c of choices) if (c.selectedB()) vs.push(c.choice.name)\n        qd.args[m.name] = vs\n        if (m.trigger) qd.sync()\n      },\n      select = (value: B) => {\n        _pause = true\n        for (const c of choices) if (!c.choice.disabled) c.selectedB(value)\n        _pause = false\n        capture()\n      },\n      selectAll = () => select(true),\n      deselectAll = () => select(false),\n      render = () => {\n        const\n          items = choices.map(({ choice, selectedB }, i) => (\n            <XChecklistItem name={`checkbox-${i + 1}`} key={i} label={choice.label || choice.name} disabled={!!choice.disabled} selectedB={selectedB} />\n          ))\n        return (\n          <div data-test={m.name} style={displayMixin(m.visible)}>\n            <Fluent.Label>{m.label}</Fluent.Label>\n            <div className={css.toolbar}>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n            <div className={css.items}>{items}</div>\n          </div>\n        )\n      }\n    choices.forEach(c => on(c.selectedB, capture))\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n *  Create a choice for a checklist, choice group or dropdown.\n */\nexport interface Choice {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the checkbox is disabled. */\n  disabled?: B\n}\n\n/**\n * Create a choice group.\n * The choice group component, also known as radio buttons, let users select one option from two or more choices.\n * Each option is represented by one choice group button; a user can select only one choice group in a button group.\n *\n * Choice groups emphasize all options equally, and that may draw more attention to the options than necessary.\n * Consider using other components, unless the options deserve extra attention from the user.\n * For example, if the default option is recommended for most users in most situations, use a dropdown instead.\n *\n * If there are only two mutually exclusive options, combine them into a single Checkbox or Toggle switch.\n * For example, use a checkbox for \"I agree\" instead of choice group buttons for \"I agree\" and \"I don't agree.\"\n*/\nexport interface ChoiceGroup {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this field is required. */\n  required?: B\n  /** True if the form should be submitted when the selection changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XChoiceGroup = bond(({ model: m }: { model: ChoiceGroup }) => {\n    qd.args[m.name] = m.value || null\n    const\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IChoiceGroupOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IChoiceGroupOption) => {\n        if (option) qd.args[m.name] = option.key\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.ChoiceGroup\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          required={m.required}\n          defaultSelectedKey={m.value}\n          options={options}\n          onChange={onChange}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, qd, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a color picker.\n *\n * A date picker allows a user to pick a color value.\n * If the 'choices' parameter is set, a swatch picker is displayed instead of the standard color picker.\n */\nexport interface ColorPicker {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The selected color (CSS-compatible string). */\n  value?: S\n  /** A list of colors (CSS-compatible strings) to limit color choices to. */\n  choices?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the color picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  toColorCells = (cs: S[]) => cs.map((c): Fluent.IColorCellProps => ({ id: c, label: c, color: c }))\n\nexport const\n  XColorPicker = bond(({ model: m }: { model: ColorPicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onColorChanged = (_id?: string, color?: string) => {\n        qd.args[m.name] = color || value\n\n        if (m.trigger) qd.sync()\n      },\n      onChange = (_e: React.SyntheticEvent<HTMLElement>, color: Fluent.IColor) => {\n        qd.args[m.name] = color?.str || value\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <div data-test={m.name} style={displayMixin(m.visible)}>\n          <Fluent.Label>{m.label}</Fluent.Label>\n          {\n            m.choices?.length\n              ? <Fluent.SwatchColorPicker\n                columnCount={10}\n                selectedId={value || m.choices[0]}\n                colorCells={toColorCells(m.choices)}\n                onColorChanged={onColorChanged}\n              />\n              : <Fluent.ColorPicker\n                color={value || '#000'}\n                onChange={onChange}\n              />\n          }\n        </div>\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, box, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a combobox.\n *\n * A combobox is a list in which the selected item is always visible, and the others are visible on demand by\n * clicking a drop-down button or by typing in the input.\n * They are used to simplify the design and make a choice within the UI.\n *\n * When closed, only the selected item is visible.\n * When users click the drop-down button, all the options become visible.\n * To change the value, users open the list and click another value or use the arrow keys (up and down)\n * to select a new value.\n * When collapsed the user can select a new value by typing.\n */\nexport interface Combobox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The choices to be presented. */\n  choices?: S[]\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\n\nexport const\n  XCombobox = bond(({ model: m }: { model: Combobox }) => {\n    qd.args[m.name] = m.value || null\n    const\n      textB = box(m.value),\n      options = (m.choices || []).map((text, i): Fluent.IComboBoxOption => ({ key: `${i}`, text })),\n      onChange = (_e: React.FormEvent<Fluent.IComboBox>, option?: Fluent.IComboBoxOption, _index?: number, value?: string) => {\n        const v = option?.text || value || ''\n        qd.args[m.name] = v\n        textB(v)\n      },\n      render = () => (\n        <Fluent.ComboBox\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          placeholder={m.placeholder}\n          options={options}\n          disabled={m.disabled}\n          autoComplete=\"on\"\n          allowFreeform={true}\n          errorMessage={m.error}\n          text={textB()}\n          onChange={onChange}\n        />\n      )\n    return { render, textB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd, U } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a date picker.\n *\n * A date picker allows a user to pick a date value.\n */\nexport interface DatePicker {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The date value in YYYY-MM-DD format. */\n  value?: S\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the datepicker value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  pad2 = (n: U) => { const s = `${n}`; return s.length === 1 ? `0${s}` : s },\n  formatDate = (d: Date): S => `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`,\n  parseDate = (s: S | null): Date | undefined => {\n    if (s && s.length) {\n      const ss = s.split('-')\n      if (ss.length !== 3) return undefined\n      const ymd = ss.map(s => parseInt(s, 10)).filter(n => !isNaN(n))\n      if (ymd.length !== 3) return undefined\n      return new Date(ymd[0], ymd[1] - 1, ymd[2])\n    }\n    return undefined\n  }\n\nexport const\n  XDatePicker = bond(({ model: m }: { model: DatePicker }) => {\n    const value = m.value || null\n    qd.args[m.name] = value\n    const\n      onSelectDate = (d: Date | null | undefined) => {\n        qd.args[m.name] = (d === null || d === undefined) ? value : formatDate(d)\n\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.DatePicker\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          value={parseDate(value)}\n          placeholder={m.placeholder}\n          disabled={m.disabled}\n          onSelectDate={onSelectDate}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { Choice } from './choice_group'\nimport { B, bond, S, qd, box } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a dropdown.\n *\n * A dropdown is a list in which the selected item is always visible, and the others are visible on demand by clicking\n * a drop-down button. They are used to simplify the design and make a choice within the UI. When closed, only the\n * selected item is visible. When users click the drop-down button, all the options become visible.\n *\n * To change the value, users open the list and click another value or use the arrow keys (up and down) to\n * select a new value.\n *\n * Note: Use either the 'value' parameter or the 'values' parameter. Setting the 'values' parameter renders a\n * multi-select dropdown.\n */\nexport interface Dropdown {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. */\n  placeholder?: S\n  /** The name of the selected choice. */\n  value?: S\n  /** The names of the selected choices. If this parameter is set, multiple selections will be allowed. */\n  values?: S[]\n  /** The choices to be presented. */\n  choices?: Choice[]\n  /** True if this is a required field. */\n  required?: B\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the dropdown value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XDropdown = bond(({ model: m }: { model: Dropdown }) => {\n    const isMultivalued = !!m.values\n    qd.args[m.name] = isMultivalued\n      ? (m.values || [])\n      : (m.value || null)\n\n    const\n      selection = isMultivalued ? new Set<S>(m.values) : null,\n      selectedOptionsB = box(Array.from(selection || [])),\n      options = (m.choices || []).map(({ name, label, disabled }): Fluent.IDropdownOption => ({ key: name, text: label || name, disabled })),\n      onChange = (_e?: React.FormEvent<HTMLElement>, option?: Fluent.IDropdownOption) => {\n        if (option) {\n          const name = option.key as S\n          if (isMultivalued && selection !== null) {\n            if (option.selected) {\n              selection.add(name)\n            } else {\n              selection.delete(name)\n            }\n            const selectedOpts = Array.from(selection)\n            qd.args[m.name] = selectedOpts\n            selectedOptionsB(selectedOpts)\n          } else {\n            qd.args[m.name] = name\n          }\n        }\n        if (m.trigger) qd.sync()\n      },\n      selectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        options.forEach(o => { if (!o.disabled) selection.add(o.key as S) })\n\n        const selectionArr = Array.from(selection)\n        selectedOptionsB(selectionArr)\n        qd.args[m.name] = selectionArr\n\n        onChange()\n      },\n      deselectAll = () => {\n        if (!selection) return\n\n        selection.clear()\n        selectedOptionsB([])\n        qd.args[m.name] = []\n\n        onChange()\n      },\n      render = () =>\n        <div style={displayMixin(m.visible)}>\n          <Fluent.Dropdown\n            data-test={m.name}\n            label={m.label}\n            placeholder={m.placeholder}\n            options={options}\n            required={m.required}\n            disabled={m.disabled}\n            multiSelect={isMultivalued || undefined}\n            defaultSelectedKey={!isMultivalued ? m.value : undefined}\n            selectedKeys={isMultivalued ? selectedOptionsB() : undefined}\n            onChange={onChange}\n          />\n          {\n            isMultivalued &&\n            <div>\n              <Fluent.Text variant='small'>\n                <Fluent.Link onClick={selectAll}>Select All</Fluent.Link> | <Fluent.Link onClick={deselectAll}>Deselect All</Fluent.Link>\n              </Fluent.Text>\n            </div>\n          }\n        </div>\n\n    return { render, selectedOptionsB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component, XComponents } from './form'\nimport { B, bond, box, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Creates a new expander.\n *\n * Expanders can be used to show or hide a group of related components.\n */\nexport interface Expander {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed on the expander. */\n  label?: S\n  /** True if expanded, False if collapsed. */\n  expanded?: B\n  /** List of components to be hideable by the expander. */\n  items?: Component[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    expanderOpen: {\n      $nest: {\n        '>div:last-child': {\n          display: 'block',\n        },\n      },\n    },\n    expanderClosed: {\n      $nest: {\n        '>div:last-child': {\n          display: 'none',\n        },\n      },\n    },\n  })\n\nexport const\n  XExpander = bond(({ model: m }: { model: Expander }) => {\n    const\n      isOpenB = box(!!qd.args[m.name]),\n      onClick = () => {\n        qd.args[m.name] = m.expanded = !m.expanded\n        isOpenB(m.expanded)\n      },\n      render = () => {\n        const\n          isOpen = isOpenB(),\n          actionTitle = isOpen ? 'Shrink' : 'Expand',\n          expanderIcon = { iconName: isOpen ? 'ChevronDownMed' : 'ChevronRightMed' },\n          className = isOpenB() ? css.expanderOpen : css.expanderClosed\n\n        return (\n          <div data-test={m.name} className={className} style={displayMixin(m.visible)}>\n            <Fluent.Separator alignContent=\"start\" styles={{ content: { paddingLeft: 0 } }}>\n              <Fluent.ActionButton\n                title={actionTitle}\n                iconProps={expanderIcon}\n                onClick={onClick}\n                styles={{ root: { paddingLeft: 0 }, icon: { marginLeft: 0 } }}>{m.label}</Fluent.ActionButton>\n            </Fluent.Separator>\n            <XComponents items={m.items || []} />\n          </div>\n        )\n      }\n    return { isOpenB, render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, bond, box, S, qd, U, xid, F } from './qd'\nimport { getTheme, centerMixin, dashed, clas, displayMixin, padding } from './theme'\n\n/**\n * Create a file upload component.\n * A file upload component allows a user to browse, select and upload one or more files.\n */\nexport interface FileUpload {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if the component should allow multiple files to be uploaded. */\n  multiple?: B\n  /** List of allowed file extensions, e.g. `pdf`, `docx`, etc. */\n  file_extensions?: S[]\n  /** Maximum allowed size (Mb) per file. Defaults to no limit. */\n  max_file_size?: F\n  /** Maximum allowed size (Mb) for all files combined. Defaults to no limit. */\n  max_size?: F\n  /** The height of the file upload, e.g. '400px', '50%', etc. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  { colors } = getTheme(),\n  css = stylesheet({\n    uploadInput: {\n      opacity: 0\n    },\n    upload: {\n      ...centerMixin(),\n      flexDirection: 'column',\n      boxSizing: 'border-box',\n    },\n    uploadDragging: {\n      border: dashed(2, colors.text),\n    },\n    uploadLabel: {\n      ...centerMixin(),\n      padding: padding(7, 10),\n      fontSize: 14,\n      fontWeight: 600,\n      borderRadius: 2,\n      background: colors.text,\n      color: colors.page,\n      minWidth: 80,\n      $nest: {\n        '&:hover': {\n          cursor: 'pointer'\n        }\n      }\n    },\n    uploadMessageBar: {\n      margin: '20px 0'\n    },\n    uploadRemove: {\n      fontSize: 20,\n      position: 'absolute',\n      top: -15,\n      right: 0,\n      cursor: 'pointer'\n    },\n  })\nconst convertMegabytesToBytes = (bytes: F) => bytes * 1024 * 1024\nexport const\n  XFileUpload = bond(({ model }: { model: FileUpload }) => {\n    const\n      isDraggingB = box(false),\n      filesB = box<File[]>([]),\n      percentCompleteB = box(0.0),\n      errorB = box(''),\n      successMsgB = box(''),\n      maxFileSizeBytes = model.max_file_size ? convertMegabytesToBytes(model.max_file_size) : 0,\n      maxSizeBytes = model.max_size ? convertMegabytesToBytes(model.max_size) : 0,\n      fileExtensions = model.file_extensions\n        ? model.file_extensions.map(e => e.startsWith('.') ? e : `.${e}`)\n        : null,\n      upload = async () => {\n        const formData = new FormData()\n        filesB().forEach(f => formData.append('files', f))\n\n        try {\n          const makeRequest = new Promise<XMLHttpRequest>((resolve, reject) => {\n            const xhr = new XMLHttpRequest()\n            xhr.open(\"POST\", \"/_f\")\n            xhr.upload.onprogress = e => percentCompleteB(e.loaded / e.total)\n            xhr.send(formData)\n            xhr.onreadystatechange = () => {\n              if (xhr.readyState !== XMLHttpRequest.DONE) return\n              if (xhr.status >= 200 && xhr.status < 300) resolve(xhr)\n              else reject(xhr)\n            }\n          })\n          const { responseText } = await makeRequest\n          const { files } = JSON.parse(responseText)\n          qd.args[model.name] = files\n          qd.sync()\n          successMsgB(`Successfully uploaded files: ${filesB().map(({ name }) => name).join(',')}.`)\n        }\n        catch (e) { errorB('There was an error when uploading file.') }\n        finally { filesB([]) }\n      },\n      isFileTypeAllowed = (fileName: string) => {\n        if (!fileExtensions) return true\n        for (const allowedExtension of fileExtensions) {\n          if (fileName.toLowerCase().endsWith(allowedExtension.toLowerCase())) return true\n        }\n        return false\n      },\n      validateFiles = (fileArr: File[]) => {\n        if (!model.multiple && fileArr.length > 1) {\n          return 'Cannot upload multiple files. Input is not set to multiple mode.'\n        }\n\n        const notAllowedFiles = fileArr.filter(({ name }) => !isFileTypeAllowed(name))\n        if (notAllowedFiles.length) {\n          return `Not allowed extension for files: ${notAllowedFiles.map(({ name }) => name).join(', ')}.\n          Allowed file extensions: ${fileExtensions?.join(', ')}.`\n        }\n\n        if (maxFileSizeBytes) {\n          const maxSizePerFileExceededFiles = fileArr.filter(({ size }) => size > maxFileSizeBytes)\n          if (maxSizePerFileExceededFiles.length) {\n            return `Max file size exceeded for files: ${maxSizePerFileExceededFiles.map(({ name }) => name).join(', ')}.\n            Allowed size per file: ${model.max_file_size}Mb.`\n          }\n        }\n\n        if (maxSizeBytes) {\n          const totalSize = fileArr.reduce((total, { size }) => total + size, 0)\n          if (totalSize > maxSizeBytes) {\n            return `Total max file size exceeded. Allowed size: ${model.max_size}Mb.`\n          }\n        }\n      },\n      onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = e.target.files\n        if (!files?.length) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n        filesB(fileArr)\n      },\n      onIsDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(true)\n      },\n      onIsNotDragging = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n        isDraggingB(false)\n      },\n      onDrop = (e: React.DragEvent<HTMLFormElement>) => {\n        onIsNotDragging(e)\n        const files = e.dataTransfer.files\n        if (!files.length || errorB() || successMsgB()) return\n        const fileArr = Array.from(files)\n\n        const errMsg = validateFiles(fileArr)\n        if (errMsg) {\n          errorB(errMsg)\n          return\n        }\n\n        filesB(fileArr)\n      },\n      // Workaround - This event prevents onDrop from firing.\n      // https://stackoverflow.com/questions/50230048/react-ondrop-is-not-firing/50230145.\n      onDragOver = (e: React.DragEvent<HTMLFormElement>) => {\n        e.preventDefault()\n        e.stopPropagation()\n      },\n      onDismissError = () => errorB(''),\n      onDismissSuccess = () => {\n        successMsgB('')\n        percentCompleteB(0)\n      },\n      removeFile = (index: U) => () => {\n        filesB().splice(index, 1)\n        filesB([...filesB()])\n      },\n      getUploadBodyComponent = () => {\n        if (errorB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>An error occured</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.error}\n              isMultiline={true}\n              onDismiss={onDismissError}>\n              {errorB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (successMsgB()) return (\n          <>\n            <Fluent.Text variant='xLarge'>Upload successful</Fluent.Text>\n            <Fluent.MessageBar\n              className={css.uploadMessageBar}\n              messageBarType={Fluent.MessageBarType.success}\n              isMultiline={true}\n              onDismiss={onDismissSuccess}>\n              {successMsgB()}\n            </Fluent.MessageBar>\n          </>\n        )\n        else if (isDraggingB()) return (\n          <Fluent.Text styles={{ root: { pointerEvents: 'none' } }}>Drop files anywhere within the box.</Fluent.Text>\n        )\n        else if (percentCompleteB()) return (\n          <Fluent.ProgressIndicator\n            styles={{ root: { width: '80%' } }}\n            data-test='progress' // TODO: Does not work.\n            description={`Uploading: ${(percentCompleteB() * 100).toFixed(2)}%`}\n            percentComplete={percentCompleteB()}\n          />\n        )\n        else if (filesB().length) return (\n          <>\n            <Fluent.Text variant='xLarge'>{model.multiple ? 'Chosen Files' : 'Chosen File'}</Fluent.Text>\n            <Fluent.Stack\n              horizontal={true}\n              verticalAlign='center'\n              styles={{ root: { maxWidth: '100%', overflowX: 'auto', padding: '30px 0' } }}\n              tokens={{ childrenGap: 15 }}>\n              {\n                filesB().map(({ name }, i) => (\n                  <Fluent.StackItem key={xid()} styles={{ root: { textAlign: 'center', position: 'relative' } }}>\n                    <Fluent.Icon className={css.uploadRemove} iconName='RemoveFilter' onClick={removeFile(i)} />\n                    <Fluent.Icon iconName='OpenFile' styles={{ root: { fontSize: 35 } }} />\n                    <br />\n                    <Fluent.Text nowrap={true} styles={{ root: { display: 'block', margin: '15px 0' } }}>{name}</Fluent.Text>\n                  </Fluent.StackItem>\n                ))\n              }\n            </Fluent.Stack>\n          </>\n        )\n        else return (\n          <>\n            <Fluent.Icon iconName='CloudUpload' styles={{ root: { fontSize: 50 } }} />\n            <input\n              id='file'\n              data-test={model.name}\n              className={css.uploadInput}\n              onChange={onChange}\n              type='file'\n              accept={fileExtensions?.join(',') || undefined}\n              multiple={model.multiple} />\n            <label htmlFor=\"file\" className={css.uploadLabel}>Browse...</label>\n            <Fluent.Text styles={{ root: { marginTop: 15 } }}>Or drag and drop {model.multiple ? 'files' : 'a file'} here.</Fluent.Text>\n          </>\n        )\n      },\n      render = () => {\n        const uploadClasses = isDraggingB() && !errorB() && !successMsgB() ? clas(css.upload, css.uploadDragging) : css.upload\n        return (\n          <div style={displayMixin(model.visible)}>\n            <form\n              className={uploadClasses}\n              style={{ height: model.height || 300 }}\n              onDragStart={onIsDragging}\n              onDragEnter={onIsDragging}\n              onDragEnd={onIsNotDragging}\n              onDragLeave={onIsNotDragging}\n              onDrop={onDrop}\n              onDragOver={onDragOver}\n            >\n              {getUploadBodyComponent()}\n            </form>\n            <Fluent.PrimaryButton\n              disabled={!!percentCompleteB() || !filesB().length}\n              text={model.label}\n              onClick={upload} />\n          </div>\n        )\n      }\n\n    return { render, percentCompleteB, isDraggingB, filesB, errorB, successMsgB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, S, xid, B } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n    },\n  })\n\n/**\n * Create a new inline frame (an `iframe`).\n */\nexport interface Frame {\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>`. */\n  content?: S\n  /** The width of the frame, e.g. `200px`, `50%`, etc. Defaults to `100%`. */\n  width?: S\n  /** The height of the frame, e.g. `200px`, `50%`, etc. Defaults to `150px`. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/**\n * Render a card containing a HTML page inside an inline frame (an `iframe`).\n *\n * Either a path or content can be provided as arguments.\n */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The path or URL of the web page, e.g. `/foo.html` or `http://example.com/foo.html` */\n  path?: S\n  /** The HTML content of the page. A string containing `<html>...</html>` */\n  content?: S\n}\n\nconst\n  // replace ' src=\"/' -> ' src=\"http://foo.bar.baz:8080/'\n  fixrefs = (s: S): S => s.replace(/(\\s+src\\s*=\\s*[\"'])\\//g, `$1${window.location.protocol}//${window.location.host}/`),\n  inline = (s: S): S => URL.createObjectURL(new Blob([fixrefs(s)], { type: 'text/html' })),\n  InlineFrame = ({ path, content }: { path?: S, content?: S }) => (\n    <iframe title={xid()} src={path ? path : content ? inline(content) : inline('Nothing to render.')} frameBorder=\"0\" width=\"100%\" height=\"100%\" />\n  )\n\n// HACK: Applying width/height styles directly on iframe don't work in Chrome/FF; so wrap in div instead.\nexport const XFrame = ({ model: { name, path, content, width = '100%', height = '150px', visible } }: { model: Frame }) => (\n  <div data-test={name} style={{ width, height, ...displayMixin(visible) }}>\n    <InlineFrame path={path} content={content} />\n  </div>\n)\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <div className={css.title}>{state.title}</div>\n        <div className={css.body}>\n          <InlineFrame path={state.path} content={state.content} />\n        </div>\n      </div>\n    )\n    return { render, changed }\n  })\n\ncards.register('frame', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a label.\n *\n * Labels give a name or title to a component or group of components.\n * Labels should be in close proximity to the component or group they are paired with.\n * Some components, such as textboxes, dropdowns, or toggles, already have labels\n * incorporated, but other components may optionally add a Label if it helps inform\n * the user of the components purpose.\n*/\nexport interface Label {\n  /**  The text displayed on the label.*/\n  label: S\n  /** True if the field is required. */\n  required?: B\n  /** True if the label should be disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLabel = ({ model }: { model: Label }) => {\n    const { label, required = false, disabled = false, visible, name } = model\n    return (\n      <Fluent.Label\n        data-test={name}\n        style={displayMixin(visible)}\n        required={required}\n        disabled={disabled}\n      >{label}</Fluent.Label>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a hyperlink.\n *\n * Hyperlinks can be internal or external.\n * Internal hyperlinks have paths that begin with a `/` and point to URLs within the Wave UI.\n * All other kinds of paths are treated as external hyperlinks.\n */\nexport interface Link {\n  /** The text to be displayed. If blank, the `path` is used as the label. */\n  label?: S\n  /** The path or URL to link to. */\n  path?: S\n  /** True if the link should be disabled. */\n  disabled?: B\n  /** True if the link should be used for file download. */\n  download?: B\n  /** True if the link should be rendered as a button. */\n  button?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Where to display the link. Setting this to an empty string or `'_blank'` opens the link in a new tab or window. */\n  target?: S\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XLink = bond(({ model: m }: { model: Link }) => {\n    const\n      label = m.label || m.path,\n      target = m.target === '' ? '_blank' : m.target,\n      onClick = () => target ? window.open(m.path, target) : window.open(m.path),\n      render = () => (\n        <div style={displayMixin(m.visible)}>\n          {\n            m.button\n              ? <Fluent.DefaultButton data-test={m.name} text={label} disabled={m.disabled} onClick={onClick} />\n              : <Fluent.Link\n                data-test={m.name}\n                href={m.path}\n                download={m.download}\n                disabled={m.disabled}\n                target={target}>\n                {label}\n              </Fluent.Link>\n          }\n        </div>\n      )\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, S, B } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n    },\n  })\n\n/** Render HTML content. */\nexport interface Markup {\n  /** The HTML content. */\n  content: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render HTML content. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The HTML content. */\n  content: S\n}\n\nexport const\n  XMarkup = ({ model: { content, visible, name } }: { model: Markup }) => (\n    <div data-test={name} dangerouslySetInnerHTML={{ __html: content }} style={displayMixin(visible)} />\n  ),\n  MarkupCard = ({ name, title, content }: { name: S, title: S, content: S }) => (\n    <div data-test={name} className={css.card}>\n      {title && <div className={css.title}>{title}</div>}\n      <div className={css.body}>\n        <XMarkup model={{ content }} />\n      </div>\n    </div>\n  ),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <MarkupCard name={name} title={state.title} content={state.content} />\n    return { render, changed }\n  })\n\ncards.register('markup', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a message bar.\n *\n * A message bar is an area at the top of a primary view that displays relevant status information.\n * You can use a message bar to tell the user about a situation that does not require their immediate attention and\n * therefore does not need to block other activities.\n */\nexport interface MessageBar {\n  /** The icon and color of the message bar. */\n  type?: 'info' | 'error' | 'warning' | 'success' | 'danger' | 'blocked'\n  /** The text displayed on the message bar. */\n  text?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nconst\n  toMessageBarType = (t?: S): Fluent.MessageBarType => {\n    switch (t) {\n      case 'error': return Fluent.MessageBarType.error\n      case 'warning': return Fluent.MessageBarType.warning\n      case 'success': return Fluent.MessageBarType.success\n      case 'danger': return Fluent.MessageBarType.severeWarning\n      case 'blocked': return Fluent.MessageBarType.blocked\n      default: return Fluent.MessageBarType.info\n    }\n  }\n\nexport const\n  XMessageBar = ({ model: m }: { model: MessageBar }) => (\n    m.text?.length\n      ? (\n        <Fluent.MessageBar\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          messageBarType={toMessageBarType(m.type)} >{m.text}</Fluent.MessageBar>\n      )\n      : <div />\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Chart, registerInteraction } from '@antv/g2'\nimport { AdjustOption, AnnotationPosition, ArcOption, CoordinateActions, CoordinateOption, DataMarkerOption, DataRegionOption, GeometryOption, LineOption, RegionOption, ScaleOption, TextOption, ChartCfg, AxisOption } from '@antv/g2/lib/interface'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Fmt, parseFormat } from './intl'\nimport { cards, grid } from './layout'\nimport { B, bond, Card, Dict, F, parseI, parseU, qd, Rec, S, unpack, V } from './qd'\nimport { getTheme, displayMixin } from './theme'\n\nconst\n  theme = getTheme(),\n  hues = theme.colors,\n  cat10 = [\n    hues.gray,\n    hues.blue,\n    hues.green,\n    hues.amber,\n    hues.tangerine,\n    hues.purple,\n    hues.cyan,\n    hues.mint,\n    hues.pink,\n    hues.brown,\n  ]\ntype AnnotationOption = ArcOption | LineOption | TextOption | RegionOption | DataMarkerOption | DataRegionOption\n\nenum SpaceT { CC, DD, TT, CD, DC, TC, CT, TD, DT }\n\n/**\n * Create a specification for a layer of graphical marks such as bars, lines, points for a plot.\n * A plot can contain multiple such layers of marks.\n*/\ninterface Mark {\n  /** Coordinate system. `rect` is synonymous to `cartesian`. `theta` is transposed `polar`. */\n  coord?: 'rect' | 'cartesian' | 'polar' | 'theta' | 'helix';\n  /** Graphical geometry. */\n  type?: 'interval' | 'line' | 'path' | 'point' | 'area' | 'polygon' | 'schema' | 'edge' | 'heatmap';\n  /** X field or value. */\n  x?: V;\n  /** X base field or value. */\n  x0?: V;\n  /** X bin lower bound field or value. For histograms. */\n  x1?: V;\n  /** X bin upper bound field or value. For histograms. */\n  x2?: V;\n  /** X axis scale minimum. */\n  x_min?: F;\n  /** X axis scale maximum. */\n  x_max?: F;\n  /** Whether to nice X axis scale ticks. */\n  x_nice?: B;\n  /** X axis scale type. */\n  x_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** X axis title. */\n  x_title?: S;\n  /** Y field or value. */\n  y?: V;\n  /** Y base field or value. */\n  y0?: V;\n  /** Y bin lower bound field or value. For histograms. */\n  y1?: V;\n  /** Y bin upper bound field or value. For histograms. */\n  y2?: V;\n  /** Y axis scale minimum. */\n  y_min?: F;\n  /** Y axis scale maximum. */\n  y_max?: F;\n  /** Whether to nice Y axis scale ticks. */\n  y_nice?: B;\n  /** Y axis scale type. */\n  y_scale?: 'linear' | 'cat' | 'category' | 'identity' | 'log' | 'pow' | 'power' | 'time' | 'time-category' | 'quantize' | 'quantile';\n  /** Y axis title. */\n  y_title?: S;\n  /** Mark color field or value. */\n  color?: S;\n  /** Mark color range for multi-series plots. A string containing space-separated colors, e.g. `'#fee8c8 #fdbb84 #e34a33'` */\n  color_range?: S;\n  /** The unique values in the data (labels or categories or classes) to map colors to, e.g. `['high', 'medium', 'low']`. If this is not provided, the unique values are automatically inferred from the `color` attribute. */\n  color_domain?: S[];\n  /** Mark shape field or value for `point` mark types. Possible values are 'circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down', 'cross', 'tick', 'plus', 'hyphen', 'line'. */\n  shape?: S;\n  /** Mark shape range for multi-series plots using `point` mark types. A string containing space-separated shapes, e.g. `'circle square diamond'` */\n  shape_range?: S;\n  /** Mark size field or value. */\n  size?: V;\n  /** Mark size range. A string containing space-separated integers, e.g. `'4 30'` */\n  size_range?: S;\n  /** Field to stack marks by, or 'auto' to infer. */\n  stack?: S;\n  /** Field to dodge marks by, or 'auto' to infer. */\n  dodge?: S;\n  /** Curve type for `line` and `area` mark types. */\n  curve?: 'none' | 'smooth' | 'step-before' | 'step' | 'step-after';\n  /** Mark fill color. */\n  fill_color?: S;\n  /** Mark fill opacity. */\n  fill_opacity?: F;\n  /** Mark stroke color. */\n  stroke_color?: S;\n  /** Mark stroke opacity. */\n  stroke_opacity?: F;\n  /** Mark stroke size. */\n  stroke_size?: F;\n  /** Mark stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  stroke_dash?: S;\n  /** Label field or value. */\n  label?: S;\n  /** Distance between label and mark. */\n  label_offset?: F;\n  /** Horizontal distance between label and mark. */\n  label_offset_x?: F;\n  /** Vertical distance between label and mark. */\n  label_offset_y?: F;\n  /** Label rotation angle, in degrees, or 'none' to disable automatic rotation. The default behavior is 'auto' for automatic rotation. */\n  label_rotation?: S;\n  /** Label position relative to the mark. */\n  label_position?: 'top' | 'bottom' | 'middle' | 'left' | 'right';\n  /** Strategy to use if labels overlap. */\n  label_overlap?: 'hide' | 'overlap' | 'constrain';\n  /** Label fill color. */\n  label_fill_color?: S;\n  /** Label fill opacity. */\n  label_fill_opacity?: F;\n  /** Label stroke color. */\n  label_stroke_color?: S;\n  /** Label stroke opacity. */\n  label_stroke_opacity?: F;\n  /** Label stroke size (line width or pen thickness). */\n  label_stroke_size?: F;\n  /** Label font size. */\n  label_font_size?: F;\n  /** Label font weight. */\n  label_font_weight?: S;\n  /** Label line height. */\n  label_line_height?: F;\n  /** Label text alignment. */\n  label_align?: 'left' | 'right' | 'center' | 'start' | 'end';\n  /** Reference line stroke color. */\n  ref_stroke_color?: S;\n  /** Reference line stroke opacity. */\n  ref_stroke_opacity?: F;\n  /** Reference line stroke size (line width or pen thickness). */\n  ref_stroke_size?: F;\n  /** Reference line stroke dash style. A string containing space-separated integers that specify distances to alternately draw a line and a gap (in coordinate space units). If the number of elements in the array is odd, the elements of the array get copied and concatenated. For example, [5, 15, 25] will become [5, 15, 25, 5, 15, 25]. */\n  ref_stroke_dash?: S;\n}\n\n/** Extended mark attributes. Not exposed to API. */\ninterface MarkExt extends Mark {\n  /** Field. */\n  x_field?: S;\n  /** Format string. */\n  x_format?: Fmt;\n  /** Field. */\n  x0_field?: S;\n  /** Format string. */\n  x0_format?: Fmt;\n  /** Field. */\n  x1_field?: S;\n  /** Format string. */\n  x1_format?: Fmt;\n  /** Field. */\n  x2_field?: S;\n  /** Format string. */\n  x2_format?: Fmt;\n  /** Field. */\n  y_field?: S;\n  /** Format string. */\n  y_format?: Fmt;\n  /** Field. */\n  y0_field?: S;\n  /** Format string. */\n  y0_format?: Fmt;\n  /** Field. */\n  y1_field?: S;\n  /** Format string. */\n  y1_format?: Fmt;\n  /** Field. */\n  y2_field?: S;\n  /** Format string. */\n  y2_format?: Fmt;\n  /** Field. */\n  color_field?: S;\n  /** Format string. */\n  color_format?: Fmt;\n  /** Field. */\n  shape_field?: S;\n  /** Format string. */\n  shape_format?: Fmt;\n  /** Format string. */\n  size_format?: Fmt;\n  /** Field. */\n  size_field?: S;\n  /** Field. */\n  dodge_field?: S;\n  /** Field. */\n  label_field?: S;\n  /** Format string. */\n  label_format?: Fmt;\n}\n\n/** Create a plot. A plot is composed of one or more graphical mark layers. */\nexport interface Plot {\n  /** The graphical mark layers contained in this plot. */\n  marks: Mark[];\n}\n\nregisterInteraction('drag-move', {\n  start: [{ trigger: 'plot:mousedown', action: 'scale-translate:start' }],\n  processing: [{ trigger: 'plot:mousemove', action: 'scale-translate:translate', throttle: { wait: 100, leading: true, trailing: false } }],\n  end: [{ trigger: 'plot:mouseup', action: 'scale-translate:end' }],\n})\n\n// TODO not in use\nexport const\n  spaceTypeOf = (ds: any[], marks: Mark[]): SpaceT => spaceTypes[scaleTypeOf(ds, marks, 'x') + scaleTypeOf(ds, marks, 'y')],\n  crosshairFor = (t: SpaceT): 'x' | 'y' | 'xy' => {\n    switch (t) {\n      case SpaceT.CC:\n      case SpaceT.DD:\n      case SpaceT.TT:\n        return 'xy'\n      case SpaceT.DC:\n      case SpaceT.TC:\n      case SpaceT.TD:\n        return 'x'\n      case SpaceT.CD:\n      case SpaceT.CT:\n      case SpaceT.DT:\n        return 'y'\n    }\n  }\n\nconst\n  isF = (x: any): x is number => typeof x === 'number',\n  isB = (x: any): x is boolean => typeof x === 'boolean',\n  isS = (x: any): x is string => typeof x === 'string',\n  split = (s: S) => s.trim().split(/\\s+/g),\n  parseInts = (s: S) => split(s).map(s => parseInt(s, 10)),\n  convertToDates = (ds: any[], f: S) => {\n    for (const d of ds) {\n      if (d) {\n        const s = d[f]\n        if (s && isS(s)) d[f] = new Date(s) // must be ISO string\n      }\n    }\n  },\n  convertToPairs = (ds: any[], f0: S, f1: S, f: S) => {\n    for (const d of ds) if (d) d[f] = [d[f0], d[f1]]\n  },\n  xyVariants = ' 0 1 2'.split(' '),\n  xyExtra = split('min max nice scale title'),\n  makeXYProps = (p: S) => xyVariants.map(s => p + s),\n  makeXYExtraProps = (p: S) => xyExtra.map(s => `${p}_${s}`),\n  makeFormattables = (xs: S[]) => xs.map(f => ([f, f + '_field', f + '_format'])),\n  xProps = makeFormattables(makeXYProps('x')),\n  yProps = makeFormattables(makeXYProps('y')),\n  xExtraProps = makeXYExtraProps('x'),\n  yExtraProps = makeXYExtraProps('y'),\n  otherProps = makeFormattables(split('color shape size dodge label')),\n  formattables = [...xProps, ...yProps, ...otherProps],\n  scaleTypeOf = (ds: any[], marks: Mark[], attr: S): 'c' | 'd' | 't' => {\n    const f = attr + '_field', s = attr + '_scale'\n    for (const mark of marks) {\n      const m = mark as any, field = m[f], scale = m[s]\n      if (scale === 'time') return 't'\n      if (isS(field)) {\n        for (const d of ds) {\n          const v = d[field]\n          if (isF(v)) return 'c'\n          if (isS(v)) return 'd'\n        }\n      }\n    }\n    return 'c'\n  },\n  spaceTypes: Dict<SpaceT> = {\n    cc: SpaceT.CC, dd: SpaceT.DD, tt: SpaceT.TT,\n    dc: SpaceT.DC, cd: SpaceT.CD,\n    tc: SpaceT.TC, ct: SpaceT.CT,\n    td: SpaceT.TD, dt: SpaceT.DT,\n  },\n  dummyDatum: any = {},\n  makeFormatFunc = (field: S, render: HandlebarsTemplateDelegate<any>) => (datum: any, value?: any) => {\n    const x = datum ? datum[field] : value\n    if (x != null) {\n      dummyDatum[field] = x\n      return render(dummyDatum)\n    }\n    return ''\n  },\n  transposeMark = (mark: Mark) => { // WARNING: Can modify marks in-place!\n    const m: any = mark\n    for (let k = 0; k < xProps.length; k++) {\n      const x = xProps[k], y = yProps[k]\n      for (let i = 0; i < x.length; i++) {\n        const tmp = m[x[i]]\n        m[x[i]] = m[y[i]]\n        m[y[i]] = tmp\n      }\n    }\n    for (let i = 0; i < xExtraProps.length; i++) {\n      const x = xExtraProps[i], y = yExtraProps[i]\n      const tmp = m[x]\n      m[x] = m[y]\n      m[y] = tmp\n    }\n  },\n  refactorMark = (mark: Mark): MarkExt => {\n    // if any fields are passed in as format expressions, separate them out into _field and _format\n    const m = mark as any\n    for (const [plainAttr, fieldAttr, formatAttr] of formattables) {\n      const expr = m[plainAttr]\n      if (isS(expr)) {\n        const fmts = parseFormat(expr)\n        if (fmts) {\n          const [field, fmt] = fmts\n          m[plainAttr] = undefined\n          m[fieldAttr] = field\n          if (fmt) m[formatAttr] = makeFormatFunc(field, fmt)\n        }\n      }\n    }\n    return mark\n  },\n  refactorData = (ds: any[], marks: MarkExt[]): any[] => {\n    for (const m of marks) {\n      if (m.x_scale === 'time') {\n        for (const { x_field, x0_field } of marks) {\n          if (isS(x_field)) convertToDates(ds, x_field)\n          if (isS(x0_field)) convertToDates(ds, x0_field)\n        }\n        if (isS(m.x)) m.x = new Date(m.x)\n        if (isS(m.x0)) m.x0 = new Date(m.x0)\n        break\n      }\n    }\n    for (const m of marks) {\n      if (m.y_scale === 'time') {\n        for (const { y_field, y0_field } of marks) {\n          if (isS(y_field)) convertToDates(ds, y_field)\n          if (isS(y0_field)) convertToDates(ds, y0_field)\n        }\n        if (isS(m.y)) m.y = new Date(m.y)\n        if (isS(m.y0)) m.y0 = new Date(m.y0)\n        break\n      }\n    }\n    for (const { x_field, x0_field } of marks) {\n      if (isS(x_field) && isS(x0_field)) {\n        convertToPairs(ds, x0_field, x_field, x_field)\n      }\n    }\n    for (const { y_field, y0_field } of marks) {\n      if (isS(y_field) && isS(y0_field)) {\n        convertToPairs(ds, y0_field, y_field, y_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, x1_field, x2_field, y_field } = mark\n      if (type === 'interval' && isS(x1_field) && isS(x2_field) && isS(y_field)) { // histogram on x\n        mark.x_field = x1_field + ' - ' + x2_field\n        convertToPairs(ds, x1_field, x2_field, mark.x_field)\n      }\n    }\n    for (const mark of marks) {\n      const { type, y1_field, y2_field, x_field } = mark\n      if (type === 'interval' && isS(y1_field) && isS(y2_field) && isS(x_field)) { // histogram on y\n        mark.y_field = y1_field + ' - ' + y2_field\n        convertToPairs(ds, y1_field, y2_field, mark.y_field)\n      }\n    }\n    return ds\n  },\n  makeNote = ({\n    x, x0, y, y0, label,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash,\n    ref_stroke_color, ref_stroke_opacity, ref_stroke_dash, ref_stroke_size,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: Mark): AnnotationOption[] => {\n\n    // XXX pass 'start'/'end' if axis is categorical\n\n    const\n      labelStyle = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      ),\n      shapeStyle = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash),\n      lineStyle = makeShapeStyle(undefined, undefined, ref_stroke_color, ref_stroke_opacity, ref_stroke_size, ref_stroke_dash)\n\n    if (x != null && y != null) {\n      if (x0 != null && y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, y0] as AnnotationPosition,\n          end: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : undefined,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const marker: DataMarkerOption = {\n          type: 'dataMarker',\n          position: [x, y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          point: { style: shapeStyle },\n          line: { style: lineStyle }\n        }\n        return [marker]\n      }\n    } else if (x != null) {\n      if (x0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: [x0, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: [x, 'min'] as AnnotationPosition,\n          end: [x, 'max'] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    } else { // y != null\n      if (y0 != null) {\n        const region: DataRegionOption = {\n          type: 'region',\n          start: ['min', y0] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle } : null,\n          style: shapeStyle,\n        }\n        return [region]\n\n      } else {\n        const line: LineOption = {\n          type: 'line',\n          start: ['min', y] as AnnotationPosition,\n          end: ['max', y] as AnnotationPosition,\n          text: isS(label) ? { content: label, style: labelStyle, position: 'start' } : undefined,\n          style: lineStyle,\n        }\n        return [line]\n      }\n    }\n  },\n  makeGeom = ({\n    type, x_field, y_field,\n    color_field, color_range, color_domain, color,\n    shape_field, shape_range, shape,\n    size_field, size_range, size,\n    stack,\n    dodge, dodge_field,\n    curve,\n    fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_dash, stroke_size,\n    label_field, label_format, label_offset, label_offset_x, label_offset_y, label_rotation, label_position, label_overlap,\n    label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n    label_font_size, label_font_weight, label_line_height, label_align,\n  }: MarkExt): GeometryOption => {\n    const o: GeometryOption = {}\n    if (isS(type)) o.type = type\n\n    const adjust: AdjustOption[] = []\n    // TODO set marginRatio=1 polar coords\n    if (isS(dodge_field)) {\n      adjust.push({ type: 'dodge', marginRatio: 0, dodgeBy: dodge_field })\n    } else if (dodge === 'auto') {\n      adjust.push({ type: 'dodge', marginRatio: 0 })\n    }\n    if (stack === 'auto') adjust.push({ type: 'stack' })\n    if (adjust.length) o.adjust = adjust\n    if (isS(x_field) && isS(y_field)) o.position = { fields: [x_field, y_field] }\n    if (isS(color_field)) {\n      const colors = isS(color_range) ? split(color_range).map(theme.color) : cat10\n      o.color = { fields: [color_field], values: colors }\n      if (color_domain && color_domain.length == colors.length) {\n        const domain_colors = color_domain.reduce((acc, value, i) => {\n          acc[value] = colors[i]\n          return acc\n        }, {} as Dict<S>)\n        o.color.callback = (x: S) => domain_colors[x]\n      }\n    } else {\n      o.color = isS(color) ? theme.color(color) : theme.colors.gray\n    }\n    if (isS(shape_field)) {\n      if (isS(shape_range)) {\n        o.shape = { fields: [shape_field], values: split(shape_range) }\n      } else {\n        o.shape = { fields: [shape_field] }\n      }\n    } else if (isS(shape)) {\n      o.shape = shape\n    }\n    if (isS(size_field)) {\n      if (isS(size_range)) {\n        o.size = { fields: [size_field], values: parseInts(size_range) }\n      } else {\n        o.size = { fields: [size_field] }\n      }\n    } else if (isF(size)) {\n      o.size = size\n    }\n    if (isS(label_field)) {\n      const styles = makeTextStyle(\n        label_fill_color, label_fill_opacity, label_stroke_color, label_stroke_opacity, label_stroke_size,\n        label_font_size, label_font_weight, label_line_height, label_align,\n      )\n      const c: Dict<any> = {}\n      if (styles) c.style = styles\n      switch (label_overlap) {\n        case 'hide': c.layout = { type: 'overlap' }; break\n        case 'overlap': c.layout = { type: 'fixedOverlap' }; break\n        case 'constrain': c.layout = { type: 'limitInShape' }; break\n      }\n      if (isF(label_offset)) c.offset = label_offset\n      if (isF(label_offset_x)) c.offsetX = label_offset_x\n      if (isF(label_offset_y)) c.offsetY = label_offset_y\n      if (isS(label_rotation)) {\n        const i_label_rotation = parseI(label_rotation)\n        if (isNaN(i_label_rotation)) {\n          c.autoRotate = label_rotation === 'none' ? false : true\n        } else {\n          c.rotate = i_label_rotation * Math.PI / 180\n        }\n      }\n      switch (label_position) {\n        case 'top': case 'bottom': case 'middle': case 'left': case 'right': c.position = label_position as any\n      }\n\n      if (label_format) {\n        o.label = {\n          fields: [label_field],\n          callback: (label) => ({ content: label_format(null, label) })\n        }\n      } else {\n        o.label = { fields: [label_field] }\n      }\n\n      if (Object.keys(c).length) o.label.cfg = c\n    }\n    if (isS(curve)) {\n      switch (curve) {\n        case 'smooth': o.shape = 'smooth'; break\n        case 'step-before': o.shape = 'vh'; break\n        case 'step': o.shape = 'hvh'; break\n        case 'step-after': o.shape = 'hv'; break\n      }\n    }\n    const style = makeShapeStyle(fill_color, fill_opacity, stroke_color, stroke_opacity, stroke_size, stroke_dash)\n    if (style) o.style = style\n\n    return o\n  },\n  makeShapeStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, stroke_dash?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = theme.color(fill_color)\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = theme.color(stroke_color)\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isS(stroke_dash)) s.lineDash = parseInts(stroke_dash)\n    return Object.keys(s).length ? s : undefined\n  },\n  makeTextStyle = (fill_color?: S, fill_opacity?: F, stroke_color?: S, stroke_opacity?: F, stroke_size?: F, font_size?: F, font_weight?: S, line_height?: F, align?: S): Dict<any> | undefined => {\n    const s: Dict<any> = {}\n    if (isS(fill_color)) s.fill = theme.color(fill_color)\n    if (isF(fill_opacity)) s.fillOpacity = fill_opacity\n    if (isS(stroke_color)) s.stroke = theme.color(stroke_color)\n    if (isF(stroke_opacity)) s.strokeOpacity = stroke_opacity\n    if (isF(stroke_size)) s.lineWidth = stroke_size\n    if (isF(font_size)) s.fontSize = font_size\n    if (isS(font_weight)) {\n      const u_font_weight = parseU(font_weight)\n      s.fontWeight = isNaN(u_font_weight) ? font_weight : u_font_weight\n    }\n    if (isF(line_height)) s.lineHeight = line_height\n    if (isS(align)) s.textAlign = align\n    return Object.keys(s).length ? s : undefined\n  },\n  makeScales = (marks: MarkExt[]): [Record<S, ScaleOption>, Record<S, AxisOption>] => {\n    const\n      scales: Record<S, ScaleOption> = {},\n      axes: Record<S, AxisOption> = {}\n\n    for (const m of marks) {\n      if (m.x_field) {\n        const [x_scale, x_axis] = makeScale(m.x_scale, m.x_format, m.x_title, m.x_min, m.x_max, m.x_nice)\n        scales[m.x_field] = x_scale\n        if (x_axis) axes[m.x_field] = x_axis\n        break\n      }\n    }\n\n    for (const m of marks) {\n      if (m.y_field) {\n        const [y_scale, y_axis] = makeScale(m.y_scale, m.y_format, m.y_title, m.y_min, m.y_max, m.y_nice)\n        scales[m.y_field] = y_scale\n        if (y_axis) axes[m.y_field] = y_axis\n        break\n      }\n    }\n\n    return [scales, axes]\n  },\n  fixScaleType = (t: S): S => {\n    switch (t) {\n      case 'time-category': return 'timeCat'\n      case 'power': return 'pow'\n    }\n    return t\n  },\n  makeScale = (typ: S | undefined, format: Fmt | undefined, title: S | undefined, min: S | F | undefined, max: S | F | undefined, nice: B | undefined): [ScaleOption, AxisOption | null] => {\n    const\n      scale: ScaleOption = {},\n      axis: AxisOption = { label: { autoHide: false } } // Bug in G2? `autoHide` should be set to false by default (it is not).\n    if (isS(typ)) scale.type = fixScaleType(typ) as any\n    if (format) scale.formatter = (v: any) => format(undefined, v)\n    if (isS(title)) {\n      scale.alias = title\n      // HACK ALERT!\n      // The scale alias is not rendered by G2 unless the axis title is non-empty.\n      axis.title = {}\n    }\n    if (isF(min)) scale.min = min\n    if (isF(max)) scale.max = max\n    scale.nice = isB(nice) ? nice : true\n    return [scale, axis]\n  },\n  getCoordType = (marks: Mark[]): S | undefined => {\n    for (const { coord } of marks) if (isS(coord)) return coord\n    return undefined\n  },\n  makeCoord = (space: SpaceT, marks: Mark[]): CoordinateOption | undefined => {\n\n    // HACK ALERT!\n    // Flip all x* and y* properties if the x-variable is continuous.\n    // This is because the underlying lib expects x-variables to be always discrete.\n    // So if the coord space is continuous-discrete, flip x/y and set a transpose transform on the coords.\n\n    const\n      type = getCoordType(marks) as any,\n      transpose = space === SpaceT.CD,\n      actions: CoordinateActions[] | undefined = transpose ? [['transpose']] : undefined\n\n    if (transpose) for (const mark of marks) transposeMark(mark)\n\n    return (\n      type\n        ? actions ? { type, actions } : { type }\n        : actions ? { actions } : undefined\n    )\n  },\n  makeMarks = (marks: Mark[]): [GeometryOption[], AnnotationOption[]] => {\n    const\n      geometries: GeometryOption[] = [],\n      annotations: AnnotationOption[] = []\n\n    for (const m of marks) {\n      const { x, y } = m\n      if (x != null || y != null) {\n        annotations.push(...makeNote(m))\n      } else {\n        geometries.push(makeGeom(m))\n      }\n    }\n\n    return [geometries, annotations]\n  },\n  makeChart = (el: HTMLElement, space: SpaceT, marks: Mark[]): ChartCfg => {\n    // WARNING: makeCoord() must be called before other functions.\n    const\n      coordinate = makeCoord(space, marks), // WARNING: this call may transpose x/y in-place.\n      [scales, axes] = makeScales(marks),\n      [geometries, annotations] = makeMarks(marks)\n\n    return {\n      container: el,\n      autoFit: true,\n      options: {\n        animate: false,\n        coordinate,\n        scales,\n        axes,\n        geometries,\n        annotations,\n        interactions: [\n          { type: 'view-zoom' },\n          { type: 'drag-move' }, // custom\n        ],\n        tooltip: {\n          showCrosshairs: true,\n          crosshairs: { type: 'xy' }\n          // XXX pass container element\n        }\n      }\n    }\n  }\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      display: 'flex',\n      $nest: {\n        'canvas': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }\n      }\n    },\n  })\n\n/** Create a visualization for display inside a form. */\nexport interface Visualization {\n  /** The plot to be rendered in this visualization. */\n  plot: Plot\n  /** Data for this visualization. */\n  data: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The hight of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** The events to capture on this visualization. */\n  events?: S[]\n}\n\nexport const\n  XVisualization = bond(({ model }: { model: Visualization }) => {\n    let\n      currentChart: Chart | null = null,\n      currentPlot: Plot | null = null\n    const\n      container = React.createRef<HTMLDivElement>(),\n      init = () => {\n        const el = container.current\n        if (!el) return\n        // If card does not have specified height, it uses content. Since the wrapper is empty, it takes very little space - set to 300px by default.\n        if (el.clientHeight < 30) el.style.height = '300px'\n        const\n          raw_data = unpack<any[]>(model.data),\n          raw_plot = unpack<Plot>(model.plot),\n          marks = raw_plot.marks.map(refactorMark),\n          plot: Plot = { marks: marks },\n          space = spaceTypeOf(raw_data, marks),\n          data = refactorData(raw_data, plot.marks),\n          chart = plot.marks ? new Chart(makeChart(el, space, plot.marks)) : null\n        currentPlot = plot\n        if (chart) {\n          currentChart = chart\n          chart.data(data)\n          if (model.events) {\n            for (const event of model.events) {\n              switch (event) {\n                case 'select_marks': {\n                  chart.interaction('element-single-selected')\n                  chart.on('element:statechange', (ev: any) => {\n                    const e = ev.gEvent.originalEvent\n                    if (e.stateStatus) {\n                      if (model.name) {\n                        qd.events[model.name] = { select_marks: [e.element?.data] }\n                        qd.sync()\n                      }\n                    }\n                  })\n                }\n              }\n            }\n          }\n          chart.render()\n        }\n      },\n      update = () => {\n        const el = container.current\n        if (!el || !currentChart || !currentPlot) return\n        const\n          raw_data = unpack(model.data) as any[],\n          data = refactorData(raw_data, currentPlot.marks)\n        currentChart.changeData(data)\n      },\n      render = () => {\n        const\n          { width = 'auto', height = 'auto', visible, name } = model,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { flexGrow: 1 }\n            : { width, height }\n        return <div data-test={name} style={{ ...style, ...displayMixin(visible) }} ref={container} />\n      }\n    return { init, update, render }\n  })\n\n/** Create a card displaying a plot. */\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** Data for this card. */\n  data: Rec\n  /** The plot to be displayed in this card. */\n  plot: Plot\n  /** The events to capture on this card. */\n  events?: S[]\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const { title = 'Untitled', plot, data, events } = state\n        return (\n          <div className={css.card}>\n            <div className={css.title}>{title}</div>\n            <div className={css.body}>\n              <XVisualization model={{ name, plot, data, events }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('plot', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, U, B, qd, box } from './qd'\nimport { Choice } from './choice_group'\nimport { displayMixin } from './theme'\n\n/**\n * Create a picker.\n * Pickers are used to select one or more choices, such as tags or files, from a list.\n * Use a picker to allow the user to quickly search for or manage a few tags or files.\n*/\nexport interface Picker {\n  /** An identifying name for this component. */\n  name: S\n  /** The choices to be presented. */\n  choices: Choice[]\n  /** Text to be displayed above the component. */\n  label?: S\n  /** The names of the selected choices. */\n  values?: S[]\n  /** Maximum number of selectable choices. Defaults to no limit. */\n  max_choices?: U\n  /** Controls whether the picker should be disabled or not. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if the form should be submitted when the picker value changes. */\n  trigger?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst pickerSuggestionsProps: Fluent.IBasePickerSuggestionsProps = {\n  suggestionsHeaderText: 'Suggestions',\n  noResultsFoundText: 'No results found',\n}\n\nexport const XPicker = bond(({ model: m }: { model: Picker }) => {\n  const\n    tags: Fluent.ITag[] = m.choices.map(({ name, label }) => ({ key: name, name: label || name })),\n    selectedTagsB = box<Fluent.ITag[]>(tags.filter(({ key }) => m.values?.includes(key as S))),\n    filterSuggestedTags = (filterText: S, selectedTags?: Fluent.ITag[]) => {\n      if (!filterText) return []\n      const isAlreadySelected = (t: Fluent.ITag) => selectedTags && selectedTags.includes(t)\n      const isStringMatch = (name: S) => name.toLowerCase().includes(filterText.toLowerCase())\n      return tags.filter(t => isStringMatch(t.name) && !isAlreadySelected(t))\n    },\n    onChange = (items?: Fluent.ITag[]) => {\n      selectedTagsB(items || [])\n      qd.args[m.name] = items ? items.map(({ key }) => key) : null\n      if (m.trigger) qd.sync()\n    },\n    onEmptyResolveSuggestions = () => tags,\n    init = () => qd.args[m.name] = m.values || null,\n    render = () => (\n      <div style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Text>{m.label}</Fluent.Text>}\n        <Fluent.TagPicker\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          removeButtonAriaLabel=\"Remove\"\n          onResolveSuggestions={filterSuggestedTags}\n          onChange={onChange}\n          pickerSuggestionsProps={pickerSuggestionsProps}\n          itemLimit={m.max_choices}\n          selectedItems={selectedTagsB()}\n          disabled={m.disabled}\n          onEmptyResolveSuggestions={onEmptyResolveSuggestions}\n        />\n      </div>\n    )\n\n  return { init, render, selectedTagsB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { F, S, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a progress bar.\n *\n * Progress bars are used to show the completion status of an operation lasting more than 2 seconds.\n * If the state of progress cannot be determined, do not set a value.\n * Progress bars feature a bar showing total units to completion, and total units finished.\n * The label appears above the bar, and the caption appears below.\n * The label should tell someone exactly what the operation is doing.\n *\n * Examples of formatting include:\n * [Object] is being [operation name], or\n * [Object] is being [operation name] to [destination name] or\n * [Object] is being [operation name] from [source name] to [destination name]\n *\n * Status text is generally in units elapsed and total units.\n * Real-world examples include copying files to a storage location, saving edits to a file, and more.\n * Use units that are informative and relevant to give the best idea to users of how long the operation will take to complete.\n * Avoid time units as they are rarely accurate enough to be trustworthy.\n * Also, combine steps of a complex operation into one total bar to avoid rewinding the bar.\n * Instead change the label to reflect the change if necessary. Bars moving backwards reduce confidence in the service.\n*/\nexport interface Progress {\n  /** The text displayed above the bar. */\n  label: S\n  /** The text displayed below the bar. */\n  caption?: S\n  /** The progress, between 0.0 and 1.0, or -1 (default) if indeterminate. */\n  value?: F\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const\n  XProgress = ({ model }: { model: Progress }) => {\n    const\n      { label, caption = 'Please wait...', value, visible, name } = model\n    return (\n      <div data-test={name} style={displayMixin(visible)}>\n        <Fluent.ProgressIndicator\n          label={label}\n          description={caption}\n          percentComplete={value}\n        />\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport * as Fluent from '@fluentui/react'\nimport { bond, box, S, qd, B, U, F } from './qd'\nimport InputRange, { Range } from 'react-input-range'\nimport 'react-input-range/lib/css/index.css'\nimport { stylesheet } from 'typestyle'\nimport { palette, padding, displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    container: {\n      padding: padding(0, 8),\n      $nest: {\n        '.input-range': {\n          marginTop: 15,\n          marginBottom: 35,\n          $nest: {\n            '&__slider': {\n              borderWidth: 2,\n              borderRadius: 10,\n              borderColor: palette.neutralPrimary,\n              background: palette.white,\n              width: 16,\n              height: 16,\n              boxSizing: 'border-box',\n              cursor: 'initial',\n              $nest: {\n                '&:active': {\n                  transform: 'none'\n                }\n              }\n            },\n            '&__label': {\n              fontFamily: 'inherit',\n              fontSize: 14,\n              fontWeight: 600\n            },\n            '&__label-container': {\n              color: palette.neutralPrimary\n            },\n            '&__track': {\n              height: 4,\n              borderRadius: 4,\n              background: palette.neutralTertiaryAlt,\n              cursor: 'initial',\n              $nest: {\n                '&--active': {\n                  background: palette.neutralSecondary,\n                },\n              }\n            }\n          }\n        },\n      }\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  })\n\n/**\n * Create a range slider.\n *\n * A range slider is an element used to select a value range. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * Knobs or levers are dragged to one end or the other to make the choice, indicating the current max and min value.\n *\n*/\nexport interface RangeSlider {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. Defaults to 0. */\n  min?: F\n  /** The maximum value of the slider. Defaults to 100. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The lower bound of the selected range. */\n  min_value?: F\n  /** The upper bound of the selected range. */\n  max_value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const XRangeSlider = bond(({ model: m }: { model: RangeSlider }) => {\n  const\n    { min = 0, max = 100, step = 1 } = m,\n    value = {\n      min: (m.min_value && m.min_value > min && m.min_value <= max) ? m.min_value : min,\n      max: (m.max_value && m.max_value > min && m.max_value <= max) ? m.max_value : max\n    }\n\n  qd.args[m.name] = Object.values(value as Range)\n\n  const\n    valueB = box<Range>(value),\n    onChange = (val: Range | U) => {\n      valueB(val as Range)\n      qd.args[m.name] = Object.values(val as Range)\n      if (m.trigger) qd.sync()\n    },\n    render = () => (\n      <div data-test={m.name} style={displayMixin(m.visible)}>\n        {m.label && <Fluent.Label disabled={m.disabled}>{m.label}</Fluent.Label>}\n        <div className={`${css.container} ${m.disabled ? css.disabled : ''}`}>\n          <InputRange maxValue={max} minValue={min} step={step} disabled={m.disabled} allowSameValues value={valueB()} onChange={onChange} />\n        </div>\n      </div>\n    )\n  return { render, valueB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { S, B } from './qd'\nimport { displayMixin } from './theme'\n\nconst\n  css = stylesheet({\n    separator: {\n      boxSizing: 'border-box',\n    },\n  })\n\n/**\n * Create a separator.\n *\n * A separator visually separates content into groups.\n */\nexport interface Separator {\n  /** The text displayed on the separator. */\n  label?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XSeparator = ({ model: m }: { model: Separator }) => (\n    <div data-test={m.name} className={css.separator} style={displayMixin(m.visible)}>\n      <Fluent.Separator>{m.label}</Fluent.Separator>\n    </div>\n  )","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a slider.\n *\n * A slider is an element used to set a value. It provides a visual indication of adjustable content, as well as the\n * current setting in the total range of content. It is displayed as a horizontal track with options on either side.\n * A knob or lever is dragged to one end or the other to make the choice, indicating the current value.\n * Marks on the slider bar can show values and users can choose where they want to drag the knob or lever to\n * set the value.\n *\n * A slider is a good choice when you know that users think of the value as a relative quantity, not a numeric value.\n * For example, users think about setting their audio volume to low or medium  not about setting the\n * value to two or five.\n *\n * The default value of the slider will be zero or be constrained to the min and max values. The min will be returned\n * if the value is set under the min and the max will be returned if set higher than the max value.\n*/\nexport interface Slider {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the slider. */\n  min?: F\n  /** The maximum value of the slider. */\n  max?: F\n  /** The difference between two adjacent values of the slider. */\n  step?: F\n  /** The current value of the slider. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the slider value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSlider = bond(({ model: m }: { model: Slider }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n    qd.args[m.name] = defaultValue\n    const\n      onChange = (v: number) => qd.args[m.name] = v,\n      onChanged = (_event: MouseEvent | KeyboardEvent | TouchEvent, _value: number) => { if (m.trigger) qd.sync() },\n      render = () => (\n        <Fluent.Slider\n          data-test={m.name}\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          buttonProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={defaultValue}\n          showValue={true}\n          originFromZero={min < 0 && max >= 0}\n          onChange={onChange}\n          onChanged={onChanged}\n          disabled={m.disabled}\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, F, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a spinbox.\n *\n * A spinbox allows the user to incrementally adjust a value in small steps.\n * It is mainly used for numeric values, but other values are supported too.\n */\nexport interface Spinbox {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** The minimum value of the spinbox. */\n  min?: F\n  /** The maximum value of the spinbox. */\n  max?: F\n  /** The difference between two adjacent values of the spinbox. */\n  step?: F\n  /** The current value of the spinbox. */\n  value?: F\n  /** True if this field is disabled. */\n  disabled?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XSpinbox = bond(({ model: m }: { model: Spinbox }) => {\n    const\n      { min = 0, max = 100, step = 1, value = 0 } = m,\n      defaultValue = (value < min) ? min : ((value > max) ? max : value)\n\n    qd.args[m.name] = defaultValue\n\n    const\n      parseValue = (v: string) => {\n        const x = parseFloat(v)\n        return (!isNaN(x) && isFinite(x)) ? x : value\n      },\n      onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n        qd.args[m.name] = parseValue(e.target.value)\n      },\n      onIncrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value + step > max) ? max : value + step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      onDecrement = (v: string) => {\n        const\n          value = parseValue(v),\n          newValue = (value - step < min) ? min : value - step\n        qd.args[m.name] = newValue\n        return String(newValue)\n      },\n      render = () => (\n        <Fluent.SpinButton\n          styles={{ root: displayMixin(m.visible) as Fluent.IStyle }}\n          inputProps={{ 'data-test': m.name } as any} // HACK: data-test does not work on root as of this version\n          label={m.label}\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={`${value}`}\n          onBlur={onBlur}\n          onIncrement={onIncrement}\n          onDecrement={onDecrement}\n          disabled={m.disabled}\n        />\n      )\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, Dict, S } from './qd'\nimport { clas, getTheme, padding } from './theme'\n\n/** Create a set of stats laid out horizontally. */\nexport interface Stats {\n  /** The individual stats to be displayed. */\n  items: Stat[]\n  /** Specifies how to lay out the individual stats. Defaults to 'start'. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Whether to display the stats with a contrasting background. */\n  inset?: B\n}\n\n/** Create a stat (a label-value pair) for displaying a metric. */\nexport interface Stat {\n  /** The label for the metric. */\n  label: S\n  /** The value of the metric. */\n  value?: S\n  /** The caption displayed below the primary value. */\n  caption?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    stats: {\n      display: 'flex',\n      alignItems: 'flex-start'\n    },\n    inset: {\n      background: theme.colors.page,\n      padding: padding(10, 15),\n    },\n    stat: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    lhs: {\n      width: '45px',\n      marginRight: '0.5em',\n    },\n    icon: {\n      fontSize: '45px',\n    },\n    statLabel: {\n      ...theme.font.s12,\n      ...theme.font.w5,\n    },\n    statValue: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    statCaption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    }\n  }),\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  statMargin = '2em'\n\n\nexport const\n  XStats = ({ model: m }: { model: Stats }) => {\n    const\n      statStyle: React.CSSProperties = m.justify\n        ? m.justify === 'start'\n          ? { marginRight: statMargin }\n          : m.justify === 'end'\n            ? { marginLeft: statMargin }\n            : {}\n        : { marginRight: statMargin },\n      justification = justifications[m.justify ?? ''],\n      stats = m.items.map(({ label, value, caption, icon, icon_color }, i) => (\n        <div key={`${i}:${label}`} className={css.stat} style={statStyle}>\n          { icon && (\n            <div className={css.lhs} style={icon_color ? { color: theme.color(icon_color) } : undefined}>\n              <FontIcon className={css.icon} iconName={icon} />\n            </div>\n          )}\n          <div>\n            <div className={css.statLabel}>{label}</div>\n            {value && <div className={css.statValue}>{value}</div>}\n            {caption && <div className={css.statCaption}>{caption}</div>}\n          </div>\n        </div>\n      ))\n\n    return (\n      <div className={clas(css.stats, m.inset ? css.inset : '')} style={{ justifyContent: justification }}>{stats}</div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { bond, S, B, U } from './qd'\nimport { stylesheet } from 'typestyle'\nimport { getTheme, rem, displayMixin } from './theme'\n\n/**\n * Create a step for a stepper.\n */\ninterface Step {\n  /** Text displayed below icon. */\n  label: S\n  /** Icon to be displayed. */\n  icon?: S\n  /** Indicates whether this step has already been completed. */\n  done?: B\n}\n\n/**\n  Create a component that displays a sequence of steps in a process.\n  The steps keep users informed about where they are in the process and how much is left to complete.\n*/\nexport interface Stepper {\n  /** An identifying name for this component. */\n  name: S\n  /** The sequence of steps to be displayed. */\n  items: Step[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst\n  { colors } = getTheme(),\n  css = stylesheet({\n    stepNumber: {\n      background: colors.text,\n      color: colors.card,\n      alignItems: 'center',\n      borderRadius: '50%',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      fontSize: rem(0.8),\n      height: 24,\n      minWidth: 24,\n      width: 24,\n    },\n    disabled: {\n      opacity: 0.5\n    }\n  }),\n  iconStyles: Fluent.IIconStyles = { root: { fontSize: 24 } }\n\nexport const\n  XStepper = bond(({ model: m }: { model: Stepper }) => {\n    const\n      steps = m.items,\n      disabledStyles = (stepIdx: U) => stepIdx > 0 && !steps[stepIdx - 1].done ? css.disabled : '',\n      createStep = (step: Step, i: U) => (\n        <React.Fragment key={i}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' verticalAlign='center' grow={1}>\n            <Fluent.Stack\n              className={!step.done ? disabledStyles(i) : ''}\n              horizontalAlign='center'\n              styles={{ root: { paddingRight: 10, paddingLeft: 10 } }}\n            >\n              {\n                step.done\n                  ? <Fluent.Icon styles={iconStyles} iconName='CompletedSolid' />\n                  : step.icon\n                    ? <Fluent.Icon styles={iconStyles} iconName={step.icon} />\n                    : <span className={css.stepNumber}>{i + 1}</span>\n              }\n              <Fluent.Text block nowrap styles={{ root: { padding: 10 } }}>{step.label}</Fluent.Text>\n            </Fluent.Stack>\n          </Fluent.Stack>\n          {(steps.length - 1) !== i && <Fluent.Separator styles={{ root: { width: '100%' } }} />}\n        </React.Fragment>\n      ),\n      render = () => (\n        <Fluent.Stack\n          style={displayMixin(m.visible)}\n          data-test={m.name}\n          horizontal\n          horizontalAlign='space-between'\n          verticalAlign='center'\n        >\n          {steps.map(createStep)}\n        </Fluent.Stack>\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S, U } from '../qd'\n\n\ninterface Props {\n  thickness: U\n  color: S\n  value: F\n}\n\nconst css = stylesheet({\n  container: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n  }\n})\n\nexport const ProgressArc = ({ thickness, color, value }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement>(null),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        diameter = Math.min(width, height),\n        outerRadius = diameter / 2,\n        innerRadius = diameter / 2 - thickness,\n        slot = d3.arc()({\n          outerRadius,\n          innerRadius,\n          startAngle: 0,\n          endAngle: 2 * Math.PI,\n        }),\n        bar = d3.arc()({\n          outerRadius,\n          innerRadius,\n          startAngle: 0,\n          endAngle: 2 * Math.PI * value,\n        })\n\n      setContent(\n        <svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>\n          <g transform={diameter === height ? `translate(${(width - (2 * outerRadius)) / 2}, 0)` : `translate(0, ${(height - (2 * outerRadius)) / 2})`}>\n            <path d={slot as S} fill={color} fillOpacity={0.15} transform={`translate(${outerRadius},${outerRadius})`} />\n            <path d={bar as S} fill={color} transform={`translate(${outerRadius},${outerRadius})`} />\n          </g>\n        </svg>\n      )\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [thickness, color, value])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { ProgressArc } from './parts/progress_arc'\nimport { F, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    container: {\n      position: 'relative',\n      width: 50,\n      height: 50\n    },\n    percentContainer: {\n      position: 'absolute',\n      top: 0, left: 0, bottom: 0, right: 0\n    },\n    percent: {\n      ...theme.font.s12,\n      opacity: 0.5,\n    },\n  })\n\n/**\n * Create a cell type that renders a column's cells as progress bars instead of plain text.\n * If set on a column, the cell value must be between 0.0 and 1.0.\n*/\nexport interface ProgressTableCellType {\n  /** Color of the progress arc. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XProgressTableCellType = ({ model: m, progress }: { model: ProgressTableCellType, progress: F }) => (\n  <div data-test={m.name} className={css.container}>\n    <ProgressArc thickness={2} color={theme.color(m.color || 'red')} value={progress} />\n    <Fluent.Stack horizontalAlign='center' verticalAlign='center' className={css.percentContainer}>\n      <div className={css.percent}>{`${Math.round(progress * 100)}%`}</div>\n    </Fluent.Stack>\n  </div>\n)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { S } from './qd'\n\n/**\n * Create a cell type that renders a column's cells as icons instead of plain text.\n * If set on a column, the cell value is interpreted as the name of the icon to be displayed.\n*/\nexport interface IconTableCellType {\n  /** Icon color. */\n  color?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nexport const XIconTableCellType = ({ model: m, icon }: { model: IconTableCellType, icon: S }) => (\n  <Fluent.Icon data-test={m.name} iconName={icon} styles={{ root: { fontSize: '1.2rem', color: m.color || 'inherit' } }} />\n)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd, box, Dict, U } from './qd'\nimport { stylesheet } from 'typestyle'\nimport { rem, displayMixin } from './theme'\nimport { ProgressTableCellType, XProgressTableCellType } from \"./progress_table_cell_type\"\nimport { IconTableCellType, XIconTableCellType } from \"./icon_table_cell_type\"\n\n/** Defines cell content to be rendered instead of a simple text. */\ninterface TableCellType {\n  progress?: ProgressTableCellType\n  icon?: IconTableCellType\n}\n\n/** Create a table column. */\ninterface TableColumn {\n  /** An identifying name for this column. */\n  name: S\n  /** The text displayed on the column header. */\n  label: S\n  /** The minimum width of this column, e.g. '50px'. Only `px` units are supported at this time. */\n  min_width?: S\n  /** The maximum width of this column, e.g. '100px'. Only `px` units are supported at this time. */\n  max_width?: S\n  /** Indicates whether the column is sortable. */\n  sortable?: B\n  /** Indicates whether the contents of this column can be searched through. Enables a search box for the table if true. */\n  searchable?: B\n  /** Indicates whether the contents of this column are displayed as filters in a dropdown. */\n  filterable?: B\n  /** Indicates whether each cell in this column should be displayed as a clickable link. */\n  link?: B\n  /** Defines the data type of this column. Defaults to `string`. */\n  data_type?: 'string' | 'number' | 'time'\n  /** Defines how to render each cell in this column. Defaults to plain text. */\n  cell_type?: TableCellType\n}\n\n/** Create a table row. */\ninterface TableRow {\n  /** An identifying name for this row. */\n  name: S\n  /** The cells in this row (displayed left to right). */\n  cells: S[]\n}\n\n\n/**\n * Create an interactive table.\n *\n * This table differs from a markdown table in that it supports clicking or selecting rows. If you simply want to\n * display a non-interactive table of information, use a markdown table.\n *\n * If `multiple` is set to False (default), each row in the table is clickable. When a row is clicked, the form is\n * submitted automatically, and `q.args.table_name` is set to `[row_name]`, where `table_name` is the `name` of\n * the table, and `row_name` is the `name` of the row that was clicked on.\n *\n * If `multiple` is set to True, each row in the table is selectable. A row can be selected by clicking on it.\n * Multiple rows can be selected either by shift+clicking or using marquee selection. When the form is submitted,\n * `q.args.table_name` is set to `[row1_name, row2_name, ...]` where `table_name` is the `name` of the table,\n * and `row1_name`, `row2_name` are the `name` of the rows that were selected. Note that if `multiple` is\n * set to True, the form is not submitted automatically, and one or more buttons are required in the form to trigger\n * submission.\n */\nexport interface Table {\n  /** An identifying name for this component. */\n  name: S\n  /** The columns in this table. */\n  columns: TableColumn[]\n  /** The rows in this table. */\n  rows: TableRow[]\n  /** True to allow multiple rows to be selected. */\n  multiple?: B\n  /** True to allow group by feature. */\n  groupable?: B\n  /** Indicates whether the contents of this table can be downloaded and saved as a CSV file. Defaults to False. */\n  downloadable?: B\n  /** Indicates whether a Reset button should be displayed to reset search / filter / group-by values to their defaults. Defaults to False. */\n  resettable?: B\n  /** The height of the table, e.g. '400px', '50%', etc. */\n  height?: S\n  /** The names of the selected rows. If this parameter is set, multiple selections will be allowed (`multiple` is assumed to be `True`). */\n  values?: S[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\ntype QColumn = Fluent.IColumn & {\n  dataType?: S\n  cellType?: TableCellType\n  isSortable?: B\n}\n\nconst\n  css = stylesheet({\n    // HACK: Put sorting icon on right (same as filter).\n    sortableHeader: {\n      $nest: {\n        '.ms-DetailsHeader-cellName': {\n          position: 'relative',\n          paddingRight: 15\n        }\n      }\n    },\n    sortingIcon: {\n      marginLeft: 10,\n      fontSize: rem(1.1),\n      position: 'absolute',\n      top: -2,\n      right: -5\n    },\n    // HACK: incorrect width recalculated after changing to \"group by mode\" - collapse icon in header\n    // causes horizontal overflow for whole table.\n    hideCellGroupCollapse: {\n      $nest: {\n        'div[class*=\"cellIsGroupExpander\"]': {\n          display: 'none'\n        }\n      }\n    }\n  }),\n  groupByF = function <T extends Dict<any>>(arr: T[], key: S): Dict<any> {\n    return arr.reduce((rv, x: T) => {\n      (rv[x[key]] = rv[x[key]] || []).push(x)\n      return rv\n    }, {} as Dict<any>)\n  },\n  sortingF = (column: QColumn, sortAsc: B) => (rowA: any, rowB: any) => {\n    let a = rowA[column.key], b = rowB[column.key]\n\n    switch (column.dataType) {\n      case 'number':\n        a = +a\n        b = +b\n        return sortAsc ? a - b : b - a\n      case 'time':\n        a = Date.parse(a)\n        b = Date.parse(b)\n        break\n      default:\n        a = a.toLowerCase()\n        b = b.toLowerCase()\n        break\n    }\n\n    return sortAsc\n      ? b > a ? -1 : 1\n      : b > a ? 1 : -1\n  },\n  formatNum = (num: U) => num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"),\n  toCSV = (data: unknown[][]): S => data.map(row => {\n    const line = JSON.stringify(row)\n    return line.substr(1, line.length - 2)\n  }).join('\\n')\n\n\nexport const\n  XTable = bond(({ model: m }: { model: Table }) => {\n    qd.args[m.name] = []\n    const\n      items = m.rows.map(r => {\n        const item: Fluent.IObjectWithKey & Dict<any> = { key: r.name }\n        for (let i = 0, n = r.cells.length; i < n; i++) {\n          const col = m.columns[i]\n          item[col.name] = r.cells[i]\n        }\n        return item\n      }),\n      isMultiple = m.values?.length || m.multiple,\n      filteredItemsB = box(items),\n      searchableKeys = m.columns.filter(({ searchable }) => searchable).map(({ name }) => name),\n      searchStrB = box(''),\n      selectedFiltersB = box<Dict<S[]> | null>(null),\n      colContextMenuListB = box<Fluent.IContextualMenuProps | null>(null),\n      groupsB = box<Fluent.IGroup[] | undefined>(undefined),\n      groupByKeyB = box('*'),\n      groupByOptions: Fluent.IDropdownOption[] = m.groupable ? [{ key: '*', text: '(No Grouping)' }, ...m.columns.map(col => ({ key: col.name, text: col.label }))] : [],\n      onSearchChange = (_e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, searchStr?: S) => {\n        searchStrB(searchStr || '')\n\n        if (!searchStr && !selectedFiltersB()) {\n          filteredItemsB(items)\n          if (groupsB()) initGroups()\n          return\n        }\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      search = () => {\n        const searchStr = searchStrB().toLowerCase()\n        if (!searchStr || !searchableKeys.length) return\n\n        filteredItemsB(filteredItemsB().filter(i => searchableKeys.some(key => (i[key] as S).toLowerCase().includes(searchStr))))\n      },\n      onFilterChange = (filterKey: S, filterVal: S) => (_e?: React.FormEvent<HTMLInputElement | HTMLElement>, checked?: B) => {\n        const filters = selectedFiltersB() || {}\n\n        if (checked) {\n          if (filters[filterKey]) filters[filterKey].push(filterVal)\n          else filters[filterKey] = [filterVal]\n        }\n        else filters[filterKey] = filters[filterKey].filter(f => f !== filterVal)\n        selectedFiltersB(Object.values(filters).every(v => !v.length) ? null : { ...filters })\n\n        filter()\n        search()\n        if (groupsB()) initGroups()\n      },\n      // TODO: Make filter options in dropdowns dynamic.\n      filter = () => {\n        const selectedFilters = selectedFiltersB()\n\n        // If we have filters, check if any of the data-item's props (filter's keys) equals to any of its filter values.\n        const filteredItems = selectedFilters\n          ? items.filter(i => Object.keys(selectedFilters)\n            .every(filterKey => !selectedFilters[filterKey].length || selectedFilters[filterKey]\n              .some(filterVal => i[filterKey] === filterVal)\n            )\n          )\n          : items\n\n        filteredItemsB(filteredItems)\n      },\n      reset = () => {\n        selectedFiltersB(null)\n        searchStrB('')\n\n        groupsB(undefined)\n        groupByKeyB('*')\n\n        filter()\n        search()\n      },\n      sort = (column: QColumn) => {\n        const sortAsc = column.iconName === 'SortDown'\n        column.iconName = sortAsc ? 'SortUp' : 'SortDown'\n\n        if (groupsB()) {\n          filteredItemsB(groupsB()?.reduce((acc, group) =>\n            [...acc, ...filteredItemsB().slice(group.startIndex, acc.length + group.count).sort(sortingF(column, sortAsc))],\n            [] as any[]) || [])\n        }\n        else filteredItemsB([...filteredItemsB()].sort(sortingF(column, sortAsc)))\n\n        columnsB(columnsB().map((col) => column.key === col.key ? column : col))\n      },\n      download = () => {\n        // TODO: Prompt a dialog for name, encoding, etc.\n        const\n          data = toCSV([m.columns.map(({ label, name }) => label || name), ...m.rows.map(({ cells }) => cells)]),\n          a = document.createElement('a'),\n          blob = new Blob([data], { type: \"octet/stream\" }),\n          url = window.URL.createObjectURL(blob)\n\n        a.href = url\n        a.download = 'exported_data.csv'\n        a.click()\n\n        window.URL.revokeObjectURL(url)\n      },\n      onRenderMenuList = (props?: Fluent.IContextualMenuListProps) => {\n        if (!props) return null\n\n        return (\n          <div style={{ padding: 10 }}>\n            <Fluent.Text variant='mediumPlus' styles={{ root: { paddingTop: 10, paddingBottom: 10, fontWeight: 'bold' } }} block>Show only</Fluent.Text>\n            {\n              props.items.map(({ key, name, data }) => {\n                const selectedFilters = selectedFiltersB()\n                const checked = !!name && !!selectedFilters && selectedFilters[data] && selectedFilters[data].includes(name)\n                return (\n                  <Fluent.Checkbox\n                    key={key}\n                    label={name}\n                    defaultChecked={checked}\n                    onChange={onFilterChange(data || '', name || '')}\n                    styles={{ root: { marginBottom: 5 } }}\n                  />\n                )\n              })\n            }\n          </div>\n        )\n      },\n      onDismissContextMenu = () => colContextMenuListB(null),\n      onColumnContextMenu = (col: Fluent.IColumn, e: React.MouseEvent<HTMLElement>) => {\n        colContextMenuListB({\n          items: Array.from(new Set(items.map(i => i[col.fieldName || col.key])))\n            .map(option => ({ key: option, name: option, data: col.fieldName || col.key })),\n          target: e.target as HTMLElement,\n          directionalHint: Fluent.DirectionalHint.bottomLeftEdge,\n          gapSpace: 10,\n          isBeakVisible: true,\n          onRenderMenuList,\n          onDismiss: onDismissContextMenu,\n        })\n      },\n      makeGroups = () => {\n        let prevSum = 0\n        const groupedBy = groupByF(filteredItemsB(), groupByKeyB())\n        const groupedByKeys = Object.keys(groupedBy)\n        const groups: Fluent.IGroup[] = groupedByKeys.map((key, i) => {\n          if (i !== 0) {\n            const prevKey = groupedByKeys[i - 1]\n            prevSum += groupedBy[prevKey].length\n          }\n          return { key, name: key, startIndex: prevSum, count: groupedBy[key].length, isCollapsed: true }\n        })\n\n        return { groupedBy, groups }\n      },\n      initGroups = () => {\n        const { groupedBy, groups } = makeGroups()\n        filteredItemsB(Object.values(groupedBy).flatMap(arr => arr))\n        groupsB(groups)\n      },\n      onGroupByChange = (_e: React.FormEvent<HTMLDivElement>, option?: Fluent.IDropdownOption) => {\n        if (!option) return\n        if (option.key === '*') {\n          reset()\n          return\n        }\n\n        reset()\n        groupByKeyB(option.key as S)\n        initGroups()\n      },\n      onRenderDetailsHeader = (props?: Fluent.IDetailsHeaderProps) => {\n        if (!props) return <span />\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Header} isScrollSynced>\n            <Fluent.DetailsHeader {...props} onColumnContextMenu={onColumnContextMenu} className={groupsB() ? css.hideCellGroupCollapse : ''} />\n          </Fluent.Sticky>\n        )\n      },\n\n      onRenderDetailsFooter = (props?: Fluent.IDetailsFooterProps) => {\n        const searchOrFilter = searchableKeys.length || m.columns.some(c => c.filterable)\n        if (!props || (!m.downloadable && !m.resettable && !searchOrFilter)) return null\n\n        const footerItems: Fluent.ICommandBarItemProps[] = []\n        if (m.downloadable) footerItems.push({ key: 'download', text: 'Download data', iconProps: { iconName: 'Download' }, onClick: download })\n        if (m.resettable) footerItems.push({ key: 'reset', text: 'Reset table', iconProps: { iconName: 'Refresh' }, onClick: reset })\n\n        return (\n          <Fluent.Sticky stickyPosition={Fluent.StickyPositionType.Footer} isScrollSynced>\n            <Fluent.Stack horizontal horizontalAlign={searchOrFilter ? 'space-between' : 'end'} verticalAlign='center'>\n              {\n                searchOrFilter && (\n                  <Fluent.Text variant='smallPlus' block >Rows:\n                    <b style={{ paddingLeft: 5 }}>{formatNum(filteredItemsB().length)} of {formatNum(items.length)}</b>\n                  </Fluent.Text>\n                )\n              }\n              <Fluent.CommandBar items={footerItems} />\n            </Fluent.Stack>\n          </Fluent.Sticky>\n        )\n      },\n      onRenderRow = (props?: Fluent.IDetailsRowProps) => {\n        if (!props) return <span />\n\n        return <Fluent.DetailsRow {...props} styles={{ cell: { alignSelf: 'center' }, root: { width: '100%' } }} />\n      },\n      onColumnClick = (e: React.MouseEvent<HTMLElement>, column: QColumn) => {\n        const isMenuClicked = (e.target as HTMLElement).getAttribute('data-icon-name') === 'ChevronDown'\n\n        if (isMenuClicked) onColumnContextMenu(column, e)\n        else if (column.isSortable) sort(column)\n      },\n      columnsB = box(m.columns.map((c): QColumn => {\n        const\n          minWidth = c.min_width\n            ? c.min_width.endsWith('px')\n              ? +c.min_width.substring(0, c.min_width.length - 2)\n              : +c.min_width\n            : 150,\n          maxWidth = c.max_width\n            ? c.max_width.endsWith('px')\n              ? +c.max_width.substring(0, c.max_width.length - 2)\n              : +c.max_width\n            : undefined\n        return {\n          key: c.name,\n          name: c.label,\n          fieldName: c.name,\n          minWidth,\n          maxWidth,\n          headerClassName: c.sortable ? css.sortableHeader : undefined,\n          iconClassName: c.sortable ? css.sortingIcon : undefined,\n          iconName: c.sortable ? 'SortDown' : undefined,\n          onColumnClick,\n          columnActionsMode: c.filterable ? Fluent.ColumnActionsMode.hasDropdown : Fluent.ColumnActionsMode.clickable,\n          cellType: c.cell_type,\n          dataType: c.data_type,\n          isSortable: c.sortable,\n          isResizable: true,\n        }\n      })),\n      primaryColumnKey = m.columns.find(c => c.link)?.name || (m.columns[0].link === false ? undefined : m.columns[0].name),\n      selection = new Fluent.Selection({\n        onSelectionChanged: () => {\n          qd.args[m.name] = selection.getSelection().map(item => item.key as S)\n        }\n      }),\n      init = () => {\n        if (isMultiple && m.values) {\n          m.values.forEach(v => selection.setKeySelected(v, true, false))\n          qd.args[m.name] = m.values\n        }\n      },\n      onItemInvoked = (item: Fluent.IObjectWithKey & Dict<any>) => {\n        qd.args[m.name] = [item.key as S]\n        qd.sync()\n      },\n      onRenderItemColumn = (item?: Fluent.IObjectWithKey & Dict<any>, _index?: number, col?: QColumn) => {\n        if (!item || !col) return <span />\n\n        const v = item[col.fieldName as S]\n        if (col.key === primaryColumnKey && !isMultiple) {\n          const onClick = () => {\n            qd.args[m.name] = [item.key as S]\n            qd.sync()\n          }\n          return <Fluent.Link onClick={onClick}>{v}</Fluent.Link>\n        }\n\n        if (col.cellType?.progress) return <XProgressTableCellType model={col.cellType.progress} progress={item[col.key]} />\n        if (col.cellType?.icon) return <XIconTableCellType model={col.cellType.icon} icon={item[col.key]} />\n        if (col.dataType === 'time') return <span>{new Date(v).toLocaleString()}</span>\n\n        return <span>{v}</span>\n      },\n      computeHeight = () => {\n        if (m.height) return m.height\n        if (items.length > 10) return 500\n\n        const\n          topToolbarHeight = searchableKeys.length || m.groupable ? 60 : 0,\n          headerHeight = 60,\n          rowHeight = m.columns.some(c => c.cell_type)\n            ? m.columns.some(c => c.cell_type?.progress) ? 68 : 50\n            : 43,\n          footerHeight = m.downloadable || m.resettable || searchableKeys.length ? 44 : 0\n\n        return topToolbarHeight + headerHeight + (items.length * rowHeight) + footerHeight\n      },\n      DataTable = () => (\n        <>\n          <Fluent.DetailsList\n            items={filteredItemsB()}\n            columns={columnsB()}\n            constrainMode={Fluent.ConstrainMode.unconstrained}\n            layoutMode={Fluent.DetailsListLayoutMode.fixedColumns}\n            groups={groupsB()}\n            selection={selection}\n            selectionMode={isMultiple ? Fluent.SelectionMode.multiple : Fluent.SelectionMode.none}\n            selectionPreservedOnEmptyClick\n            onItemInvoked={isMultiple ? undefined : onItemInvoked}\n            onRenderRow={onRenderRow}\n            onRenderItemColumn={onRenderItemColumn}\n            onRenderDetailsHeader={onRenderDetailsHeader}\n            onRenderDetailsFooter={onRenderDetailsFooter}\n          />\n          {colContextMenuListB() && <Fluent.ContextualMenu {...(colContextMenuListB() as Fluent.IContextualMenuProps)} />}\n        </>\n      ),\n      render = () => (\n        <div data-test={m.name} style={{ position: 'relative', height: computeHeight(), ...displayMixin(m.visible) }}>\n          <Fluent.Stack horizontal horizontalAlign='space-between' >\n            {m.groupable && <Fluent.Dropdown data-test='groupby' label='Group by' selectedKey={groupByKeyB()} onChange={onGroupByChange} options={groupByOptions} styles={{ root: { width: 300 } }} />}\n            {!!searchableKeys.length && <Fluent.TextField data-test='search' label='Search' onChange={onSearchChange} value={searchStrB()} styles={{ root: { width: '50%' } }} />}\n          </Fluent.Stack>\n          <Fluent.ScrollablePane scrollbarVisibility={Fluent.ScrollbarVisibility.auto} styles={{ root: { top: m.groupable || searchableKeys.length ? 60 : 0 } }}>\n            {\n              isMultiple\n                ? <Fluent.MarqueeSelection selection={selection}><DataTable /></Fluent.MarqueeSelection>\n                : <DataTable />\n            }\n          </Fluent.ScrollablePane>\n        </div>\n      )\n    return { init, render, columnsB, filteredItemsB, selectedFiltersB, searchStrB, colContextMenuListB, groupsB, groupByKeyB }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { bond, S, qd, B } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a tab.\n */\nexport interface Tab {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed on the tab. */\n  label?: S\n  /** The icon displayed on the tab. */\n  icon?: S\n}\n\n/**\n * Create a tab bar.\n */\nexport interface Tabs {\n  /** An identifying name for this component. */\n  name: S\n  /** The name of the tab to select. */\n  value?: S\n  /** The tabs in this tab bar. */\n  items?: Tab[]\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** True if tabs should be rendered as links instead of buttons. */\n  link?: B\n}\n\nconst\n  css = stylesheet({\n    pivot: {\n      // Actual height of the Fluent pivot is 44.\n      // When used standalone in a flex layout, scrollbars show up when attempting to fit to content height.\n      // So explicitly set a height to work around this issue.\n      minHeight: 46,\n    }\n  })\n\nexport const\n  XTabs = bond(({ model: m }: { model: Tabs }) => {\n    const\n      onLinkClick = (item?: Fluent.PivotItem) => {\n        const name = item?.props.itemKey\n        if (!name) return\n        if (name.startsWith('#')) {\n          window.location.hash = name.substr(1)\n          return\n        }\n        if (m.name) {\n          if (name !== qd.args[m.name]) {\n            qd.args[m.name] = name\n            qd.sync()\n          }\n        } else {\n          qd.args[name] = true\n          qd.sync()\n        }\n      },\n      render = () => {\n        const tabs = m.items?.map(t => (\n          <Fluent.PivotItem\n            key={t.name}\n            itemIcon={t.icon}\n            itemKey={t.name}\n            headerText={t.label} />\n        ))\n        return (\n          <div className={css.pivot}>\n            <Fluent.Pivot\n              data-test={m.name}\n              style={displayMixin(m.visible)}\n              selectedKey={m.value ?? null}\n              linkFormat={m.link ? Fluent.PivotLinkFormat.links : Fluent.PivotLinkFormat.tabs}\n              onLinkClick={onLinkClick}>{tabs}</Fluent.Pivot>\n          </div>\n        )\n      }\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport Handlebars from 'handlebars'\nimport React from 'react'\nimport { cards, substitute } from './layout'\nimport { MarkupCard, XMarkup } from './markup'\nimport { bond, Card, Rec, S, unpack, B } from './qd'\n\n/** Render dynamic content using an HTML template.*/\nexport interface Template {\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template */\n  data?: Rec\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\n/** Render dynamic content using an HTML template.*/\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The Handlebars template. https://handlebarsjs.com/guide/ */\n  content: S\n  /** Data for the Handlebars template. */\n  data?: Rec\n}\n\nexport const\n  XTemplate = bond(({ model: m }: { model: Template }) => {\n    const\n      template = Handlebars.compile(m.content || ''),\n      render = () => {\n        const data = unpack(m.data)\n        return <div data-test={m.name}><XMarkup model={{ content: template(data || {}), visible: m.visible }} /></div>\n      }\n    return { render }\n  }),\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      template = Handlebars.compile(state.content || ''),\n      render = () => {\n        const data = unpack(state.data)\n        return <MarkupCard name={name} title={substitute(state.title, data)} content={template(data || {})} />\n      }\n    return { render, changed }\n  })\n\ncards.register('template', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardMenu } from './card_menu'\nimport { Markdown } from './markdown'\nimport { B, Dict, S } from './qd'\nimport { displayMixin, margin } from './theme'\nimport { Command } from './toolbar'\n\n/** Create text content. */\nexport interface Text {\n  /** The text content. */\n  content: S\n  /** The font size of the text content. */\n  size?: 'xl' | 'l' | 'm' | 's' | 'xs'\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-large sized text content. */\nexport interface TextXl {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create large sized text content. */\nexport interface TextL {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** Contextual menu commands for this component. */\n  commands?: Command[]\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create medium sized text content. */\nexport interface TextM {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create small sized text content. */\nexport interface TextS {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\n/** Create extra-small sized text content. */\nexport interface TextXs {\n  /** The text content. */\n  content: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** Tooltip message. */\n  tooltip?: S\n  /** An identifying name for this component. */\n  name?: S\n}\n\nconst\n  css = stylesheet({\n    text: {\n      position: 'relative',\n      $nest: {\n        p: {\n          // Override default 1em margin inside markdown paragraphs.\n          margin: margin(0, 0, 10, 0),\n        }\n      },\n    },\n  }),\n  textVariants: Dict<keyof Fluent.IFontStyles> = {\n    xl: 'xLarge',\n    l: 'large',\n    m: 'medium',\n    s: 'small',\n    xs: 'xSmall',\n  },\n  toTextVariant = (s: S) => textVariants[s] || 'mediumPlus'\n\nexport const\n  XText = ({ content, name, size, commands, visibility = true }: { content: S, name?: S, size?: S, commands?: Command[], visibility?: B }) => {\n    const menuName = name ? `${name}-menu` : name\n    return (\n      <div className={css.text} style={displayMixin(visibility)}>\n        <Fluent.Text data-test={name} variant={toTextVariant(size || 'm')} block>\n          <Markdown source={content} />\n        </Fluent.Text>\n        {!!commands?.length && <CardMenu name={menuName} commands={commands} />}\n      </div>\n    )\n  }","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, debounce, qd, S } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a text box.\n *\n * The text box component enables a user to type text into an app.\n * It's typically used to capture a single line of text, but can be configured to capture multiple lines of text.\n * The text displays on the screen in a simple, uniform format.\n*/\nexport interface Textbox {\n  /** An identifying name for this component. */\n  name: S\n  /** The text displayed above the field. */\n  label?: S\n  /** A string that provides a brief hint to the user as to what kind of information is expected in the field. It should be a word or short phrase that demonstrates the expected type of data, rather than an explanatory message. */\n  placeholder?: S\n  /** Text to be displayed inside the text box. */\n  value?: S\n  /** The masking string that defines the mask's behavior. A backslash will escape any character. Special format characters are: '9': [0-9] 'a': [a-zA-Z] '*': [a-zA-Z0-9].*/\n  mask?: S\n  /** Icon displayed in the far right end of the text field. */\n  icon?: S\n  /** Text to be displayed before the text box contents. */\n  prefix?: S\n  /** Text to be displayed after the text box contents. */\n  suffix?: S\n  /** Text to be displayed as an error below the text box. */\n  error?: S\n  /** True if the text box is a required field. */\n  required?: B\n  /** True if the text box is disabled. */\n  disabled?: B\n  /** True if the text box is a read-only field. */\n  readonly?: B\n  /** True if the text box should allow multi-line text entry. */\n  multiline?: B\n  /** True if the text box should hide text content. */\n  password?: B\n  /** True if the form should be submitted when the text value changes. */\n  trigger?: B\n  /** The height of the text box, e.g. '100px'. Applicable only if `multiline` is true. */\n  height?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nconst DEBOUNCE_TIMEOUT = 500\nexport const\n  XTextbox = bond(({ model: m }: { model: Textbox }) => {\n    qd.args[m.name] = m.value || ''\n    const\n      onChange = ({ target }: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, v?: string) => {\n        v = v || (target as HTMLInputElement).value\n\n        qd.args[m.name] = v ?? (m.value || '')\n        if (m.trigger) qd.sync()\n      },\n      render = () => m.mask\n        ? (\n          <Fluent.MaskedTextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            label={m.label}\n            defaultValue={m.value}\n            mask={m.mask}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n        : (\n          <Fluent.TextField\n            data-test={m.name}\n            style={displayMixin(m.visible)}\n            styles={m.multiline && m.height ? { fieldGroup: { height: m.height } } : undefined}\n            label={m.label}\n            placeholder={m.placeholder}\n            iconProps={{ iconName: m.icon }}\n            prefix={m.prefix}\n            suffix={m.suffix}\n            defaultValue={m.value}\n            errorMessage={m.error}\n            required={m.required}\n            disabled={m.disabled}\n            readOnly={m.readonly}\n            multiline={m.multiline}\n            type={m.password ? 'password' : undefined}\n            onChange={m.trigger ? debounce(DEBOUNCE_TIMEOUT, onChange) : onChange}\n          />\n        )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { B, bond, S, qd } from './qd'\nimport { displayMixin } from './theme'\n\n/**\n * Create a toggle.\n * Toggles represent a physical switch that allows users to turn things on or off.\n * Use toggles to present users with two mutually exclusive options (like on/off), where choosing an option results\n * in an immediate action.\n *\n * Use a toggle for binary operations that take effect right after the user flips the Toggle.\n * For example, use a Toggle to turn services or hardware components on or off.\n * In other words, if a physical switch would work for the action, a Toggle is probably the best component to use.\n */\nexport interface Toggle {\n  /** An identifying name for this component. */\n  name: S\n  /** Text to be displayed alongside the component. */\n  label?: S\n  /** True if selected, False if unselected. */\n  value?: B\n  /** True if the checkbox is disabled. */\n  disabled?: B\n  /** True if the form should be submitted when the toggle value changes. */\n  trigger?: B\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n  /** An optional tooltip message displayed when a user clicks the help icon to the right of the component. */\n  tooltip?: S\n}\n\nexport const\n  XToggle = bond(({ model: m }: { model: Toggle }) => {\n    qd.args[m.name] = !!m.value\n    const\n      onChange = (_e?: React.FormEvent<HTMLElement>, checked?: boolean) => {\n        qd.args[m.name] = !!checked\n        if (m.trigger) qd.sync()\n      },\n      render = () => (\n        <Fluent.Toggle\n          data-test={m.name}\n          style={displayMixin(m.visible)}\n          label={m.label}\n          defaultChecked={m.value}\n          onChange={onChange}\n          disabled={m.disabled}\n          onText=\"On\"\n          offText=\"Off\"\n          inlineLabel\n        />\n      )\n\n    return { render }\n  })","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport vegaEmbed from 'vega-embed'\nimport { cards, grid } from './layout'\nimport { B, bond, Card, Rec, S, unpack, xid, debounce } from './qd'\nimport { displayMixin, getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      display: 'flex',\n    },\n    plot: {\n      $nest: {\n        'canvas': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }\n      }\n    }\n  })\n\n/** Create a Vega-lite plot for display inside a form. */\nexport interface VegaVisualization {\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n  /** The width of the visualization. Defaults to 100%. */\n  width?: S\n  /** The height of the visualization. Defaults to 300px. */\n  height?: S\n  /** An identifying name for this component. */\n  name?: S\n  /** True if the component should be visible. Defaults to true. */\n  visible?: B\n}\n\nexport const\n  XVegaVisualization = bond(({ model: state }: { model: VegaVisualization }) => {\n    const\n      ref = React.createRef<HTMLDivElement>(),\n      init = () => {\n        const el = ref.current\n        if (!el) return\n        // If card does not have specified height, it uses content. Since the wrapper is empty, it takes very little space - set to 300px by default.\n        if (el.clientHeight < 30) el.style.height = '300px'\n        const\n          spec = JSON.parse(state.specification),\n          data = unpack<any[]>(state.data),\n          width = el.clientWidth - 10, // HACK: Vega calculates dimensions with extra 10px for some reason.\n          height = el.clientHeight - 10 // HACK: Vega calculates dimensions with extra 10px for some reason.\n\n        if (data) spec.data = { values: data }\n        vegaEmbed(el, spec, {\n          mode: 'vega-lite',\n          defaultStyle: false,\n          renderer: 'canvas',\n          actions: false,\n          config: {\n            autosize: {\n              type: 'fit',\n              resize: true\n            },\n            view: {\n              discreteWidth: width,\n              discreteHeight: height,\n              continuousWidth: width,\n              continuousHeight: height,\n            }\n          }\n        }).catch(console.error)\n      },\n      onResize = debounce(1000, init),\n      dispose = () => window.removeEventListener('resize', onResize),\n      render = () => {\n        const\n          { name, width = 'auto', height = 'auto', visible } = state,\n          style: React.CSSProperties = (width === 'auto' && height === 'auto')\n            ? { flexGrow: 1 }\n            : { width, height }\n        return <div data-test={name} className={css.plot} style={{ ...style, position: 'relative', ...displayMixin(visible) }} ref={ref} />\n      }\n    window.addEventListener('resize', onResize)\n\n    return { init, render, dispose }\n  })\n\n/** Create a card containing a Vega-lite plot. */\ninterface State {\n  /** The title of this card. */\n  title: S\n  /** The Vega-lite specification. */\n  specification: S\n  /** Data for the plot, if any. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const { specification, data } = state\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{state.title}</div>\n            <div className={css.body}>\n              <XVegaVisualization key={xid()} model={{ specification, data }} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('vega', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Button, Buttons, XButtons, XStandAloneButton } from './button'\nimport { Checkbox, XCheckbox } from './checkbox'\nimport { Checklist, XChecklist } from './checklist'\nimport { ChoiceGroup, XChoiceGroup } from './choice_group'\nimport { ColorPicker, XColorPicker } from './color_picker'\nimport { Combobox, XCombobox } from './combobox'\nimport { DatePicker, XDatePicker } from './date_picker'\nimport { Dropdown, XDropdown } from './dropdown'\nimport { Expander, XExpander } from './expander'\nimport { FileUpload, XFileUpload } from './file_upload'\nimport { Frame, XFrame } from './frame'\nimport { Label, XLabel } from './label'\nimport { cards } from './layout'\nimport { Link, XLink } from './link'\nimport { Markup, XMarkup } from './markup'\nimport { MessageBar, XMessageBar } from './message_bar'\nimport { Picker, XPicker } from './picker'\nimport { Visualization, XVisualization } from './plot'\nimport { Progress, XProgress } from './progress'\nimport { B, bond, Card, Packed, S, unpack, xid } from './qd'\nimport { RangeSlider, XRangeSlider } from './range_slider'\nimport { Separator, XSeparator } from './separator'\nimport { Slider, XSlider } from './slider'\nimport { Spinbox, XSpinbox } from './spinbox'\nimport { Stats, XStats } from './stats'\nimport { Stepper, XStepper } from './stepper'\nimport { Table, XTable } from './table'\nimport { Tabs, XTabs } from './tabs'\nimport { Template, XTemplate } from './template'\nimport { Text, TextL, TextM, TextS, TextXl, TextXs, XText } from './text'\nimport { Textbox, XTextbox } from './textbox'\nimport { clas, getTheme, margin, padding } from './theme'\nimport { Toggle, XToggle } from './toggle'\nimport { XToolTip } from './tooltip'\nimport { VegaVisualization, XVegaVisualization } from './vega'\n\n/** Create a component. */\nexport interface Component {\n  /** Text block. */\n  text?: Text\n  /** Extra-large sized text block. */\n  text_xl?: TextXl\n  /** Large sized text block. */\n  text_l?: TextL\n  /** Medium sized text block. */\n  text_m?: TextM\n  /** Small sized text block. */\n  text_s?: TextS\n  /** Extra-small sized text block. */\n  text_xs?: TextXs\n  /** Label. */\n  label?: Label\n  /** Separator. */\n  separator?: Separator\n  /** Progress bar. */\n  progress?: Progress\n  /** Message bar. */\n  message_bar?: MessageBar\n  /** Textbox. */\n  textbox?: Textbox\n  /** Checkbox. */\n  checkbox?: Checkbox\n  /** Toggle. */\n  toggle?: Toggle\n  /** Choice group. */\n  choice_group?: ChoiceGroup\n  /** Checklist. */\n  checklist?: Checklist\n  /** Dropdown. */\n  dropdown?: Dropdown\n  /** Combobox. */\n  combobox?: Combobox\n  /** Slider. */\n  slider?: Slider\n  /** Spinbox. */\n  spinbox?: Spinbox\n  /** Date picker. */\n  date_picker?: DatePicker\n  /** Color picker. */\n  color_picker?: ColorPicker\n  /** Button. */\n  button?: Button\n  /** Button set. */\n  buttons?: Buttons\n  /** File upload. */\n  file_upload?: FileUpload\n  /** Table. */\n  table?: Table;\n  /** Link. */\n  link?: Link\n  /** Tabs. */\n  tabs?: Tabs;\n  /** Expander. */\n  expander?: Expander\n  /** Frame. */\n  frame?: Frame\n  /** Markup */\n  markup?: Markup\n  /** Template */\n  template?: Template\n  /** Picker.*/\n  picker?: Picker\n  /** Range Slider. */\n  range_slider?: RangeSlider\n  /** Stepper. */\n  stepper?: Stepper\n  /** Visualization. */\n  visualization?: Visualization\n  /** Vega-lite Visualization. */\n  vega_visualization?: VegaVisualization\n  /** Stats */\n  stats?: Stats\n  /** Inline components */\n  inline?: Inline\n}\n\n/** Create an inline (horizontal) list of components. */\ninterface Inline {\n  /** The components laid out inline. */\n  items: Component[]\n  /** Specifies how to lay out the individual components. Defaults to 'start'. */\n  justify?: 'start' | 'end'\n  /** Whether to display the components inset from the parent form, with a contrasting background. */\n  inset?: B\n}\n\n/** Create a form. */\ninterface State {\n  /** The components in this form. */\n  items: Packed<Component[]>\n  /** The title for this card. */\n  title?: S\n}\n\nconst\n  theme = getTheme(),\n  defaults: Partial<State> = { items: [] },\n  css = stylesheet({\n    card: {\n      padding: 15,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    vertical: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n      $nest: {\n        '>*:not(:first-child)': {\n          marginTop: 10\n        },\n      }\n    },\n    horizontal: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    inset: {\n      background: theme.colors.page,\n      padding: padding(10, 15)\n    },\n    horizontalLeft: {\n      $nest: {\n        '> *': {\n          margin: margin(0, 25, 0, 0),\n        }\n      }\n    },\n    horizontalRight: {\n      justifyContent: 'flex-end',\n      $nest: {\n        '> *': {\n          margin: margin(0, 0, 0, 25),\n        }\n      }\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n  })\n\nexport enum XComponentAlignment { Top, Left, Right }\n\nexport const\n  XComponents = ({ items, alignment, inset }: { items: Component[], alignment?: XComponentAlignment, inset?: B }) => {\n    const\n      components = items.map(m => <XComponent key={xid()} model={m} />),\n      className = alignment === XComponentAlignment.Left\n        ? clas(css.horizontal, css.horizontalLeft, inset ? css.inset : '')\n        : alignment === XComponentAlignment.Right\n          ? clas(css.horizontal, css.horizontalRight, inset ? css.inset : '')\n          : css.vertical\n    return <div className={className}>{components}</div>\n  },\n  XInline = ({ model: m }: { model: Inline }) => (\n    <XComponents\n      items={m.items}\n      alignment={m.justify === 'end' ? XComponentAlignment.Right : XComponentAlignment.Left}\n      inset={m.inset}\n    />\n  )\n\n\nconst\n  XComponent = ({ model: m }: { model: Component }) => {\n    if (m.text) return <XToolTip content={m.text.tooltip} expand={false}><XText name={m.text.name} content={m.text.content} size={m.text.size} visibility={m.text.visible} /></XToolTip>\n    if (m.text_xl) return <XToolTip content={m.text_xl.tooltip} expand={false}><XText name={m.text_xl.name} content={m.text_xl.content} size='xl' commands={m.text_xl.commands} visibility={m.text_xl.visible} /></XToolTip>\n    if (m.text_l) return <XToolTip content={m.text_l.tooltip} expand={false}><XText name={m.text_l.name} content={m.text_l.content} size='l' commands={m.text_l.commands} visibility={m.text_l.visible} /></XToolTip>\n    if (m.text_m) return <XToolTip content={m.text_m.tooltip} expand={false}><XText name={m.text_m.name} content={m.text_m.content} visibility={m.text_m.visible} /></XToolTip>\n    if (m.text_s) return <XToolTip content={m.text_s.tooltip} expand={false}><XText name={m.text_s.name} content={m.text_s.content} size='s' visibility={m.text_s.visible} /></XToolTip>\n    if (m.text_xs) return <XToolTip content={m.text_xs.tooltip} expand={false}><XText name={m.text_xs.name} content={m.text_xs.content} size='xs' visibility={m.text_xs.visible} /></XToolTip>\n    if (m.label) return <XToolTip content={m.label.tooltip} expand={false}><XLabel model={m.label} /></XToolTip>\n    if (m.link) return <XToolTip content={m.link.tooltip} expand={false}><XLink model={m.link} /></XToolTip>\n    if (m.separator) return <XSeparator model={m.separator} />\n    if (m.progress) return <XToolTip content={m.progress.tooltip}><XProgress model={m.progress} /></XToolTip>\n    if (m.message_bar) return <XMessageBar model={m.message_bar} />\n    if (m.textbox) return <XToolTip content={m.textbox.tooltip}><XTextbox model={m.textbox} /></XToolTip>\n    if (m.checkbox) return <XToolTip content={m.checkbox.tooltip} expand={false}><XCheckbox model={m.checkbox} /></XToolTip>\n    if (m.toggle) return <XToolTip content={m.toggle.tooltip} expand={false}><XToggle model={m.toggle} /></XToolTip>\n    if (m.choice_group) return <XToolTip content={m.choice_group.tooltip}><XChoiceGroup model={m.choice_group} /></XToolTip>\n    if (m.dropdown) return <XToolTip content={m.dropdown.tooltip}><XDropdown model={m.dropdown} /></XToolTip>\n    if (m.checklist) return <XToolTip content={m.checklist.tooltip}><XChecklist model={m.checklist} /></XToolTip>\n    if (m.combobox) return <XToolTip content={m.combobox.tooltip}><XCombobox model={m.combobox} /></XToolTip>\n    if (m.slider) return <XToolTip content={m.slider.tooltip}><XSlider model={m.slider} /></XToolTip>\n    if (m.spinbox) return <XToolTip content={m.spinbox.tooltip} expand={false}><XSpinbox model={m.spinbox} /></XToolTip>\n    if (m.date_picker) return <XToolTip content={m.date_picker.tooltip}><XDatePicker model={m.date_picker} /></XToolTip>\n    if (m.color_picker) return <XToolTip content={m.color_picker.tooltip}><XColorPicker model={m.color_picker} /></XToolTip>\n    if (m.file_upload) return <XToolTip content={m.file_upload.tooltip}><XFileUpload model={m.file_upload} /></XToolTip>\n    if (m.table) return <XToolTip content={m.table.tooltip}><XTable model={m.table} /></XToolTip>\n    if (m.buttons) return <XButtons model={m.buttons} />\n    if (m.tabs) return <XTabs model={m.tabs} />\n    if (m.button) return <XToolTip content={m.button.tooltip} showIcon={false} expand={false}><XStandAloneButton model={m.button} /></XToolTip>\n    if (m.expander) return <XExpander model={m.expander} />\n    if (m.frame) return <XFrame model={m.frame} />\n    if (m.markup) return <XMarkup model={m.markup} />\n    if (m.template) return <XTemplate model={m.template} />\n    if (m.picker) return <XToolTip content={m.picker.tooltip}><XPicker model={m.picker} /></XToolTip>\n    if (m.range_slider) return <XToolTip content={m.range_slider.tooltip}><XRangeSlider model={m.range_slider} /></XToolTip>\n    if (m.stepper) return <XToolTip content={m.stepper.tooltip}><XStepper model={m.stepper} /></XToolTip>\n    if (m.visualization) return <XVisualization model={m.visualization} />\n    if (m.vega_visualization) return <XVegaVisualization model={m.vega_visualization} />\n    if (m.stats) return <XStats model={m.stats} />\n    if (m.inline) return <XInline model={m.inline} />\n    return <Fluent.MessageBar messageBarType={Fluent.MessageBarType.severeWarning}>This component could not be rendered.</Fluent.MessageBar>\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = theme.merge(defaults, state),\n          title = s.title,\n          items = unpack<Component[]>(s.items) // XXX ugly\n\n        return (\n          <div data-test={name} className={css.card}>\n            {title && <div className={css.title}>{title}</div>}\n            <XComponents items={items} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('form', View)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as Fluent from '@fluentui/react'\nimport React from 'react'\nimport { XButtons } from './button'\nimport { Component, XComponents } from './form'\nimport { B, bond, qd, S } from './qd'\n\n/**\n * A dialog box (Dialog) is a temporary pop-up that takes focus from the page or app\n * and requires people to interact with it. Its primarily used for confirming actions,\n * such as deleting a file, or asking people to make a choice.\n */\nexport interface Dialog {\n  /** The dialog's title. */\n  title: S\n  /** The components displayed in this dialog. */\n  items: Component[]\n  /** The width of the dialog, e.g. '400px', defaults to '600px'. */\n  width?: S\n  /** True if the dialog should have a closing 'X' button at the top right corner. */\n  closable?: B\n  /** True to disable all actions and commands behind the dialog. Blocking dialogs should be used very sparingly, only when it is critical that the user makes a choice or provides information before they can proceed. Blocking dialogs are generally used for irreversible or potentially destructive tasks. Defaults to false. */\n  blocking?: B\n  /** Dialog with large header banner, mutually exclusive with `closable` prop. Defaults to false. */\n  primary?: B\n}\n\nexport default bond(() => {\n  const\n    { dialogB } = qd,\n    onDismiss = () => qd.dialogB(null),\n    render = () => {\n      const\n        { title, width = '600px', items = [], closable, primary, blocking } = dialogB() || {},\n        dialogContentProps: Fluent.IDialogContentProps = {\n          title,\n          onDismiss,\n          type: closable\n            ? Fluent.DialogType.close\n            : primary\n              ? Fluent.DialogType.largeHeader\n              : Fluent.DialogType.normal\n        },\n        lastComponent = items.pop()\n\n      return (\n        <Fluent.Dialog hidden={!dialogB()} dialogContentProps={dialogContentProps} modalProps={{ isBlocking: blocking }} minWidth={width} maxWidth={width}>\n          <XComponents items={items} />\n          {lastComponent?.buttons && <Fluent.DialogFooter><XButtons model={lastComponent.buttons} /></Fluent.DialogFooter>}\n        </Fluent.Dialog>\n      )\n    }\n  return { render, dialogB }\n})","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Spinner, SpinnerSize } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { PageLayout } from './page'\nimport { bond, box, connect, on, Page, qd, S, SockEvent, SockEventType, SockMessageType } from './qd'\nimport { clas, getTheme, pc } from './theme'\nimport Dialog from './dialog'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    app: {\n      position: 'absolute',\n      left: 0, top: 0, right: 0, bottom: 0,\n      backgroundColor: theme.colors.page,\n      color: theme.colors.text,\n      display: 'flex',\n      justifyContent: 'center',\n      overflow: 'auto'\n    },\n    centerFullHeight: {\n      height: pc(100),\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: theme.colors.page,\n      color: theme.colors.text,\n    },\n    freeOverlay: {\n      display: 'none',\n      position: 'fixed',\n      left: 0, top: 0, right: 0, bottom: 0,\n    },\n    busyOverlay: {\n      display: 'block',\n    },\n  })\n\n\nconst\n  BusyOverlay = bond(() => {\n    let\n      spinTimeout = 0\n    const\n      spinDelay = 500, // ms\n      busyB = qd.busyB,\n      spinB = box(false),\n      render = () => (\n        <div className={busyB() ? clas(css.freeOverlay, css.busyOverlay) : css.freeOverlay}>\n          <Spinner className={css.centerFullHeight} style={{ opacity: spinB() ? 0.8 : 0 }} label='Loading...' size={SpinnerSize.large} />\n        </div>\n      )\n    on(busyB, busy => {\n      window.clearTimeout(spinTimeout)\n      if (busy) {\n        spinTimeout = window.setTimeout(() => spinB(true), spinDelay)\n      } else {\n        spinB(false)\n      }\n    })\n    return { render, busyB, spinB }\n  }),\n  App = bond(() => {\n    const\n      contentB = box<{ page?: Page, error?: S }>({}),\n      onSocket = (e: SockEvent) => {\n        switch (e.t) {\n          case SockEventType.Data:\n            contentB({ page: e.page })\n            break\n          case SockEventType.Message:\n            if (e.type === SockMessageType.Err) contentB({ error: e.message })\n            break\n          case SockEventType.Reset:\n            window.location.reload()\n            break\n        }\n      },\n      onHashChanged = () => {\n        const h = window.location.hash\n        if (h?.length > 1) {\n          qd.args['#'] = h.substr(1)\n        }\n        qd.sync()\n      },\n      init = () => {\n        connect('/_s', onSocket)\n        window.addEventListener('hashchange', onHashChanged)\n      },\n      render = () => {\n        const { page, error } = contentB()\n        // TODO prettier error section\n        if (error) {\n          const errorMessage = error === 'not_found'\n            ? <Spinner label='Waiting for content...' size={SpinnerSize.large} />\n            : error\n          return <div className={clas(css.centerFullHeight, css.app)}>{errorMessage}</div>\n        }\n        if (!page) return <Spinner className={css.centerFullHeight} size={SpinnerSize.large} label='Loading ...' />\n\n        return (\n          <div className={css.app}>\n            <PageLayout key={page.key} page={page} />\n            <BusyOverlay />\n            <Dialog />\n          </div>\n        )\n      },\n      dispose = () => {\n        window.removeEventListener('hashchange', onHashChanged)\n      }\n\n    return { init, render, dispose, contentB }\n  })\n\nexport default App\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport Login from './login'\nimport App from './app'\nimport { Switch, Route, BrowserRouter } from 'react-router-dom'\n\nconst\n  Router = () => {\n    const\n      routes = [\n        {\n          path: '/_login',\n          exact: true,\n          render: () => <Login />,\n        },\n        {\n          path: '/',\n          exact: false,\n          render: () => <App />\n        },\n      ]\n    return (\n      <BrowserRouter>\n        <Switch>\n          {routes.map((r, i) => <Route key={i} path={r.path} exact={r.exact} render={r.render} />)}\n        </Switch>\n      </BrowserRouter>\n    )\n  }\n\nexport default Router\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Breadcrumb } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, S, qd } from './qd'\n\n/** Create a breadcrumb for a `h2o_wave.types.BreadcrumbsCard()`. */\ninterface Breadcrumb {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: S\n  /** The label to display. */\n  label: S\n}\n/**\n * Create a card containing breadcrumbs.\n * Breadcrumbs should be used as a navigational aid in your app or site.\n * They indicate the current pages location within a hierarchy and help\n * the user understand where they are in relation to the rest of that hierarchy.\n * They also afford one-click access to higher levels of that hierarchy.\n * Breadcrumbs are typically placed, in horizontal form, under the masthead\n * or navigation of an experience, above the primary content area.\n */\ninterface State {\n  /** A list of `h2o_wave.types.Breadcrumb` instances to display. See `h2o_wave.ui.breadcrumb()` */\n  items: Breadcrumb[]\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      items = state.items.map(({ name, label }) => ({\n        key: name,\n        text: label,\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }\n      )),\n      render = () => (\n        <div data-test={name} className={css.card}>\n          <Breadcrumb items={items} />\n        </div>\n      )\n\n    return { render, changed }\n  })\n\ncards.register('breadcrumbs', View, CardEffect.Transparent)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Dict, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out using a one-dimensional model with flexible alignemnt and wrapping capabilities.\n **/\ninterface State {\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n  /** Layout direction. */\n  direction?: 'horizontal' | 'vertical'\n  /** Layout strategy for main axis. */\n  justify?: 'start' | 'end' | 'center' | 'between' | 'around'\n  /** Layout strategy for cross axis. */\n  align?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\n  /** Wrapping strategy. */\n  wrap?: 'start' | 'end' | 'center' | 'between' | 'around' | 'stretch'\n}\n\nconst\n  directions: Dict<S> = {\n    horizontal: 'row',\n    vertical: 'column',\n  },\n  justifications: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n  },\n  alignments: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    baseline: 'baseline',\n    stretch: 'stretch',\n  },\n  wrappings: Dict<S> = {\n    start: 'flex-start',\n    end: 'flex-end',\n    center: 'center',\n    between: 'space-between',\n    around: 'space-around',\n    stretch: 'stretch',\n  },\n  toFlexStyle = (state: State): React.CSSProperties => {\n    const\n      css: React.CSSProperties = { display: 'flex' },\n      direction = directions[state.direction || ''],\n      justify = justifications[state.justify || ''],\n      align = alignments[state.align || ''],\n      wrap = wrappings[state.wrap || '']\n\n    if (direction) css.flexDirection = direction as any\n    if (justify) css.justifyContent = justify\n    if (align) css.alignItems = align\n    if (wrap) {\n      css.flexWrap = 'wrap'\n      css.alignContent = wrap\n    }\n    return css\n  }\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        // FIXME theme.merge()\n        return (\n          <div data-test={name} style={toFlexStyle(state)} >\n            <Repeat view={state.item_view} props={state.item_props} data={state.data} />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('flex', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { Markdown } from './markdown'\nimport { bond, Card, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    caption: {\n      ...theme.font.s13,\n    },\n  })\n\n\n/**\n * Render a page footer displaying a caption.\n * Footer cards are typically displayed at the bottom of a page.\n */\ninterface State {\n  /** The caption. Supports markdown. */\n  caption: S\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { caption } = state\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.caption}><Markdown source={caption} /></div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('footer', View, CardEffect.Transparent)\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, Data, Dict, F, Rec, Recs, S, U, unpack } from './qd'\n\n\n/** Create a card for displaying vector graphics. */\ninterface State {\n  /**\n   * The position and dimension of the SVG viewport, in user space.\n   * A space-separated list of four numbers: min-x, min-y, width and height.\n   * For example, '0 0 400 300'.\n   * See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\n   */\n  view_box: S\n  /** Background layer for rendering static SVG elements. Must be packed to conserve memory. */\n  stage?: Recs\n  /** Foreground layer for rendering dynamic SVG elements. */\n  scene?: Data\n  /**\n   * The displayed width of the rectangular viewport.\n   * (Not the width of its coordinate system.)\n   */\n  width?: S\n  /**\n   * The displayed height of the rectangular viewport.\n   * (Not the height of its coordinate system.)\n   */\n  height?: S\n}\n\nconst\n  toAttributes = (d: any): [S, any] => {\n    const\n      t = d['_t'] || 'u',  // default to '<use/>'\n      a: any = {}\n    delete d['_t']\n\n    for (const k in d) a[k.replace(/_./g, x => x.substr(1).toUpperCase())] = d[k] // xml_attr to xmlAttr\n    return [t, a]\n  },\n  extract = (d: any, extra: S[]): any[] => {\n    const e: any[] = []\n    for (const k of extra) e.push(d[k])\n    for (const k of extra) delete d[k]\n    return e\n  },\n  nums = (s: S): F[] => s.split(/\\s/g).map(x => +x),\n  zip = <T1, T2, T3>(a: T1[], b: T2[], f: (a: T1, b: T2) => T3): T3[] => {\n    const\n      n = a.length,\n      c: T3[] = new Array(n)\n    for (let i = 0; i < n; i++) c[i] = f(a[i], b[i])\n    return c\n  },\n  zip3 = <T1, T2, T3, T4>(a: T1[], b: T2[], c: T3[], f: (a: T1, b: T2, c: T3) => T4): T4[] => {\n    const\n      n = a.length,\n      d: T4[] = new Array(n)\n    for (let i = 0; i < n; i++) d[i] = f(a[i], b[i], c[i])\n    return d\n  },\n  curves: Dict<d3.CurveFactory> = {\n    basis: d3.curveBasis,\n    'basis-closed': d3.curveBasisClosed,\n    'basis-open': d3.curveBasisOpen,\n    cardinal: d3.curveCardinal,\n    'cardinal-closed': d3.curveCardinalClosed,\n    'cardinal-open': d3.curveCardinalOpen,\n    smooth: d3.curveCatmullRom,\n    'smooth-closed': d3.curveCatmullRomClosed,\n    'smooth-open': d3.curveCatmullRomOpen,\n    linear: d3.curveLinear,\n    'linear-closed': d3.curveLinearClosed,\n    'monotone-x': d3.curveMonotoneX,\n    'monotone-y': d3.curveMonotoneY,\n    natural: d3.curveNatural,\n    step: d3.curveStep,\n    'step-after': d3.curveStepAfter,\n    'step-before': d3.curveStepBefore,\n  },\n  ret0 = () => 0,\n  get0 = (d: any) => d[0],\n  get1 = (d: any) => d[1],\n  get2 = (d: any) => d[2]\n\nconst\n  css = stylesheet({\n    card: {\n      position: 'absolute',\n      left: grid.gap, top: grid.gap, right: grid.gap, bottom: grid.gap,\n    },\n  })\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    type El = { d: S, o: S }\n\n    const\n      renderEl = (o: Rec, i: U) => {\n        const\n          [t, a] = toAttributes(o)\n        switch (t) {\n          case 'a': {\n            const\n              [r1, r2, a1, a2] = extract(a, ['r1', 'r2', 'a1', 'a2']),\n              d = d3.arc()({\n                innerRadius: r1,\n                outerRadius: r2,\n                startAngle: a1 * Math.PI / 180.0,\n                endAngle: a2 * Math.PI / 180.0,\n              })\n            return <path key={i} {...a} d={d} />\n          }\n          case 'c': return <circle key={i} {...a} />\n          case 'e': return <ellipse key={i} {...a} />\n          case 'i': return <image key={i} {...a} />\n          case 'l': return <line key={i} {...a} />\n          case 'p': return <path key={i} {...a} />\n          case 'pg': return <polygon key={i} {...a} />\n          case 'pl': return <polyline key={i} {...a} />\n          case 'r': return <rect key={i} {...a} />\n          case 's': {\n            const\n              [x, y, x0, y0, curve, radial] = extract(a, ['x', 'y', 'x0', 'y0', 'curve', 'radial']),\n              c = curves[curve] || d3.curveLinear,\n              d = radial\n                ? y0 === ''\n                  ? d3.radialArea().angle(get0).outerRadius(get1).innerRadius(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.radialArea().angle(get0).outerRadius(get2).innerRadius(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.radialArea().endAngle(get0).startAngle(ret0).radius(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.radialArea().endAngle(get1).startAngle(get0).radius(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.radialLine().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n                : y0 === ''\n                  ? d3.area().x(get0).y1(get1).y0(ret0).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                  : y0\n                    ? d3.area().x(get0).y1(get2).y0(get1).curve(c)(zip3(nums(x), nums(y0), nums(y), (x, y0, y) => [x, y0, y]) as any)\n                    : x0 === ''\n                      ? d3.area().x1(get0).x0(ret0).y(get1).curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]) as any)\n                      : x0\n                        ? d3.area().x1(get1).x0(get0).y(get2).curve(c)(zip3(nums(x0), nums(x), nums(y), (x0, x, y) => [x0, x, y]) as any)\n                        : d3.line().curve(c)(zip(nums(x), nums(y), (x, y) => [x, y]))\n            return <path key={i} {...a} d={d} />\n          }\n          case 't': {\n            const [text] = extract(a, ['text'])\n            return <text key={i} {...a} >{text}</text>\n          }\n          default: return <use key={i} {...a} />\n        }\n      },\n      render = () => {\n        const\n          { view_box, width, height, stage, scene } = state,\n          stageEls = stage ? unpack<Recs>(stage).map(renderEl) : [],\n          sceneEls = scene ? unpack<El[]>(scene).map(({ d, o }, i) => renderEl({\n            ...(d ? JSON.parse(d) : {}),\n            ...(o ? JSON.parse(o) : {}),\n          }, i)) : []\n        return (\n          <div data-test={name} className={css.card}>\n            <svg viewBox={view_box} width={width} height={height}>\n              <g>{stageEls}</g>\n              <g>{sceneEls}</g>\n            </svg>\n          </div>\n        )\n\n      }\n    return { render, changed }\n  })\n\ncards.register('graphics', View)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { B, Card, unpack, Rec, S, Data, xid, box, bond } from './qd'\nimport { cards, CardView, Format } from './layout'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid ' + theme.colors.text1,\n          padding: '5px 0',\n        },\n      },\n    },\n    table: {\n      width: '100%',\n    }\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  cells: Data\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        let cells = unpack<any[]>(s.cells)\n\n        if (!Array.isArray(cells)) cells = [{ title: 'Data' }]\n\n        const\n          ths = cells.map((cell, i) => (<th key={i}>{cell.title}</th>)),\n          columns = cells.map(({ view, props, value }) => ({ view, props: unpack<Rec>(props), value })),\n          trs = unpack<Rec[]>(s.data).map((data, i) => {\n            const tds = columns.map(({ view, props, value }, j) => {\n              if (value != null) {\n                return <td><Format data={data} format={value} /></td>\n              } else {\n                const card: Card<any> = {\n                  name: xid(),\n                  state: { ...props, view, data },\n                  changed: box<B>(),\n                }\n                return <td><CardView key={j} card={card} /></td>\n              }\n            })\n            return (<tr key={i}>{tds}</tr>)\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title || 'Untitled'}</div>\n            <div className={css.body}>\n              <table className={css.table}>\n                <thead>\n                  <tr>{ths}</tr>\n                </thead>\n                <tbody>\n                  {trs}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('grid', View)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { INavLink, INavLinkGroup, Nav } from '@fluentui/react'\nimport React from 'react'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, S, qd, B } from './qd'\n\n/** Create a navigation item. */\nexport interface NavItem {\n  /** The name of this item. Prefix the name with a '#' to trigger hash-change navigation. */\n  name: S\n  /** The label to display. */\n  label: S\n  /** An optional icon to display next to the label. */\n  icon?: S\n  /** True if this item should be disabled. */\n  disabled?: B\n}\n\n/** Create a group of navigation items. */\nexport interface NavGroup {\n  /** The label to display for this group. */\n  label: S\n  /** The navigation items contained in this group. */\n  items: NavItem[]\n  /** Indicates whether nav groups should be rendered as collapsed initially */\n  collapsed?: B\n}\n\n/** Create a card containing a navigation pane. */\nexport interface State {\n  /** The navigation groups contained in this pane. */\n  items: NavGroup[]\n  /** The name of the active (highlighted) navigation item. */\n  value?: S\n}\n\nexport const\n  XNav = ({ items, value }: State) => {\n    const groups = items.map((g): INavLinkGroup => ({\n      name: g.label,\n      collapseByDefault: g.collapsed,\n      links: g.items.map(({ name, label, icon, disabled }): INavLink => ({\n        key: name,\n        name: label,\n        icon,\n        disabled,\n        url: '',\n        onClick: () => {\n          if (name.startsWith('#')) {\n            window.location.hash = name.substr(1)\n            return\n          }\n          qd.args[name] = true\n          qd.sync()\n        }\n      }))\n    }))\n    return <Nav groups={groups} selectedKey={value} />\n  },\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const render = () => <div data-test={name}><XNav {...state} /></div>\n    return { render, changed }\n  })\n\ncards.register('nav', View, CardEffect.Flat)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon, Panel, PanelType } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Box, box, Card, S } from './qd'\nimport { clas, getTheme, padding } from './theme'\nimport { NavGroup, XNav } from './nav'\n\nconst\n  theme = getTheme(),\n  iconSize = 24,\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      alignItems: 'center',\n      padding: padding(8, 15),\n    },\n    lhs: {\n      width: iconSize + 15,\n      height: iconSize + 15,\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'default',\n    },\n    burger: {\n      $nest: {\n        '&:hover': {\n          color: theme.colors.page, // TODO improve\n          cursor: 'pointer',\n        },\n      },\n    },\n    icon: {\n      fontSize: iconSize,\n      height: iconSize,\n      width: iconSize,\n    },\n    rhs: {\n      flexGrow: 1\n    },\n    title: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    subtitle: {\n      position: 'relative',\n      top: -5, // nudge up slightly to account for padding\n      ...theme.font.s12,\n    },\n  })\n\n\n/**\n * Render a page header displaying a title, subtitle and an optional navigation menu.\n * Header cards are typically used for top-level navigation.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The subtitle, displayed below the title. */\n  subtitle: S\n  /** The icon type, displayed to the left. */\n  icon?: S\n  /** The icon's color. */\n  icon_color?: S\n  /** The navigation menu to display when the header's icon is clicked. */\n  nav?: NavGroup[]\n}\n\nconst\n  Navigation = bond(({ items, isOpenB }: { items: NavGroup[], isOpenB: Box<boolean> }) => {\n    const\n      hideNav = () => isOpenB(false),\n      render = () => (\n        <Panel\n          isLightDismiss\n          type={PanelType.smallFixedNear}\n          isOpen={isOpenB()}\n          onDismiss={hideNav}\n          hasCloseButton={false}\n        >\n          <XNav items={items} />\n        </Panel>\n      )\n    return { render, isOpenB }\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      navB = box(false),\n      showNav = () => navB(true),\n      render = () => {\n        const\n          { title, subtitle, icon, icon_color, nav } = state,\n          burger = nav\n            ? (\n              <div className={clas(css.lhs, css.burger)} onClick={showNav}>\n                <FontIcon className={css.icon} iconName='GlobalNavButton' />\n              </div>\n            ) : (\n              <div className={css.lhs}>\n                <FontIcon className={css.icon} iconName={icon ?? 'WebComponents'} style={{ color: theme.color(icon_color) }} />\n              </div>\n            )\n\n        return (\n          <div data-test={name} className={css.card}>\n            {burger}\n            <div className={css.rhs}>\n              <div className={css.title}>{title}</div>\n              <div className={css.subtitle}>{subtitle}</div>\n            </div>\n            {nav && <Navigation items={nav} isOpenB={navB} />}\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('header', View, CardEffect.Raised)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    img: {\n      flexGrow: 1,\n      objectFit: 'contain',\n      maxHeight: 'calc(100% - 20px)'\n    }\n  })\n\n/** Create a card that displays a base64-encoded image. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The image MIME subtype. One of `apng`, `bmp`, `gif`, `x-icon`, `jpeg`, `png`, `webp`. */\n  type: S\n  /** Image data, base64-encoded. */\n  image: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <Format data={s.data} format={s.title} className={css.title} />\n        <img className={css.img} alt={s.title} src={`data:image/${s.type};base64,${s.image}`} />\n      </div>\n    )\n    return { render, changed }\n  })\n\ncards.register('image', View)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { F, S, U } from '../qd'\n\nconst css = stylesheet({\n  body: {\n    position: 'relative',\n  },\n  rail: {\n    position: 'absolute',\n    width: '100%',\n    opacity: 0.15,\n  },\n  bar: {\n    position: 'absolute',\n  }\n})\n\ninterface Props {\n  thickness: U\n  color: S\n  value: F\n}\n\nexport const ProgressBar = ({ thickness, color, value }: Props) => {\n  return (\n    <div className={css.body} style={{ height: thickness }}>\n      <div className={css.rail} style={{ height: thickness, backgroundColor: color }} />\n      <div className={css.bar} style={{ width: `${Math.round(value * 100)}%`, height: thickness, backgroundColor: color }} />\n    </div>\n  )\n}\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressBar } from './parts/progress_bar'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      ...theme.font.s18,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      color: theme.colors.text7,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n    captions: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n  })\n\n/** Create a large captioned card displaying a primary value, an auxiliary value and a progress bar, with captions for each value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The card's caption. */\n  caption: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value, typically a target value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  value_caption: S\n  /** The caption displayed below the auxiliary value. */\n  aux_value_caption: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className={css.title} />\n          <Format data={data} format={s.caption} className={css.caption} />\n          <div>\n            <div className={css.values}>\n              <div><Format data={data} format={s.value} /></div>\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n            <ProgressBar thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n            <div className={css.captions}>\n              <div><Format data={data} format={s.value_caption} /></div>\n              <div><Format data={data} format={s.aux_value_caption} /></div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('large_bar_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s40,\n      ...theme.font.w2,\n    },\n    aux_value: {\n      color: theme.colors.text6,\n      marginLeft: 5,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    }\n  })\n\n/** Create a stat card displaying a primary value, an auxiliary value and a caption. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The caption displayed below the primary value. */\n  caption: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => (\n      <div data-test={name} className={css.card}>\n        <Format data={s.data} format={s.title} className={css.title} />\n        <div className={css.values}>\n          <Format data={s.data} defaultValue={s.value} format={s.value} className={css.value} />\n          <Format data={s.data} format={s.aux_value} className={css.aux_value} />\n        </div>\n        <Format data={s.data} format={s.caption} className={css.caption} />\n      </div>\n    )\n\n    return { render, changed }\n  })\n\ncards.register('large_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      flexGrow: 1,\n      overflow: 'auto',\n      $nest: {\n        '>*': {\n          borderBottom: '1px solid ' + theme.colors.text1,\n          padding: '5px 0',\n        },\n      },\n    }\n  })\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards laid out in the form of a list (vertically, top-to-bottom).\n **/\ninterface State {\n  /** The title for this card. */\n  title: S\n  /** The child card type. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => {\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title}</div>\n            <div className={css.body}>\n              <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format } from './layout'\nimport { bond, Card, unpack, Rec, S } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    item: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    left: {\n      flexDirection: 'column',\n    },\n    right: {\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    caption: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n    value: {\n      ...theme.font.s12,\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text5,\n    },\n  })\n\n/** EXPERIMENTAL. DO NOT USE. */\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  title: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  caption: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  aux_value: S\n  /** EXPERIMENTAL. DO NOT USE. */\n  data: Rec\n}\n\nconst defaults: Partial<State> = {\n  title: 'Untitled',\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          s = theme.merge(defaults, state),\n          data = unpack(s.data)\n\n        return (\n          <div data-test={name} className={css.item}>\n            <div className={css.left}>\n              <Format data={data} format={s.title} className={css.title} />\n              <Format data={data} format={s.caption} className={css.caption} />\n            </div>\n            <div className={css.right}>\n              <Format data={data} format={s.value} className={css.value} />\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('list_item1', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { bond, Card, S } from './qd'\nimport { cards } from './layout'\n\nexport const\n  View = bond(({ name, state, changed }: Card<Record<S, unknown>>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <pre>{JSON.stringify(state, null, 2)}</pre>\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, grid } from './layout'\nimport { bond, Card, unpack, Rec, S, qd, U } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  pixelSize = 20,\n  canvasSize = pixelSize * 16,\n  palette = '#ffffff #bfbfbf #808080 #404040 #000000 #6699ff #3366cc #003399 #99cc33 #00cc00 #669900 #ffcc00 #ff9900 #ff6600 #cc0000'.split(/\\s+/g)\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    canvas: {\n      display: 'flex', flexWrap: 'wrap',\n      width: canvasSize, height: canvasSize,\n    },\n    swatches: {\n      paddingTop: 10,\n      marginTop: 15,\n      borderTop: '1px solid #ccc',\n    },\n    pixel: {\n      display: 'inline-block',\n      width: pixelSize, height: pixelSize,\n    }\n  }),\n  defaultColorAt = (i: U): S => {\n    const\n      row = Math.floor(i / 16),\n      col = i % 16,\n      odd = col % 2 === 1\n    return row % 2 === 0\n      ? odd ? '#fff' : '#ddd'\n      : odd ? '#ddd' : '#fff'\n\n  }\n\n/** Create a card displaying a collaborative Pixel art tool, just for kicks. */\ninterface State {\n  /** The title for this card.*/\n  title: S\n  /** The data for this card.*/\n  data: Rec\n}\n\n/** A pixel. */\ninterface Pixel {\n  /** The pixel's color. */\n  color: S\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    let brush = '#000'\n    const\n      paint = (i: U) => {\n        const page = qd.page()\n        page.set(`${name} data ${i}`, brush === 'none' ? null : [brush])\n        page.sync()\n      },\n      render = () => {\n        const\n          data = unpack<(Pixel | null)[]>(s.data),\n          swatches = palette.map((c, i) => (\n            <div\n              key={i}\n              className={css.pixel}\n              style={{ backgroundColor: c }}\n              onClick={() => brush = c}\n            />\n          )),\n          pixels = data.map((p, i) => {\n            const color = p ? p.color : defaultColorAt(i)\n            return (\n              <div\n                key={i}\n                className={css.pixel}\n                style={{ backgroundColor: color }}\n                onClick={() => paint(i)}\n              />\n            )\n          })\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{s.title}</div>\n            <div className={css.canvas}>{pixels}</div>\n            <div className={css.swatches}>\n              <div className={css.pixel}>\n                <svg onClick={() => brush = 'none'} viewBox=\"0 0 433.25 433.25\" width={pixelSize} height={pixelSize}>\n                  <path d=\"M418.4,192.331c19.8-19.8,19.8-51.9,0-71.7l-0.1-0.1l-78.6-78.3c-19.8-19.8-51.9-19.7-71.8,0l-169.5,169.6l-54.2,54.1 c-19.8,19.7-19.8,51.8-0.1,71.6l48.3,48.3H10c-5.5,0-10,4.5-10,10s4.5,10,10,10h297.4c5.5,0,10-4.5,10-10s-4.5-10-10-10H225 l23.9-23.7L418.4,192.331z M196.7,385.831h-76.1l-62.3-62.4c-12-12-11.9-31.4,0-43.4l47.1-47l122.2,122L196.7,385.831z M119.6,218.931l162.5-162.5c12-12,31.5-12,43.5,0l78.6,78.4c12,12,12,31.4,0,43.5l-162.4,162.8L119.6,218.931z\" />\n                </svg>\n              </div>\n              {swatches}\n            </div>\n          </div>)\n\n      }\n    return { render, changed }\n  })\n\ncards.register('pixel_art', View)\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { cards, Repeat } from './layout'\nimport { bond, Card, Rec, S, Data } from './qd'\n\n/**\n * EXPERIMENTAL. DO NOT USE.\n * Create a card containing other cards.\n **/\ninterface State {\n  /** EXPERIMENTAL. DO NOT USE. */\n  item_view: S\n  /** The child card properties. */\n  item_props: Rec\n  /** Data for this card. */\n  data: Data\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const\n      render = () => (\n        <div data-test={name}>\n          <Repeat view={s.item_view} props={s.item_props} data={s.data} />\n        </div>\n      )\n    return { render, changed }\n  })\n\ncards.register('repeat', View)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { Component, XComponentAlignment, XComponents } from './form'\nimport { CardEffect, cards } from './layout'\nimport { Markdown } from './markdown'\nimport { bond, Card, Packed, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      paddingTop: 5,\n    },\n    lhs: {\n      flexGrow: 1,\n    },\n    title: {\n      ...theme.font.s14,\n      ...theme.font.w6,\n    },\n    subtitle: {\n      ...theme.font.s12,\n      $nest: {\n        '>div>p': { margin: 0 },\n      },\n    },\n  })\n\n\n/**\n * Render a card displaying a title, a subtitle, and optional components.\n * Section cards are typically used to demarcate different sections on a page. \n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The subtitle, displayed below the title. Supports Markdown. */\n  subtitle: S\n  /** The components to display in this card */\n  items?: Packed<Component[]>\n}\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { title, subtitle, items } = state,\n          components = unpack<Component[]>(items), // XXX ugly\n          form = items && (\n            <div>\n              <XComponents items={components} alignment={XComponentAlignment.Right} />\n            </div>\n          )\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.lhs}>\n              <div className={css.title}>{title}</div>\n              <div className={css.subtitle}><Markdown source={subtitle} /></div>\n            </div>\n            {form}\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('section', View, CardEffect.Transparent)\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S } from '../qd'\n\ninterface Props {\n  data: any[]\n  zeroValue?: F\n  value: S\n  color: S\n  curve: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n}\n\nconst curves: Record<S, d3.CurveFactory> = {\n  linear: d3.curveLinear,\n  smooth: d3.curveCatmullRom,\n  step: d3.curveStep,\n  'step-after': d3.curveStepAfter,\n  'step-before': d3.curveStepBefore,\n}\n\nconst css = stylesheet({\n  container: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n    flexGrow: 1,\n    minHeight: 32,\n  }\n})\n\nexport const MicroArea = ({ value, color, data, zeroValue, curve }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement>(null),\n    [minY, maxY] = React.useMemo(() => {\n      let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n      if (zeroValue != null) {\n        minY = Math.min(zeroValue, minY)\n        maxY = Math.max(zeroValue, maxY)\n      }\n      return [minY, maxY]\n    }, [data, zeroValue]),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        scaleX = d3.scaleLinear().domain([0, data.length - 1]).range([0, width]),\n        scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 2]),\n        fcurve = curves[curve] || d3.curveLinear,\n        ln = d3.line<any>()\n          // .curve(d3.curveBasis) // XXX add support for this\n          .defined(d => d && d[value] != null)\n          .x((_, i) => scaleX(i))\n          .y(d => scaleY(d[value]))\n          .curve(fcurve),\n        ar = d3.area<any>()\n          // .curve(d3.curveBasis) // XXX add support for this\n          .defined(d => d && d[value] != null)\n          .x((_, i) => scaleX(i))\n          .y0(_ => scaleY(zeroValue == null ? minY : zeroValue))\n          .y1(d => scaleY(d[value]))\n          .curve(fcurve)\n\n      setContent(\n        <svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>\n          <path d={ar(data) as S} fill={color} fillOpacity='0.1' strokeLinejoin='round' strokeLinecap='round'></path>\n          <path d={ln(data) as S} fill='none' stroke={color} strokeWidth='1.5' strokeLinejoin='round' strokeLinecap='round'></path>\n        </svg>\n      )\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [value, color, data, zeroValue, curve])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\nimport * as d3 from 'd3'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { debounce, F, S } from '../qd'\n\ninterface Props {\n  data: any[]\n  zeroValue?: F\n  category?: S\n  value: S\n  color: S\n}\n\nconst css = stylesheet({\n  container: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n    flexGrow: 1,\n    minHeight: 32,\n  }\n})\n\nexport const MicroBars = ({ value, category = 'x', color, data, zeroValue }: Props) => {\n  const\n    ref = React.useRef<HTMLDivElement | null>(null),\n    [content, setContent] = React.useState<JSX.Element | null>(null),\n    [minY, maxY] = React.useMemo(() => {\n      let [minY, maxY] = d3.extent<any, any>(data, d => d[value])\n\n      if (zeroValue != null) {\n        minY = Math.min(zeroValue, minY)\n        maxY = Math.max(zeroValue, maxY)\n      }\n      return [minY, maxY]\n    }, [data, zeroValue]),\n    renderViz = () => {\n      if (!ref.current) return\n\n      const\n        { width, height } = ref.current.getBoundingClientRect(),\n        scaleX = d3.scaleBand().domain(data.map(d => d[category])).range([0, width]).paddingInner(0.1),\n        scaleY = d3.scaleLinear().domain([minY, maxY]).range([height, 0]),\n        rects = data.map((d, i) => {\n          const x = scaleX(d[category]), y = scaleY(d[value])\n          return <rect key={i} fill={color} x={x} y={y} width={2} height={height - y} />\n        })\n      setContent(<svg viewBox={`0 0 ${width} ${height}`} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}>{rects}</svg>)\n    },\n    onResize = debounce(1000, renderViz)\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [])\n  React.useLayoutEffect(renderViz, [value, category, color, data, zeroValue])\n\n  return <div ref={ref} className={css.container}>{content}</div>\n}","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\nimport { bond, Card, Data, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    text: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s12,\n    },\n  })\n\n/** Create a small stat card displaying a primary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.text}>\n            <Format data={data} format={s.title || 'Untitled'} className={css.title} />\n            <Format data={data} format={s.value} className={css.value} />\n          </div>\n          {plot}\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('small_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { bond, Card, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    }\n  })\n\n/** Create a stat card displaying a single value. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className={css.title} />\n          <Format data={data} format={s.value} className={css.value} />\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('small_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\nimport { clas, getTheme } from './theme'\n\n\n/**\n * Render a card displaying a list of stats.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The individual stats to be displayed. */\n  items: StatListItem[]\n  // TODO optional data for buffer-based rendering.\n  /** An optional name for this item. */\n  name?: S\n  /** The subtitle, displayed below the title. */\n  subtitle?: S\n}\n\n/** Create a stat item (a label-value pair) for stat_list_card. */\nexport interface StatListItem {\n  /** The label for the metric. */\n  label: S\n  /** An optional name for this item (required only if this item is clickable). */\n  name?: S\n  /** The caption for the metric, displayed below the label. */\n  caption?: S\n  /** The primary value of the metric. */\n  value?: S\n  /** The font color of the primary value. */\n  value_color?: S\n  /** The auxiliary value, displayed below the primary value. */\n  aux_value?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    subtitle: {\n      ...theme.font.s12,\n    },\n    items: {\n      overflow: 'auto',\n      flexGrow: 1,\n      marginTop: '1em',\n    },\n    item: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      borderBottom: '1px solid #ddd',\n      padding: '0.5em 0',\n      $nest: {\n        '&:last-child': {\n          borderBottom: 'none'\n        }\n      }\n    },\n    icon: {\n      padding: '0.2em 0.5em 0em 0.1em',\n    },\n    lhs: {\n      flexGrow: 1,\n    },\n    rhs: {\n      textAlign: 'right'\n    },\n    label: {\n      ...theme.font.s13,\n      ...theme.font.w6,\n    },\n    caption: {\n      ...theme.font.s12,\n      opacity: 0.7,\n    },\n    value: {\n      ...theme.font.s13,\n      ...theme.font.w6,\n    },\n    auxValue: {\n      ...theme.font.s12,\n      opacity: 0.7,\n    },\n    clickable: {\n      cursor: 'pointer',\n      $nest: {\n        '&:hover': {\n          backgroundColor: '#fafafa',\n        }\n      },\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { name: listName, title, subtitle, items } = state,\n          list = items.map(({ name: itemName, label, caption, value, value_color, aux_value, icon, icon_color }, i) => {\n            const\n              onClick = itemName ? () => qd.jump(listName, itemName) : undefined\n            return (\n              <div key={itemName ?? `${i}:${label}`} className={onClick ? clas(css.item, css.clickable) : css.item} onClick={onClick}>\n                { icon && <div className={css.icon} style={icon_color ? { color: theme.color(icon_color) } : undefined}><FontIcon iconName={icon} /></div>}\n                <div className={css.lhs}>\n                  <div className={css.label}>{label}</div>\n                  {caption && <div className={css.caption}>{caption}</div>}\n                </div>\n                <div className={css.rhs}>\n                  {value && (\n                    <div className={css.value} style={value_color ? { color: theme.color(value_color) } : undefined}>{value}</div>\n                  )}\n                  {aux_value && <div className={css.auxValue}>{aux_value}</div>}\n                </div>\n              </div>\n            )\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{title}</div>\n            { subtitle && <div className={css.subtitle}>{subtitle}</div>}\n            <div className={css.items}>\n              {list}\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('stat_list', View, CardEffect.Normal)\n\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { FontIcon } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\nimport { getTheme } from './theme'\n\n\n/**\n * Render a card displaying a table of stats.\n */\ninterface State {\n  /** The title. */\n  title: S\n  /** The names of this table's columns. */\n  columns: S[]\n  /** The rows displayed in this table. */\n  items: StatTableItem[]\n  // TODO optional data for buffer-based rendering.\n  /** An optional name for this item. */\n  name?: S\n  /** The subtitle, displayed below the title. */\n  subtitle?: S\n}\n\n/** Create a stat item (a label and a set of values) for stat_table_card. */\nexport interface StatTableItem {\n  /** The label for the row. */\n  label: S\n  /** The values displayed in the row. */\n  values: S[]\n  /** An optional name for this row (required only if this row is clickable). */\n  name?: S\n  /** The caption for the metric, displayed below the label. */\n  caption?: S\n  /** An optional icon, displayed next to the label. */\n  icon?: S\n  /** The color of the icon. */\n  icon_color?: S\n}\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 15,\n      // HACK: for some reason, the overflow on 'items' does not take effect without this line.\n      overflow: 'auto',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    subtitle: {\n      ...theme.font.s12,\n    },\n    items: {\n      flexGrow: 1,\n      overflow: 'auto',\n      marginTop: '1em',\n    },\n    table: {\n      ...theme.font.s13,\n      borderSpacing: 0,\n      width: '100%',\n      $nest: {\n        thead: {\n          ...theme.font.w6,\n          opacity: 0.4,\n          $nest: {\n            th: {\n              textAlign: 'right',\n              width: '1%',\n              whiteSpace: 'nowrap',\n              padding: '0.5em 0 0.5em 1em',\n            },\n            'th:first-child': {\n              textAlign: 'left',\n              width: '100%',\n              padding: '0.5em 1em 0.5em 0',\n            }\n          },\n        },\n        tbody: {\n          $nest: {\n            th: {\n              borderTop: '1px solid #ddd',\n              textAlign: 'left',\n              padding: '0.5em 1em 0.5em 0',\n            },\n            td: {\n              borderTop: '1px solid #ddd',\n              padding: '0.5em 0 0.5em 1em',\n            },\n          },\n        },\n        td: {\n          textAlign: 'right',\n          verticalAlign: 'top',\n        }\n      }\n    },\n    header: {\n      display: 'flex',\n    },\n    label: {\n      ...theme.font.w6,\n    },\n    caption: {\n      ...theme.font.s12,\n      ...theme.font.w4,\n      opacity: 0.7,\n    },\n    icon: {\n      padding: '0.2em 0.5em 0em 0.1em',\n    },\n    clickable: {\n      cursor: 'pointer',\n      $nest: {\n        '&:hover': {\n          backgroundColor: '#fafafa',\n        }\n      },\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { name: tableName, title, columns, subtitle, items } = state,\n          header = columns.map((label, i) => (\n            <th key={`${i}:${label}`}>{label}</th>\n          )),\n          rows = items.map(({ name: rowName, label, values, caption, icon, icon_color }, i) => {\n            const\n              onClick = rowName ? () => qd.jump(tableName, rowName) : undefined,\n              cells = values.map((value, j) => (<td key={`${j}:${value}`}>{value}</td>))\n\n            return (\n              <tr key={rowName ?? `${i}:${label}`} className={onClick ? css.clickable : undefined} onClick={onClick}>\n                <th key='label'>\n                  <div className={css.header}>\n                    {icon && <div className={css.icon} style={icon_color ? { color: theme.color(icon_color) } : undefined}>\n                      <FontIcon iconName={icon} />\n                    </div>}\n                    <div>\n                      <div className={css.label}>{label}</div>\n                      {caption && <div className={css.caption}>{caption}</div>}\n                    </div>\n                  </div>\n                </th>\n                {cells}\n              </tr>\n            )\n          })\n\n        return (\n          <div data-test={name} className={css.card}>\n            <div className={css.title}>{title}</div>\n            { subtitle && <div className={css.subtitle}>{subtitle}</div>}\n            <div className={css.items}>\n              <table className={css.table}>\n                <thead>\n                  <tr>\n                    {header}\n                  </tr>\n                </thead>\n                <tbody>\n                  {rows}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('stat_table', View, CardEffect.Normal)\n\n\n\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Pivot, PivotItem, PivotLinkFormat } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { B, bond, Card, qd, S } from './qd'\nimport { Tab } from './tabs'\n\n/** Create a card containing tabs for navigation. */\ninterface State {\n  /** The tabs to display in this card */\n  items: Tab[]\n  /** The name of the tab to select. */\n  value?: S\n  /** True if tabs should be rendered as links instead of buttons. */\n  link?: B\n  /** An optional name for the card. If provided, the selected tab can be accessed using the name of the card. */\n  name?: S\n}\n\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    },\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      onLinkClick = (item?: PivotItem) => {\n        const name = item?.props.itemKey\n        if (!name) return\n        if (name.startsWith('#')) {\n          window.location.hash = name.substr(1)\n          return\n        }\n        if (state.name) {\n          qd.args[state.name] = name\n        } else {\n          qd.args[name] = true\n        }\n        qd.sync()\n      },\n      render = () => {\n        const\n          linkFormat = state.link ? PivotLinkFormat.links : PivotLinkFormat.tabs,\n          items = state.items.map(({ name, label, icon }) => (\n            <PivotItem key={name} itemKey={name} headerText={label} itemIcon={icon} />\n          ))\n        return (\n          <div data-test={name} className={css.card}>\n            <Pivot linkFormat={linkFormat} onLinkClick={onLinkClick} defaultSelectedKey={state.value}>{items}</Pivot>\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('tab', View, CardEffect.Transparent)\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressArc } from './parts/progress_arc'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: grid.gap,\n      position: 'relative',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    body: {\n      position: 'relative',\n      display: 'flex',\n      flexGrow: 1,\n    },\n    value_overlay: {\n      position: 'absolute',\n      top: 0, right: 0, bottom: 0, left: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className={css.title} />\n          <div className={css.body}>\n            <ProgressArc thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n            <div className={css.value_overlay}>\n              <Format data={data} format={s.value} className={css.value} />\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('tall_gauge_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\nimport { bond, Card, Data, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    text: {\n      padding: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s12,\n      color: theme.colors.text7,\n    },\n  })\n\n/** Create a tall stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.text}>\n            <Format data={data} format={s.title || 'Untitled'} className={css.title} />\n            <Format data={data} format={s.value} className={css.value} />\n            <Format data={data} format={s.aux_value} className={css.aux_value} />\n          </div>\n          {plot}\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('tall_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CommandBar, IButtonProps, ICommandBarItemProps } from '@fluentui/react'\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { CardEffect, cards } from './layout'\nimport { bond, Card, qd, S } from './qd'\n\n/**\n * Create a command.\n *\n * Commands are typically displayed as context menu items or toolbar button.\n */\nexport interface Command {\n  /** An identifying name for this component. If the name is prefixed with a '#', the command sets the location hash to the name when executed. */\n  name: S\n  /** The text displayed for this command. */\n  label?: S\n  /** The caption for this command (typically a tooltip). */\n  caption?: S\n  /** The icon to be displayed for this command. */\n  icon?: S\n  /** Sub-commands, if any */\n  items?: Command[]\n  /** Data associated with this command, if any. */\n  value?: S\n  /** DEPRECATED. Use `value` instead. Data associated with this command, if any. */\n  data?: S\n}\n\n\n/** Create a card containing a toolbar. */\ninterface State {\n  /** Items to render. */\n  items: Command[]\n  /** Items to render on the right side (or left, in RTL). */\n  secondary_items?: Command[]\n  /** Items to render in an overflow menu. */\n  overflow_items?: Command[]\n}\n\nconst\n  overflowProps: IButtonProps = { ariaLabel: 'More' },\n  toCommands = (commands: Command[]) => commands.map(toCommand),\n  toCommand = ({ name, label, caption, icon, items }: Command): ICommandBarItemProps => {\n    qd.args[name] = false\n    const onClick = () => {\n      if (name[0] === '#') {\n        window.location.hash = name.substr(1)\n        return\n      }\n      qd.args[name] = true\n      qd.sync()\n    }\n    return {\n      key: name,\n      text: label,\n      ariaLabel: caption || label,\n      title: caption,\n      iconOnly: !label,\n      iconProps: icon ? { iconName: icon } : undefined,\n      subMenuProps: items ? { items: toCommands(items) } : undefined,\n      onClick,\n    }\n  }\nconst\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    }\n  })\n\nexport const\n  View = bond(({ name, state, changed }: Card<State>) => {\n    const\n      render = () => {\n        const\n          { items, overflow_items, secondary_items } = state,\n          commands = toCommands(items),\n          overflowCommands = overflow_items ? toCommands(overflow_items) : undefined,\n          farCommands = secondary_items ? toCommands(secondary_items) : undefined\n        return (\n          <div className={css.card}>\n            <CommandBar\n              data-test={name}\n              items={commands}\n              overflowItems={overflowCommands}\n              overflowButtonProps={overflowProps}\n              farItems={farCommands}\n              ariaLabel='Use left and right arrow keys to navigate between commands.'\n            />\n          </div>\n        )\n      }\n    return { render, changed }\n  })\n\ncards.register('toolbar', View, CardEffect.Transparent)\n\n\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressBar } from './parts/progress_bar'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { getTheme } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      padding: grid.gap,\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    content: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-end',\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s18,\n      ...theme.font.w3,\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress bar. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress bar, between 0 and 1. */\n  progress: F\n  /** The color of the progress bar. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <Format data={data} format={s.title} className={css.title} />\n          <div className={css.content}>\n            <div className={css.values}>\n              <Format data={data} format={s.value} className={css.value} />\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n            <ProgressBar thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_bar_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { ProgressArc } from './parts/progress_arc'\nimport { bond, Card, F, Rec, S, unpack } from './qd'\nimport { getTheme, pc } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      padding: grid.gap,\n    },\n    lhs: {\n      position: 'relative',\n      width: pc(50)\n    },\n    rhs: {\n      width: pc(50),\n      marginLeft: grid.gap,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    percentContainer: {\n      position: 'absolute',\n      top: 0, right: 0, bottom: 0, left: 0,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    percent: {\n      ...theme.font.s12,\n      opacity: 0.5,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n      overflow: 'visible'\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a progress gauge. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed next to the primary value. */\n  aux_value: S\n  /** The value of the progress gauge, between 0 and 1. */\n  progress: F\n  /** The color of the progress gauge. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const data = unpack(s.data)\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.lhs}>\n            <ProgressArc thickness={2} color={theme.color(s.plot_color)} value={s.progress} />\n            <div className={css.percentContainer}>\n              <div className={css.percent}>{`${Math.round(s.progress * 100)}%`}</div>\n            </div>\n          </div>\n          <div className={css.rhs}>\n            <Format data={data} format={s.title} className={css.title} />\n            <div className={css.values}>\n              <Format data={data} format={s.value} className={css.value} />\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_gauge_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react'\nimport { stylesheet } from 'typestyle'\nimport { cards, Format, grid } from './layout'\nimport { MicroArea } from './parts/microarea'\nimport { MicroBars } from './parts/microbars'\nimport { bond, Card, Data, F, Rec, S, unpack } from './qd'\nimport { getTheme, pc } from './theme'\n\nconst\n  theme = getTheme(),\n  css = stylesheet({\n    card: {\n      display: 'flex',\n      padding: grid.gap,\n    },\n    plot: {\n      display: 'flex',\n      width: pc(50),\n    },\n    text: {\n      width: pc(50),\n      paddingLeft: grid.gap,\n    },\n    title: {\n      ...theme.font.s12,\n      ...theme.font.w6,\n    },\n    values: {\n      display: 'flex',\n      alignItems: 'baseline',\n    },\n    value: {\n      ...theme.font.s24,\n      ...theme.font.w3,\n      lineHeight: '28px', // Override to fit inside 1 unit height in grid layout.\n    },\n    aux_value: {\n      ...theme.font.s13,\n      color: theme.colors.text7,\n      marginLeft: 5,\n    }\n  })\n\n/** Create a wide stat card displaying a primary value, an auxiliary value and a series plot. */\ninterface State {\n  /** The card's title. */\n  title: S\n  /** The primary value displayed. */\n  value: S\n  /** The auxiliary value displayed below the primary value. */\n  aux_value: S\n  /** The plot's data. */\n  plot_data: Data\n  /** The data field to use for y-axis values. */\n  plot_value: S\n  /** The base value to use for each y-axis mark. Set this to `0` if you want to pin the x-axis at `y=0`. If not provided, the minimum value from the data is used. */\n  plot_zero_value?: F\n  /** The data field to use for x-axis values (ignored if `plot_type` is `area`; must be provided if `plot_type` is `interval`). Defaults to 'x'. */\n  plot_category?: S\n  /** The type of plot. Defaults to `area`. */\n  plot_type?: 'area' | 'interval'\n  /** The plot's curve style. Defaults to `linear`. */\n  plot_curve?: 'linear' | 'smooth' | 'step' | 'step-after' | 'step-before'\n  /** The plot's color. */\n  plot_color?: S\n  /** Data for this card. */\n  data?: Rec\n}\n\nexport const\n  View = bond(({ name, state: s, changed }: Card<State>) => {\n    const render = () => {\n      const\n        data = unpack(s.data),\n        plot = s.plot_type === 'interval'\n          ? (\n            <MicroBars\n              data={unpack(s.plot_data)}\n              category={s.plot_category}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n            />\n          ) : (\n            <MicroArea\n              data={unpack(s.plot_data)}\n              value={s.plot_value}\n              color={theme.color(s.plot_color)}\n              zeroValue={s.plot_zero_value}\n              curve={s.plot_curve || 'linear'}\n            />\n          )\n\n      return (\n        <div data-test={name} className={css.card}>\n          <div className={css.plot}>{plot}</div>\n          <div className={css.text}>\n            <Format data={data} format={s.title} className={css.title} />\n            <div className={css.values}>\n              <Format data={data} format={s.value} className={css.value} />\n              <Format data={data} format={s.aux_value} className={css.aux_value} />\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return { render, changed }\n  })\n\ncards.register('wide_series_stat', View)","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","// Copyright 2020 H2O.ai, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { initializeIcons, loadTheme } from '@fluentui/react'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Router from './router'\nimport './cards'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport { defaultFontStyle, palette } from \"./theme\"\n\nloadTheme({ defaultFontStyle, palette })\n\n// Initialize Fluent icons\ninitializeIcons()\n\nReactDOM.render(<Router />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}